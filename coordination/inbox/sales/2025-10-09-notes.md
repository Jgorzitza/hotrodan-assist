# 2025-10-09 Sales Agent Notes

## Ask
- Once the live `/analytics/sales` service is hooked up, please verify cache hit/miss behaviour against the new `KpiCache` purge logic and confirm if additional invalidation hooks are needed when drilldowns update data.

## Context
- `fetchSalesAnalyticsWithCache` persists datasets in Prisma; retention cron now reports deleted cache entries (see `dashboard/app/lib/settings/retention.server.ts`).

## Log
- 2025-10-10 â€” Normalized analytics adapter range/trend dates to `YYYY-MM-DD`, added coverage for mixed ISO and space-separated payloads, and re-ran `npm exec vitest run app/lib/sales/__tests__/analytics.server.test.ts` plus `npm exec vitest run app/routes/__tests__/app.sales.test.ts` (expected fetch failure warnings only).
