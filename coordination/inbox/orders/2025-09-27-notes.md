# 2025-09-27 Orders Agent Notes

## Log
- Synced loader fallback passes `channel`/`tag` to mocks; Vitest coverage added (`app.routes/__tests__/app.orders.test.ts`).
- Latest Vitest runs: sync-mode suite and `postOrdersSyncAction` coverage green (expected Vite WS warning only).
- 2025-09-27 15:29 UTC: `npx vitest run app/routes/__tests__/app.orders.test.ts` with `USE_MOCK_DATA=false`; sync-mode tests passed, WebSocket port warning persists but remains non-blocking.
- 2025-09-28 00:04 UTC: `npx vitest run app/routes/__tests__/app.orders.test.ts` (sync-mode) passes; console surfaces expected mock fallback + sync failure logs only.
- 2025-09-28 00:05 UTC: `rg -n "<<<<<<<"` returns empty; no outstanding merge markers remain in dashboard surface files.
- 2025-09-28 01:10 UTC: `rg -n "<<<<<<<"` run pre-Playwright; no merge markers returned.
- 2025-09-28 01:11 UTC: `npx vitest run app/routes/__tests__/app.orders.test.ts` (`USE_MOCK_DATA=false`) green; expected sync fallback + 502 logs only.
- 2025-09-27 18:30 MDT: `npx vitest run app/routes/__tests__/app.orders.test.ts` (sync-mode) still passes; expected sync fallback + error logs only.
- 2025-09-27 18:36 MDT: Introduced shared currency formatter with $X.XK display for â‰¥$1K; `npx vitest run app/lib/orders/__tests__/sync.server.test.ts` passes.
- 2025-09-27 18:37 MDT: `npx vitest run app/routes/__tests__/app.orders.test.ts` (sync-mode) passes post-currency update; only expected sync error logs noted.

## Next
- Confirm merge markers stay cleared by running `rg -n "<<<<<<<"` before the next Playwright run.
- When the tunnel is available, run the live-mode Vitest suite (`USE_MOCK_DATA=false`) for assign/fulfill/support/returns and log anomalies in `coordination/2025-09-27_orders-sync-contract.md`.
- Execute the Playwright smoke checklist (detail drawer, optimistic actions, returns panel, pagination, inventory callout link) once the tunnel and Sync headers are ready; log results here.
- Continue logging Sync response envelopes for Gate A as live tests run.
