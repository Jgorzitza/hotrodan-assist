# 2025-09-27 Assistants Agent Notes

## Next
- Share the Prisma stub helper with routes still on mock loaders.
- Keep `/app.settings` loader/action tests green under `USE_MOCK_DATA=false` until shared fixtures arrive.
- Log any KMS/retention follow-ups here (documentation only).

## Updates – 2025-09-27
- Assistants API now persists `assigned_to`, `usd_sent_copy`, and merged metadata for Approval App hand-off; async delivery adapters supported.
- Added pagination + assignment filters to `/assistants/drafts`; detail payload keeps learning notes + send-copy flags for UI parity.
- Tests: expanded API suite (`.venv_assistants/bin/python -m pytest app/assistants/tests/test_api.py`) covering async adapters, metadata fallback, and send-copy flows.
- Wired `/assistants/events` SSE bridge and Approval App–shaped envelopes; all mutations now publish stream payloads with ticket/draft/feedback projections and the service accepts new social channels (`instagram`, `tiktok`, `shopify`).
- Tests: added broker-level event assertions for draft creation/approval/feedback and reran `.venv_assistants/bin/python -m pytest app/assistants/tests/test_api.py` (13 passing).
- 2025-09-27: Revalidated Assistants API responses against Approval App contract; no schema deltas. `.venv_assistants/bin/python -m pytest app/assistants/tests/test_api.py` (13 passing).