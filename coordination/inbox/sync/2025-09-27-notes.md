# 2025-09-27 Sync Agent Notes

## Next
- Install FastAPI/SQLAlchemy so the Python endpoint tests (`app/sync/tests/test_orders_endpoint.py`, `test_webhooks.py`) run against real HTTP calls.
- Smoke dashboard order actions against the live service once the tunnel is available; log any contract mismatches in `coordination/2025-09-27_orders-sync-contract.md`.

## Updates
- Sync orders write endpoints now echo the original `gid://` identifiers back in `updatedOrders`, avoiding dashboard merge mismatches; Python unit tests expect the new contract.
- `python3 -m unittest app/sync/tests/test_orders_endpoint.py app/sync/tests/test_webhooks.py` still skips locally because FastAPI/sqlalchemy deps are missing in the sandbox; will re-run once packages can be installed offline.
- Added root script `npm run test:sync:webhooks` so Vitest targets the dashboard suite with `--root dashboard`; avoids the "No test files found" error we hit when running from repo root. Latest run passes with the usual WS warning.
- Documented the shared response envelope for assign/fulfill/support/returns in `coordination/2025-09-27_orders-sync-contract.md`; aligns dashboard types with the Sync service payloads.
- `npm run test:sync:webhooks` (2025-09-27 18:31 UTC) passed locally; output notes the expected Skipping sync dispatch logs when `SYNC_SERVICE_URL` is unset.
