import type { AnalyticsSalesResponse } from "~/types/analytics";

const ISO = (value: string) => value;

export const analyticsSalesBase: AnalyticsSalesResponse = {
  scenario: "base",
  state: "ok",
  granularity: "daily",
  range: {
    label: "Last 28 days",
    start: ISO("2025-08-30T00:00:00Z"),
    end: ISO("2025-09-26T23:59:59Z"),
  },
  totals: {
    current_total: { amount: 98210.45, currency: "USD" },
    previousTotal: { amount: 93425.87, currencyCode: "USD" },
    delta_percentage: 5.1,
    averageOrderValue: { amount: 195.32, currency: "USD" },
    conversion_rate: 2.6,
  },
  trend: [
    { date: "2025-08-30", total: { amount: 3580.12, currency: "USD" }, orders: 27 },
    { date: "2025-08-31", total: { amount: 3721.45, currency: "USD" }, orders: 28 },
    { date: "2025-09-01", total: { amount: 4102.18, currency: "USD" }, orders: 32 },
    { date: "2025-09-02", total: { amount: 3895.76, currency: "USD" }, orders: 30 },
  ],
  channelBreakdown: [
    { channel: "Online Store", total: { amount: 61200.33, currency: "USD" }, percentage: 62 },
    { channel: "Wholesale", total: { amount: 22100.12, currency: "USD" }, percentage: 23 },
    { channel: "Retail", total: { amount: 14910, currency: "USD" }, percentage: 15 },
  ],
  forecast: {
    projected_total: { amount: 101500.12, currency: "USD" },
    variancePercentage: 3.4,
    variance_label: "ahead",
  },
  collections: [
    {
      id: "gid://shopify/Collection/100",
      title: "Performance Kits",
      handle: "performance-kits",
      gmv: { amount: 35800.4, currency: "USD" },
      orders: 145,
      conversionRate: 2.9,
      returning_rate: 28.5,
      attach_rate: 15.2,
      delta_percentage: 4.3,
      products: [
        {
          id: "gid://shopify/Product/1001",
          title: "Stage 3 Supercharger",
          gmv: { amount: 18210.55, currency: "USD" },
          orders: 58,
          attach_rate: 16.4,
          returningRate: 24.1,
          refund_rate: 1.1,
          sku_count: 2,
          inventory_status: "healthy",
          variants: [
            {
              id: "gid://shopify/ProductVariant/1001",
              sku: "SC-3-GT",
              title: "GT",
              gmv: { amount: 10210.1, currency: "USD" },
              units_sold: 34,
              inventory_on_hand: 96,
              attach_rate: 12.4,
              backorder_risk: "low",
            },
            {
              id: "gid://shopify/ProductVariant/1002",
              sku: "SC-3-SS",
              title: "SS",
              gmv: { amount: 8010.45, currency: "USD" },
              unitsSold: 24,
              inventoryOnHand: 65,
              attachRate: 18.6,
              backorderRisk: "none",
            },
          ],
        },
      ],
    },
    {
      id: "gid://shopify/Collection/200",
      title: "Cooling",
      handle: "cooling",
      gmv: { amount: 18410.05, currency: "USD" },
      orders: 88,
      conversion_rate: 2.4,
      returningRate: 31.2,
      attach_rate: 12.1,
      deltaPercentage: 6.1,
      products: [
        {
          id: "gid://shopify/Product/2001",
          title: "High-Flow Radiator",
          gmv: { amount: 10840.77, currency: "USD" },
          orders: 42,
          attach_rate: 11.8,
          returning_rate: 27.4,
          refund_rate: 0.9,
          sku_count: 1,
          inventory_status: "overstock",
          variants: [
            {
              id: "gid://shopify/ProductVariant/2001",
              sku: "RAD-HF-01",
              title: "Standard",
              gmv: { amount: 10840.77, currency: "USD" },
              units_sold: 42,
              inventory_on_hand: 180,
              attach_rate: 9.5,
              backorder_risk: "none",
            },
          ],
        },
      ],
    },
  ],
  bestSellers: [
    {
      id: "gid://shopify/Product/1001",
      title: "Stage 3 Supercharger",
      gmv: { amount: 18210.55, currency: "USD" },
      orders: 58,
      attach_rate: 16.4,
      returningRate: 24.1,
      refund_rate: 1.1,
      sku_count: 2,
      inventory_status: "healthy",
    },
  ],
  laggards: [
    {
      id: "gid://shopify/Product/2002",
      title: "Coolant Hose Kit",
      gmv: { amount: 3020.12, currency: "USD" },
      orders: 11,
      attach_rate: 6.2,
      returningRate: 18.4,
      refund_rate: 2.4,
      sku_count: 1,
      inventory_status: "stockout_risk",
    },
  ],
  attach_rate_insights: [
    {
      id: "attach-base-1",
      primary_product: "Stage 3 Supercharger",
      attachment_product: "High-Flow Radiator",
      attach_rate: 12.5,
      opportunity: "Bundle radiator with supercharger upgrade",
    },
  ],
  overstock_risks: [
    {
      id: "overstock-base-1",
      product_id: "gid://shopify/Product/2001",
      title: "High-Flow Radiator",
      status: "overstock",
      days_on_hand: 54,
      recommended_action: "Launch Labor Day promo",
    },
  ],
  cohort_highlights: [
    {
      id: "cohort-base-1",
      title: "High-value repeat",
      value: "38",
      description: "Customers with >$1k LTV ordering twice in 60 days",
    },
  ],
  top_customers: [
    {
      id: "customer-base-1",
      name: "Eva Motors",
      email: "eva@example.com",
      orders: 6,
      lifetime_value: { amount: 2480.5, currency: "USD" },
      last_order_at: ISO("2025-09-24T16:00:00Z"),
      first_order_at: ISO("2024-03-10T14:32:00Z"),
    },
  ],
};

export const analyticsSalesWarning: AnalyticsSalesResponse = {
  scenario: "warning",
  state: "warning",
  granularity: "weekly",
  range: {
    label: "Last 4 weeks",
    start: ISO("2025-09-01T00:00:00Z"),
    end: ISO("2025-09-28T00:00:00Z"),
  },
  totals: {
    current_total: { amount: 125000.55, currency: "USD" },
    previousTotal: { amount: 115000.12, currencyCode: "USD" },
    delta_percentage: 8.7,
    averageOrderValue: { amount: 220.45, currency: "USD" },
    conversion_rate: 2.3,
  },
  trend: [
    { date: "2025-09-01", total: { amount: 5000, currency: "USD" }, orders: 40 },
    { date: "2025-09-02", total: { amount: 5200, currency: "USD" }, orders: 42 },
    { date: "2025-09-03", total: { amount: 5300, currency: "USD" }, orders: 44 },
    { date: "2025-09-04", total: { amount: 5400, currency: "USD" }, orders: 46 },
  ],
  channel_breakdown: [
    { channel: "Online Store", total: { amount: 85000, currency: "USD" }, percentage: 68 },
    { channel: "Retail", total: { amount: 40000, currency: "USD" }, percentage: 32 },
  ],
  forecast: {
    projected_total: { amount: 130000, currency: "USD" },
    variancePercentage: 4.2,
    variance_label: "ahead",
  },
  collections: [
    {
      id: "gid://shopify/Collection/1",
      title: "EFI Components",
      handle: "efi-components",
      gmv: { amount: 42000, currency: "USD" },
      orders: 180,
      conversionRate: 2.7,
      returning_rate: 35,
      attach_rate: 18,
      delta_percentage: 6.4,
      products: [
        {
          id: "gid://shopify/Product/1",
          title: "Fuel Pump Kit",
          gmv: { amount: 18000, currency: "USD" },
          orders: 75,
          attach_rate: 22.5,
          returningRate: 28,
          refund_rate: 2.1,
          sku_count: 3,
          inventory_status: "healthy",
          variants: [
            {
              id: "gid://shopify/ProductVariant/1",
              sku: "FP-1000",
              title: "Standard",
              gmv: { amount: 10000, currency: "USD" },
              units_sold: 50,
              inventory_on_hand: 120,
              attach_rate: 15,
              backorder_risk: "low",
            },
          ],
        },
      ],
    },
  ],
  best_sellers: [
    {
      id: "gid://shopify/Product/4",
      title: "Injector Set",
      gmv: { amount: 22000, currency: "USD" },
      orders: 90,
      attach_rate: 16.4,
      returningRate: 30,
      refundRate: 1.2,
      skuCount: 2,
      inventoryStatus: "overstock",
    },
  ],
  laggards: [
    {
      id: "gid://shopify/Product/5",
      title: "Fuel Filter",
      gmv: { amount: 2500, currency: "USD" },
      orders: 8,
      attach_rate: 4.5,
      returningRate: 10,
      refund_rate: 3.5,
      sku_count: 1,
      inventory_status: "stockout_risk",
    },
  ],
  attach_rate_insights: [
    {
      id: "insight-1",
      primary_product: "Fuel Pump Kit",
      attachment_product: "Pressure Regulator",
      attach_rate: 12.5,
      opportunity: "Bundle with regulator",
    },
  ],
  overstock_risks: [
    {
      id: "risk-1",
      product_id: "gid://shopify/Product/3",
      title: "Hose Kit",
      status: "overstock",
      days_on_hand: 65,
      recommended_action: "Run clearance promo",
    },
  ],
  cohort_highlights: [
    {
      id: "highlight-1",
      title: "Top Repeat Cohort",
      value: "42",
      description: "Customers ordering 3+ times",
    },
  ],
  top_customers: [
    {
      id: "customer-1",
      name: "Alex Driver",
      email: "alex@example.com",
      orders: 8,
      lifetime_value: { amount: 3200, currency: "USD" },
      last_order_at: ISO("2025-09-25T15:00:00Z"),
      first_order_at: ISO("2024-04-02T12:00:00Z"),
    },
  ],
  alert: "Live data delayed",
};

export const analyticsSalesEmpty: AnalyticsSalesResponse = {
  scenario: "empty",
  state: "empty",
  granularity: "daily",
  range: {
    label: "Last 7 days",
    start: ISO("2025-09-20T00:00:00Z"),
    end: ISO("2025-09-26T23:59:59Z"),
  },
  totals: {
    current_total: { amount: 0, currency: "USD" },
    previousTotal: { amount: 4500.34, currencyCode: "USD" },
    delta_percentage: -100,
    averageOrderValue: { amount: 0, currency: "USD" },
    conversion_rate: 0,
  },
  trend: [],
  channelBreakdown: [],
  forecast: {
    projected_total: { amount: 0, currency: "USD" },
    variancePercentage: -100,
    variance_label: "behind",
  },
  collections: [],
  bestSellers: [],
  laggards: [],
  attachRateInsights: [],
  overstockRisks: [],
  cohortHighlights: [],
  topCustomers: [],
  alert: "No sales recorded in the selected period",
  error: null,
};

export const analyticsSalesError: AnalyticsSalesResponse = {
  scenario: "error",
  state: "error",
  granularity: "daily",
  range: {
    label: "Last 7 days",
    start: ISO("2025-09-20T00:00:00Z"),
    end: ISO("2025-09-26T23:59:59Z"),
  },
  totals: {
    current_total: { amount: 0, currency: "USD" },
    previousTotal: { amount: 0, currencyCode: "USD" },
    delta_percentage: 0,
    averageOrderValue: { amount: 0, currency: "USD" },
    conversion_rate: 0,
  },
  trend: [],
  channelBreakdown: [],
  forecast: null,
  collections: [],
  bestSellers: [],
  laggards: [],
  attachRateInsights: [],
  overstockRisks: [],
  cohortHighlights: [],
  topCustomers: [],
  alert: null,
  error: "Sales insights are temporarily unavailable. Try again shortly.",
};

export const analyticsSalesFixtures = {
  base: analyticsSalesBase,
  warning: analyticsSalesWarning,
  empty: analyticsSalesEmpty,
  error: analyticsSalesError,
} as const;
