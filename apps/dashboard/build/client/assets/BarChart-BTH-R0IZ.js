import{r as g,j as d}from"./index-DZoorY08.js";import{s as ze,a as lt,b as he,c as fe,e as We,f as me,p as Ve,u as Xe,g as Ut,h as Ye,i as ge,C as _t,X as Ue,H as Ke,Y as Ze,k as qe,A as Je,T as pe,L as xe,q as Qe,r as tn,t as en,v as nn,F as rn,w as an,x as on,y as sn,P as jt,z as Kt,B as ln,D as Tt,E as cn,G as be,I as ye,J as ve,K as Ae,M as Le,N as Me,l as un,m as dn,n as hn,S as Zt,o as fn}from"./SkipLink-CU7_6Q_C.js";import{B as Gt,D as mn,E as gn,F as qt,G as pn,H as xn,t as V,a as Y,u as G,m as bn,L as Se,j as bt,I as Rt,o as nt,J as Pt,n as yn,Z as $e,K as vn,M as Ce,k as pt,i as Bt,N as it,A as _e,b as An,O as Ln,l as Jt,P as Mn,T as Sn,s as zt,v as Wt,Q as $n,R as Cn,c as _n,f as jn,C as Tn,d as Bn}from"./ChartContainer-DSIix7Zm.js";import{m as Qt,k as En,n as je,o as yt,p as st,c as X,u as It,q as kn,g as vt,r as Ct,h as Q,s as xt,M as In,b as te,i as On,j as Vt,l as Dt,I as Xt,t as J,v as ee,w as K,x as gt,y as Te,z as Hn,A as wn,F as Nn,G as Fn,J as Dn,D as Gn,C as Rn}from"./PolarisVizProvider-BMFajI3Y.js";function Pn(t,e){let a,n;if(e===void 0)for(const r of t)r!=null&&(a===void 0?r>=r&&(a=n=r):(a>r&&(a=r),n<r&&(n=r)));else{let r=-1;for(let o of t)(o=e(o,++r,t))!=null&&(a===void 0?o>=o&&(a=n=o):(a>o&&(a=o),n<o&&(n=o)))}return[a,n]}class ne extends Map{constructor(e,a=Vn){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:a}}),e!=null)for(const[n,r]of e)this.set(n,r)}get(e){return super.get(re(this,e))}has(e){return super.has(re(this,e))}set(e,a){return super.set(zn(this,e),a)}delete(e){return super.delete(Wn(this,e))}}function re({_intern:t,_key:e},a){const n=e(a);return t.has(n)?t.get(n):a}function zn({_intern:t,_key:e},a){const n=e(a);return t.has(n)?t.get(n):(t.set(n,a),a)}function Wn({_intern:t,_key:e},a){const n=e(a);return t.has(n)&&(a=t.get(n),t.delete(n)),a}function Vn(t){return t!==null&&typeof t=="object"?t.valueOf():t}function Xn(t,e,a){t=+t,e=+e,a=(r=arguments.length)<2?(e=t,t=0,1):r<3?1:+a;for(var n=-1,r=Math.max(0,Math.ceil((e-t)/a))|0,o=new Array(r);++n<r;)o[n]=t+n*a;return o}const ae=Symbol("implicit");function Be(){var t=new ne,e=[],a=[],n=ae;function r(o){let i=t.get(o);if(i===void 0){if(n!==ae)return n;t.set(o,i=e.push(o)-1)}return a[i%a.length]}return r.domain=function(o){if(!arguments.length)return e.slice();e=[],t=new ne;for(const i of o)t.has(i)||t.set(i,e.push(i)-1);return r},r.range=function(o){return arguments.length?(a=Array.from(o),r):a.slice()},r.unknown=function(o){return arguments.length?(n=o,r):n},r.copy=function(){return Be(e,a).unknown(n)},Gt.apply(r,arguments),r}function Ee(){var t=Be().unknown(void 0),e=t.domain,a=t.range,n=0,r=1,o,i,l=!1,s=0,u=0,c=.5;delete t.unknown;function f(){var h=e().length,m=r<n,p=m?r:n,b=m?n:r;o=(b-p)/Math.max(1,h-s+u*2),l&&(o=Math.floor(o)),p+=(b-p-o*(h-s))*c,i=o*(1-s),l&&(p=Math.round(p),i=Math.round(i));var v=Xn(h).map(function(L){return p+o*L});return a(m?v.reverse():v)}return t.domain=function(h){return arguments.length?(e(h),f()):e()},t.range=function(h){return arguments.length?([n,r]=h,n=+n,r=+r,f()):[n,r]},t.rangeRound=function(h){return[n,r]=h,n=+n,r=+r,l=!0,f()},t.bandwidth=function(){return i},t.step=function(){return o},t.round=function(h){return arguments.length?(l=!!h,f()):l},t.padding=function(h){return arguments.length?(s=Math.min(1,u=+h),f()):s},t.paddingInner=function(h){return arguments.length?(s=Math.min(1,h),f()):s},t.paddingOuter=function(h){return arguments.length?(u=+h,f()):u},t.align=function(h){return arguments.length?(c=Math.max(0,Math.min(1,h)),f()):c},t.copy=function(){return Ee(e(),[n,r]).round(l).paddingInner(s).paddingOuter(u).align(c)},Gt.apply(f(),arguments)}function Yn(t,e){t=t.slice();var a=0,n=t.length-1,r=t[a],o=t[n],i;return o<r&&(i=a,a=n,n=i,i=r,r=o,o=i),t[a]=e.floor(r),t[n]=e.ceil(o),t}function oe(t){return Math.log(t)}function se(t){return Math.exp(t)}function Un(t){return-Math.log(-t)}function Kn(t){return-Math.exp(-t)}function Zn(t){return isFinite(t)?+("1e"+t):t<0?0:t}function qn(t){return t===10?Zn:t===Math.E?Math.exp:e=>Math.pow(t,e)}function Jn(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}function ie(t){return(e,a)=>-t(-e,a)}function Qn(t){const e=t(oe,se),a=e.domain;let n=10,r,o;function i(){return r=Jn(n),o=qn(n),a()[0]<0?(r=ie(r),o=ie(o),t(Un,Kn)):t(oe,se),e}return e.base=function(l){return arguments.length?(n=+l,i()):n},e.domain=function(l){return arguments.length?(a(l),i()):a()},e.ticks=l=>{const s=a();let u=s[0],c=s[s.length-1];const f=c<u;f&&([u,c]=[c,u]);let h=r(u),m=r(c),p,b;const v=l==null?10:+l;let L=[];if(!(n%1)&&m-h<v){if(h=Math.floor(h),m=Math.ceil(m),u>0){for(;h<=m;++h)for(p=1;p<n;++p)if(b=h<0?p/o(-h):p*o(h),!(b<u)){if(b>c)break;L.push(b)}}else for(;h<=m;++h)for(p=n-1;p>=1;--p)if(b=h>0?p/o(-h):p*o(h),!(b<u)){if(b>c)break;L.push(b)}L.length*2<v&&(L=qt(u,c,v))}else L=qt(h,m,Math.min(m-h,v)).map(o);return f?L.reverse():L},e.tickFormat=(l,s)=>{if(l==null&&(l=10),s==null&&(s=n===10?"s":","),typeof s!="function"&&(!(n%1)&&(s=pn(s)).precision==null&&(s.trim=!0),s=xn(s)),l===1/0)return s;const u=Math.max(1,n*l/e.ticks().length);return c=>{let f=c/o(Math.round(r(c)));return f*n<n-.5&&(f*=n),f<=u?s(c):""}},e.nice=()=>a(Yn(a(),{floor:l=>o(Math.floor(r(l))),ceil:l=>o(Math.ceil(r(l)))})),e}function ke(){const t=Qn(mn()).domain([1,10]);return t.copy=()=>gn(t,ke()).base(t.base()),Gt.apply(t,arguments),t}function tr(t,e={xAxisLabelFormatter:void 0,yAxisLabelFormatter:void 0}){return g.useCallback(function({seriesIndex:n,key:r}){const{xAxisLabelFormatter:o,yAxisLabelFormatter:i}=e,l=t.map(({name:s,data:u})=>u[n]?`${s} ${o?o(u[n].value):u[n].value}`:"").join(", ");return r?`${i?i(r):r}: ${l}`:""},[t,e])}function er({dataSeries:t,maxSeries:e,renderBucketLegendLabel:a=()=>"Other"}){if(t.length<=e||e<=0)return t;const n=t.slice(0,e),r=t.slice(e),o=r[0],i=r.reduce((l,s)=>(s.data.forEach((u,c)=>{l.data[c].value+=u.value||0}),l),{...o,name:a(),data:o.data.map(l=>({...l,value:0}))});return[...n,i]}const nr=9,rr=2,le=.5,ar=.25;function or({drawableWidth:t,data:e,labels:a,gapOverride:n}){const r=ke().range([ar,le]).domain([rr,nr]),o=Math.min(r(e.length),le),i=V({amount:n!=null?n/(t/e.length):o,min:0}),l=Ee().range([0,t]).paddingInner(i).paddingOuter(i/2).domain(e.map((f,h)=>h.toString())),s=l.bandwidth()/2,u=g.useMemo(()=>a.map((f,h)=>{const m=l(h.toString()),p=m==null?s:s+m;return{value:f,xOffset:p}}),[a,l,s]),c=g.useMemo(()=>l.step()-l.bandwidth(),[l]);return{xScale:l,xAxisLabels:u,gapWidth:c}}function sr({data:t,drawableWidth:e,labels:a}){const n=ze(t),{bar:{gap:r}}=Y(),o=g.useMemo(()=>![...n].reduce((s,u)=>s.concat(u),[]).some(s=>s!==null&&s>0),[n]),{xScale:i,gapWidth:l}=or({drawableWidth:e,data:n,labels:a,gapOverride:r});return{sortedData:n,areAllNegative:o,xScale:i,gapWidth:l}}function Ie({stackedValues:t,data:e,integersOnly:a}){if(t!=null){const n=t.map(s=>Math.min(...s.map(([u])=>u))),r=t.map(s=>Math.max(...s.map(([,u])=>u))),o=Math.max(...r),i=Math.min(...n),l=e.length===0||o===0&&i===0?Qt:Math.max(0,o);return{min:a?Math.floor(i):i,max:a?Math.ceil(l):l}}else{const n=e.reduce((l,s)=>{const u=s.data.map(({value:c})=>c).filter(c=>c!==null);return l.concat(u)},[]),r=Math.max(...n),o=Math.min(...n,0),i=e.length===0||r===0&&o===0?Qt:Math.max(0,r);return{min:a?Math.floor(o):o,max:a?Math.ceil(i):i}}}function Oe({data:t,renderTooltipContent:e,seriesColors:a,seriesNameFormatter:n}){const{theme:r}=G();return g.useCallback(o=>{if(o===-1)return null;const i=[{shape:"Bar",data:[]}];return t.forEach(({name:l,data:s,color:u},c)=>{const{value:f}=s[o];i[0].data.push({key:`${n(l??"")}`,value:f,color:u??a[c]})}),e({data:i,activeIndex:o,title:`${t[0].data[o].key}`,dataSeries:t,theme:r})},[t,a,r,e,n])}const ir="grad";function He({direction:t="vertical",id:e,seriesColors:a=[],size:n="100%",gradientUnits:r}){const{theme:o}=G();return d.jsx("defs",{children:a.map((i,l)=>{const s=Ot(o,l,e);return d.jsx(lr,{color:i,direction:t,gradientUnits:r,id:s,size:n},s)})})}function lr({id:t,color:e,direction:a,size:n,gradientUnits:r="userSpaceOnUse"}){const o=bn(e),i=a==="vertical"?{y1:n}:{x2:n};return d.jsx(Se,{gradient:o,gradientUnits:r,id:t,...i})}function Ot(t=En,e,a){return[a,t,e,ir].join("-")}function we(t,e){return t*(je/e)}function Ne({element:t,activeIndex:e,isPerformanceImpacted:a}){const n=Number(t.dataset.index),{opacity:r,transition:o}=bt({activeIndex:e,index:n});t.style.opacity=`${r}`,t.style.transition=a?"none":o}var cr={Group:"_Group_kzepq_144"};function Et({gaps:t,index:e,direction:a,firstGapValue:n}){if(!t[a][t[a].length-1]){t[a].push({index:e,gap:n});return}const{gap:r}=t[a][t[a].length-1];t[a].push({index:e,gap:r+yt})}function ur({stackedValues:t,labels:e}){if(t==null)return[];const a=e.map((r,o)=>t.map(i=>i[o])),n={};return a.map((r,o)=>{const i={positive:[],negative:[]},l=!r.some(([s,u])=>s+u>0);r.forEach(([s,u],c)=>{u>0&&Et({gaps:i,index:c,direction:"positive",firstGapValue:0}),s<0&&Et({gaps:i,index:c,direction:"negative",firstGapValue:l?0:yt})}),n[o]=i}),n}function Fe(t){return`${t.title}: ${t.data.map(({label:e,value:a})=>`${e} ${a}`)}`}var dr={Bar:"_Bar_h2fc5_144"};function hr(t,e){const a=ce(t,r=>r>0),n=ce(t,r=>r<0);return e===a?st.Top:e===n?st.Bottom:st.None}function ce(t,e){let a=-1;const n=t.reduce((r,o,i)=>i>a&&e(o)?(a=i,o):(a=i,r),-1);return t.lastIndexOf(n)}function kt({gaps:t,direction:e,seriesIndex:a}){var n,r;return(n=(r=t[e].find(({index:o})=>o===a))===null||r===void 0?void 0:r.gap)!==null&&n!==void 0?n:0}function fr({start:t,end:e,groupIndex:a,gaps:n,yScale:r}){return t<0?r(e)+kt({gaps:n,direction:"negative",seriesIndex:a}):e>0?r(e)-kt({gaps:n,direction:"positive",seriesIndex:a}):0}function mr({activeBarGroup:t,animationDelay:e,data:a,gaps:n,groupIndex:r,id:o,width:i,x:l,yScale:s}){const[u,c]=g.useState(-1),{theme:f,shouldAnimate:h}=G(),m=a[0]?Object.keys(a[0].data):[];lt({type:X,onIndexChange:({detail:b})=>{(b.index===-1||t===-1||t===r)&&c(b.index)}});const{transform:p}=It({from:{transform:"scale(1, 0)"},to:{transform:"scale(1, 1)"},config:kn,delay:h?e:0,default:{immediate:!h}});return d.jsx(vt.g,{style:{transform:p,transformOrigin:`0px ${s(0)}px`},children:a.map((b,v)=>{const[L,A]=b,x=Math.abs(s(A)-s(L)),y=b.data?Object.values(b.data):[],M=`${m[v]} ${y[v]}`,j=Rt({height:x,width:i,borderRadius:hr(y,v)}),S=fr({start:L,end:A,groupIndex:v,gaps:n[r],yScale:s});return d.jsxs("g",{"aria-hidden":"true",children:[d.jsx("path",{fill:`url(#${Ot(f,v,o)})`,d:j,transform:`translate(${l},${S})`,style:bt({activeIndex:u,index:v}),"aria-hidden":"true"},v),d.jsx("rect",{className:dr.Bar,fill:"transparent",height:x+yt,width:i,transform:`translate(${l},${S})`,...nt({type:X,index:v}),tabIndex:-1,role:"listitem","aria-label":M})]},`${r}-${v}`)})})}function gr({accessibilityData:t,activeBarGroup:e,drawableHeight:a,gapWidth:n,id:r,labels:o,stackedValues:i,xScale:l,yScale:s}){const u=l.bandwidth()-Ct,c=g.useMemo(()=>o.map((h,m)=>i.map(p=>p[m])),[o,i]),f=ur({stackedValues:i,labels:o});return d.jsx(g.Fragment,{children:c.map((h,m)=>{var p;const b=(p=l(m.toString()))!==null&&p!==void 0?p:0,v=Fe(t[m]),L=we(m,c.length);return d.jsxs("g",{...nt({type:xt,index:m}),className:cr.Group,style:bt({activeIndex:e,index:m}),"aria-label":v,role:"list","data-type":Q.BarGroup,"data-index":m,"aria-hidden":"false",children:[d.jsx("rect",{height:a,fill:"transparent",x:b-n/2,width:l.bandwidth()+n,"aria-hidden":"true"}),d.jsx(mr,{activeBarGroup:e,animationDelay:L,data:h,gaps:f,groupIndex:m,id:r,width:u,x:b,yScale:s})]},m)})})}var Ft={BarGroup:"_BarGroup_1gnzm_144",Bar:"_Bar_1gnzm_144"},pr={Bar:"_Bar_1w2vx_144"};const xr=g.memo(function({animationDelay:e=0,ariaLabel:a,color:n,height:r,index:o,rawValue:i,role:l,width:s,x:u,zeroPosition:c,areAllNegative:f}){const m=Y().bar.borderRadius,p=i<0,b=i===0,v=g.useMemo(()=>p?c+r:c-r,[r,p,c]),L=g.useMemo(()=>{if(v!=null)return{transform:`translateX(${p?u+s:u}px)`}},[v,p,u,s]),A=g.useCallback(($=0,C=0)=>Rt({height:$,width:C,borderRadius:`${m} ${m} 0 0`}),[m]),x=Pt({animationDelay:e}),y=`${p?"rotate(180)":"rotate(0)"}`,M=yn(i),j=M==null?!1:Math.sign(M)!==Math.sign(i),{pathD:S,transform:E}=It({from:{pathD:A(1,s),transform:`translate(0 ${c}) ${y}`},to:j?[{pathD:A(0,s),transform:`translate(0 ${c}) ${y}`,immediate:!0},{pathD:A(r,s),transform:`translate(0 ${v}) ${y}`}]:{pathD:A(r,s),transform:`translate(0 ${v}) ${y}`},...x});return d.jsx(g.Fragment,{children:b?d.jsx($e,{x:u+s/2,y:v,direction:"vertical",areAllNegative:f}):d.jsx("g",{"aria-hidden":"true",style:L,children:d.jsx(vt.path,{"data-id":`bar-${o}`,"data-index":o,"data-type":Q.Bar,d:S,fill:n,"aria-label":a,role:l,className:pr.Bar,"aria-hidden":"true",transform:E})})})});function De({barSize:t,zeroPosition:e,max:a,position:n}){let r=vn;const o=a-e,i=a-o;return n==="horizontal"?t+r>=o&&(r=o-t):t+r>=i&&(r=i-t),{clampedSize:V({amount:t+r,min:t,max:a}),offset:r}}const ue="colorVisionMask";function br({animationDelay:t,x:e,data:a,yScale:n,width:r,colors:o,drawableHeight:i,indexOffset:l,barGroupIndex:s,accessibilityData:u,activeBarGroup:c,gapWidth:f,theme:h,areAllNegative:m}){const p=Fe(u[s]),{id:b,isPerformanceImpacted:v}=G(),L=Y(h),A=g.useMemo(()=>{const $=document.getElementById(Ce(b));return $==null?[]:$.querySelectorAll(`[data-type="${ue}"][data-group-index="${s}"]`)},[o]);lt({type:X,onIndexChange:({detail:$})=>{($.index===-1||c===-1||c===s)&&A.forEach(C=>{Ne({element:C,activeIndex:$.index,isPerformanceImpacted:v})})}});const x=V({amount:a.length,min:1}),y=r/x,M=g.useCallback($=>Math.abs(n($)-n(0)),[n]),j=g.useMemo(()=>pt("gradient"),[]),S=g.useMemo(()=>pt("mask"),[]),E=o.map($=>typeof $=="string"?[{color:$,offset:0}]:$);return d.jsxs(g.Fragment,{children:[d.jsx("mask",{id:S,children:a.map(($,C)=>$==null?null:d.jsx("g",{className:Ft.BarGroup,"data-type":Q.BarGroup,"data-index":s,children:d.jsx(xr,{height:M($),color:In,x:e+(y+Ct)*C,zeroPosition:n(0),rawValue:$,width:y,index:C,animationDelay:t,areAllNegative:m})},`${s}${C}`))}),d.jsx("g",{mask:`url(#${S})`,children:E.map(($,C)=>d.jsxs("g",{children:[d.jsx(Se,{gradient:$,id:`${j}${C}`}),d.jsx("rect",{x:e+(y+Ct)*C,y:te*-1,width:y-Ct,height:i+te*2,"data-type":ue,"data-index":C,"data-group-index":s,fill:a[C]===0?L.bar.zeroValueColor:`url(#${j}${C})`})]},`${S}${C}`))}),d.jsxs("g",{...nt({type:xt,index:s}),className:Ft.BarGroup,"data-type":Q.BarGroup,"data-index":s,"aria-hidden":"false","aria-label":p,role:"list",children:[d.jsx("rect",{width:y*x+f,x:e-f/2,height:i,fill:"transparent","aria-hidden":"true"}),a.map(($,C)=>{if($===null)return null;const{label:T,value:_}=u[s].data[C],B=`${T} ${_}`,k=V({amount:Math.abs(n($)-n(0)),min:1}),I=$<0,w=I?n(0):n(0)-k,{clampedSize:O,offset:F}=De({barSize:k,zeroPosition:n(0),max:i,position:"vertical"});return d.jsx("rect",{height:O,x:e+y*C,y:I||m?w:w-F,width:y,fill:"transparent","aria-label":B,role:"listitem",...nt({type:X,index:C+l,watch:!v}),className:Ft.Bar,tabIndex:-1},C)})]})]})}function yr({colors:t,data:e,drawableHeight:a,gapWidth:n,id:r,indexOffset:o=0,labels:i,sortedData:l,stackedValues:s,xScale:u,yScale:c,yAxisOptions:f,areAllNegative:h}){const{id:m,isPerformanceImpacted:p}=G(),[b,v]=g.useState(-1),L=g.useMemo(()=>{const x=document.getElementById(Ce(m));return x==null?[]:x.querySelectorAll(`[data-type="${Q.BarGroup}"]`)},[l]);lt({type:xt,onIndexChange:({detail:x})=>{v(x.index),L.forEach(y=>{Ne({element:y,activeIndex:x.index,isPerformanceImpacted:p})})}});const A=g.useMemo(()=>i.map((x,y)=>{const M=e.map(({data:j,name:S})=>{var E;return{label:S??"",value:f.labelFormatter((E=j[y].value)!==null&&E!==void 0?E:0)}});return{title:x,data:M}}),[e,i,f]);return s!=null?d.jsx(gr,{accessibilityData:A,activeBarGroup:b,colors:t,drawableHeight:a,gapWidth:n,id:r,labels:i,stackedValues:s,xScale:u,yScale:c}):d.jsx(g.Fragment,{children:l.map((x,y)=>{const M=u(y.toString()),j=we(y,l.length);return d.jsx(br,{accessibilityData:A,activeBarGroup:b,animationDelay:j,barGroupIndex:y,colors:t,data:x,gapWidth:n,drawableHeight:a,indexOffset:o,width:u.bandwidth(),x:M??0,yScale:c,areAllNegative:h},y)})})}function vr({annotationsLookupTable:t={},data:e,emptyStateText:a,legendPosition:n,renderAnnotationContent:r,renderLegendContent:o,renderTooltipContent:i,showLegend:l,type:s,xAxisOptions:u,yAxisOptions:c,renderHiddenLegendLabel:f,seriesNameFormatter:h}){const m=Y(),{characterWidths:p,containerBounds:b}=G(),[v,L]=g.useState(null),A=g.useMemo(()=>pt("VerticalBarChart"),[]);he({enabled:e.length>1});const x=b.height<On,{legend:y,setLegendDimensions:M,height:j,width:S}=fe({data:[{shape:"Bar",series:e}],showLegend:l&&!x,seriesNameFormatter:h}),E=x||u.hide||m.xAxis.hide,[$,C]=g.useState(E?0:Vt),[T,_]=g.useState(0),B=e.length===0,k=We(e),{formattedLabels:I,unformattedLabels:w}=me({data:[e[k]],labelFormatter:u.labelFormatter}),O=s==="stacked",F=O?Ve({series:e,labels:I,order:Qe,offset:tn}):null,R=Xe({dataLength:e[0]?e[0].data.length:0}),{min:N,max:P}=Ie({stackedValues:F,data:e,integersOnly:c.integersOnly});let H;if(c.maxYOverride===null?H=P:H=e.every(mt=>mt.data.every(Nt=>Nt.value===0))?0:P,Bt(H)||Bt(N))throw new Error("min and max must be finite numbers.");const D={formatYAxisLabel:c.labelFormatter,integersOnly:c.integersOnly,maxYOverride:c.maxYOverride,max:H,min:N,ticksOverride:c.ticksOverride},{ticks:rt}=Ut({...D,drawableHeight:j,verticalOverflow:m.grid.verticalOverflow}),tt=g.useMemo(()=>Math.max(...rt.map(({formattedValue:mt})=>it(mt,p))),[p,rt]),{drawableWidth:z,drawableHeight:ct,chartXPosition:Z,chartYPosition:q,xAxisBounds:at,yAxisBounds:At}=Ye({annotationsHeight:T,height:j,width:S,xAxisHeight:$,yAxisWidth:tt}),Lt=q+ct+_e,Ht={width:S,height:j,x:Z,y:q},{sortedData:ut,areAllNegative:Mt,xScale:W,gapWidth:wt}=sr({data:e,drawableWidth:z,labels:I}),{ticks:dt,yScale:ht}=Ut({...D,drawableHeight:ct,verticalOverflow:m.grid.verticalOverflow}),ft=e.map(({color:U})=>U),St=Oe({renderTooltipContent:i,data:e,seriesColors:ft,seriesNameFormatter:h}),{hasXAxisAnnotations:ot,hasYAxisAnnotations:$t}=ge(t),et=W.bandwidth()/2;return d.jsxs(_t.Div,{height:j,width:S,children:[d.jsxs(_t.Svg,{height:j,width:S,emptyStateText:a,emptyState:B,setRef:L,children:[E?null:d.jsx(Ue,{allowLineWrap:u.allowLineWrap,labels:I,labelWidth:W.bandwidth(),onHeightChange:C,reducedLabelIndexes:R,x:at.x,xScale:W,y:at.y}),d.jsx(He,{direction:"vertical",gradientUnits:O?"objectBoundingBox":"userSpaceOnUse",id:A,seriesColors:ft,size:O?"100%":`${S}px`}),m.grid.showHorizontalLines?d.jsx(Ke,{ticks:dt,transform:{x:m.grid.horizontalOverflow?0:Z,y:q},width:m.grid.horizontalOverflow?S:z}):null,d.jsx(Ze,{ticks:dt,textAlign:"right",width:tt,x:At.x,y:At.y}),d.jsx("g",{transform:`translate(${Z},${q})`,children:d.jsx(yr,{colors:ft,data:e,drawableHeight:ct,gapWidth:wt,id:A,labels:I,sortedData:ut,stackedValues:F,xScale:W,yAxisOptions:c,yScale:ht,areAllNegative:Mt})}),$t&&d.jsx("g",{transform:`translate(${Z},${q})`,tabIndex:-1,children:d.jsx(qe,{annotationsLookupTable:t,drawableHeight:Lt,drawableWidth:z,ticks:dt,yScale:ht})}),ot&&d.jsx("g",{transform:`translate(${Z+et},0)`,tabIndex:-1,children:d.jsx(Je,{annotationsLookupTable:t,axisLabelWidth:W.bandwidth(),drawableHeight:Lt,drawableWidth:z,labels:w,labelFormatter:u.labelFormatter,onHeightChange:_,xScale:W,renderAnnotationContent:r})})]}),ut.length>0&&d.jsx(pe,{bandwidth:W.bandwidth(),chartBounds:Ht,chartType:Xt.Bar,data:e,focusElementDataType:Q.BarGroup,getMarkup:St,longestSeriesIndex:k,margin:{...Dt,Top:q},parentElement:v,type:s,usePortal:!0,xScale:W,yScale:ht}),l&&!x&&d.jsx(xe,{colorVisionType:X,data:y,position:n,onDimensionChange:M,renderLegendContent:o,enableHideOverflow:!0,renderHiddenLegendLabel:f})]})}function Ar({annotationsLookupTable:t={},data:e,emptyStateText:a,legendPosition:n,renderAnnotationContent:r,renderLegendContent:o,renderTooltipContent:i,showLegend:l,type:s="default",xAxisOptions:u,yAxisOptions:c,renderHiddenLegendLabel:f,seriesNameFormatter:h}){const m=Y(),p=An(e,m),b=e.map((v,L)=>({color:p[L],...v}));return d.jsx(vr,{annotationsLookupTable:t,data:b,emptyStateText:a,legendPosition:n,renderLegendContent:o,renderTooltipContent:i,seriesNameFormatter:h,showLegend:l,type:s,xAxisOptions:u,yAxisOptions:c,renderAnnotationContent:r,renderHiddenLegendLabel:f})}function Lr(t){const e=Y(),a=g.useMemo(()=>t.reduce((o,i,l)=>t[o].data.length<i.data.length?l:o,0),[t]),n=g.useMemo(()=>t[a].data.length,[t,a]),r=g.useMemo(()=>{const o=t.filter(({isComparison:l})=>l!==!0),i=Ln(o.length,e);return t.forEach(({color:l,isComparison:s},u)=>{let c;s?c=e.seriesColors.comparison:l!=null&&(c=l),c&&i.splice(u,0,c)}),i.slice(0,t.length)},[t,e]);return{longestSeriesCount:n,seriesColors:r,longestSeriesIndex:a}}function Mr({data:t,isSimple:e,isStacked:a,labelFormatter:n}){const{characterWidths:r}=G(),o=g.useMemo(()=>t.reduce((f,h)=>{const m=h.data.map(({value:p})=>p).filter(p=>p!==null);return f.concat(...m)},[]),[t]),i=g.useMemo(()=>Math.min(0,...o),[o]),l=g.useMemo(()=>Math.max(0,...o),[o]);if(Bt(i)||Bt(l))throw new Error("Data must be finite");const s=g.useMemo(()=>{if(!a)return{positive:0,negative:0};const f=i===0?0:it(`${n(i)}`,r)+J,h=l===0?0:it(`${n(l)}`,r)+J;return{negative:f,positive:h}},[n,e,a,l,i,r]),u=g.useMemo(()=>!o.some(f=>f!==null&&f!==0),[o]),c=g.useMemo(()=>u?!1:!o.some(f=>f!==null&&f>0),[u,o]);return{allNumbers:o,areAllNegative:c,longestLabel:s}}function Sr(t){const e=[];return t.forEach(({data:a})=>{a.forEach(({value:n},r)=>{n!=null&&(e[r]?e[r].push(n):e[r]=[n])})}),e}function $r({data:t,isStacked:e}){const{stackedValues:a,stackedMin:n,stackedMax:r}=g.useMemo(()=>{if(!e||t.length===0)return{stackedMin:0,stackedMax:0,stackedValues:[]};const{stackedValues:o,formattedStackedValues:i}=en(t),{min:l,max:s}=Ie({stackedValues:o,data:t,integersOnly:!1});return{stackedMin:l,stackedMax:s,stackedValues:i}},[e,t]);return{stackedValues:a,stackedMin:n,stackedMax:r}}function Cr({maxWidth:t,allNumbers:e,labelFormatter:a,isStacked:n,stackedMin:r,stackedMax:o}){const i=g.useMemo(()=>{const f=!e.some(m=>m!=null&&m!==0),h=[0,...e];return f&&h.push(1),Jt().range([0,t]).domain(Pn(h,m=>m)).nice()},[t,e]),l=g.useMemo(()=>i.ticks(),[i]),s=g.useMemo(()=>n?Jt().range([0,t]).domain([r,o]).nice():null,[n,t,r,o]),u=g.useMemo(()=>!n||!s?[]:s.ticks(),[n,s]),c=n?u:l;return{ticks:c,xScale:n?s:i,ticksFormatted:c.map(f=>`${a(f)}`)}}function _r({allNumbers:t,isStacked:e,labelFormatter:a,maxWidth:n,stackedMax:r=0,stackedMin:o=0,longestLabel:i}){let l=n,s=0;const u=i.positive+i.negative;l-=u,s+=u/2;const{xScale:c,ticks:f,ticksFormatted:h}=Cr({maxWidth:l,allNumbers:t,labelFormatter:a,isStacked:e,stackedMin:o,stackedMax:r});return{xScale:c,ticks:f,ticksFormatted:h,drawableWidth:l,chartXPosition:s}}const jr=6;function Tr({chartDimensions:t,isSimple:e,isStacked:a,seriesLength:n,singleBarCount:r,xAxisHeight:o}){return g.useMemo(()=>{const i=e?0:Te,l=t.height+ee,s=e?l:t.height,u=e?0:o+i,c=s-u,f=c/n,h=f-K-(r-1)*gt-ee;return{barHeight:V({amount:h/(a?1:r),min:jr}),chartHeight:c,groupBarsAreaHeight:h,groupHeight:f}},[t,e,a,n,r,o])}function Br({chartXPosition:t,groupHeight:e,series:a}){const{shouldAnimate:n,id:r}=G(),o=g.useMemo(()=>a[0].data.map(({key:c},f)=>({key:`${c}`,index:f})),[a]),i=c=>`translate(${t}px,${e*c}px)`,l=50,s=i(a.length+1);return{transitions:Hn(o,{keys:c=>c.key===""?`${r}-${c.index}`:c.key,initial:({index:c})=>({opacity:1,transform:i(c)}),from:({index:c})=>({opacity:0,transform:n?s:i(c)}),leave:{opacity:0,transform:s},update:({index:c})=>({opacity:1,transform:i(c)}),expires:!0,config:wn,trail:n?l:0,immediate:!n})}}const Er=({chartHeight:t,ticks:e,xScale:a,stroke:n})=>d.jsx("g",{transform:`translate(0, ${K})`,"aria-hidden":"true",children:e.map((r,o)=>r===0?null:d.jsx("line",{y1:0,y2:t-K,stroke:n,transform:`translate(${a(r)},0)`},o))});function kr({allowLineWrap:t,chartX:e,chartY:a,labels:n,labelWidth:r,onHeightChange:o,ticks:i,xScale:l}){const{lines:s}=Mn({allowLineWrap:t,labels:n,onHeightChange:o,targetWidth:r});return d.jsx(g.Fragment,{children:s.map((u,c)=>{var f;const h=(f=l(i[c]))!==null&&f!==void 0?f:0;return d.jsx("g",{transform:`translate(${e+h},${a})`,children:d.jsx(Sn,{line:u,index:c})},c)})})}var Ir={Group:"_Group_kzepq_144"},Or={Label:"_Label_1vvi2_144"};const de=15;function Hr({areAllNegative:t,containerWidth:e,label:a,zeroPosition:n}){const r=Wt(),o=zt(a,r),i=Y(),l=t?o+de:e-n;return d.jsx("foreignObject",{height:K,width:"100%",x:n+(t?o*-1:0),"aria-hidden":"true",children:d.jsx("div",{className:Or.Label,style:{background:i.chartContainer.backgroundColor,fontSize:`${r}px`,color:i.yAxis.labelColor,maxWidth:l,height:K,width:o+de},children:a})})}function wr({stackedValues:t,groupIndex:e}){return g.useMemo(()=>{const a={positive:[],negative:[]};return t[e].forEach(([n,r],o)=>{r>0&&Et({gaps:a,index:o,direction:"positive",firstGapValue:0}),n<0&&Et({gaps:a,index:o,direction:"negative",firstGapValue:yt})}),a},[e,t])}function Nr({start:t,end:e,seriesIndex:a,gaps:n,xScale:r}){return t<0?r(t)-kt({gaps:n,direction:"negative",seriesIndex:a}):e>0?r(t)+kt({gaps:n,direction:"positive",seriesIndex:a}):r(t)}function Fr({animationDelay:t,activeBarIndex:e,ariaLabel:a,borderRadius:n,color:r,height:o,seriesIndex:i,setActiveBarIndex:l,width:s,x:u,zeroPosition:c}){const f=Pt({animationDelay:t}),{transform:h}=It({from:{transform:"scale(0, 1)"},to:{transform:"scale(1, 1)"},...f}),m=Rt({height:o,width:s,borderRadius:n});return d.jsxs(vt.g,{style:{transform:h,transformOrigin:`${c}px 0px`},children:[d.jsx("path",{d:m,fill:`url(#${r})`,height:o,style:{outline:"none",transformOrigin:`${u}px 0px`,...bt({activeIndex:e,index:i})},width:s,transform:`translate(${u},0)`,"aria-hidden":"true"}),d.jsx("rect",{fill:"transparent",height:o,width:s+yt,x:u,...nt({type:X,index:i}),"aria-label":a,role:"img",tabIndex:-1,onMouseOver:()=>l(i),onMouseLeave:()=>l(-1)})]})}function Ge({animationDelay:t,children:e,x:a}){const n=Pt({animationDelay:t}),r=It({from:{transform:"translateX(0px)",opacity:0},to:{opacity:1,transform:`translateX(${a}px)`},...n});return d.jsx(vt.g,{style:{opacity:r.opacity,transform:r.transform},children:e})}function Re({barHeight:t,color:e,fontSize:a,label:n,labelWidth:r,y:o}){const i=t/2;return d.jsx("text",{height:Fn,width:r,"aria-hidden":"true",y:o+i,fontSize:`${a}px`,fontFamily:Nn,fill:e,dominantBaseline:"central",children:n})}function Dr(t,e,a){return`${t}-series-${e}-${a}`}function Gr({lastIndexes:t,seriesIndex:e}){const[a,n]=t;return a===e?st.Right:n===e?st.Left:st.None}function Rr({activeGroupIndex:t,animationDelay:e,barHeight:a,dataKeys:n,groupIndex:r,id:o,name:i,stackedValues:l,xScale:s,areAllNegative:u,isSimple:c,labelFormatter:f}){const h=Y(),{theme:m}=G(),[p,b]=g.useState(-1),v=h.groupLabel.hide,L=Wt();lt({type:X,onIndexChange:({detail:T})=>{(t===-1||t===r)&&b(T.index)}});const A=g.useMemo(()=>{let T=-1,_=-1;return l[r].forEach(([B,k],I)=>{B<0&&(_=I),k>0&&(T=I)}),[T,_]},[r,l]),x=wr({stackedValues:l,groupIndex:r}),y=l[r].reduce((T,_)=>_.data?Object.values(_.data).reduce((B,k)=>B+k,0):0,0),M=y&&y<0,j=f(y),S=zt(`${j}`,L),E=l[r].reduce((T,_)=>{const B=_[0];return B<T?B:T},Number.MAX_SAFE_INTEGER),$=l[r].reduce((T,_)=>{const B=_[1];return B>T?B:T},-Number.MAX_SAFE_INTEGER),C=M?s(E)-S-J:s($)+J;return d.jsxs("g",{style:{transform:`translate(0, ${K}px`},"aria-hidden":"true",children:[l[r].map((T,_)=>{var B;const[k,I]=T,w=Dr(o,r,_),O=Math.abs(s(I)-s(k)),F=Gr({lastIndexes:A,seriesIndex:_}),R=Nr({start:k,end:I,seriesIndex:_,gaps:x,xScale:s}),P=`${(B=n[_])!==null&&B!==void 0?B:""} ${I}`,H=l[r].every(([D,rt])=>D+rt===0);return d.jsx(g.Fragment,{children:H?d.jsx($e,{x:u?R-$n:R,y:a/2,direction:"horizontal"}):d.jsx(Fr,{animationDelay:e,activeBarIndex:p,ariaLabel:P,borderRadius:F,color:Ot(m,_,o),height:a,seriesIndex:_,setActiveBarIndex:b,width:O,x:R,zeroPosition:s(0)},`${i}${w}`)},`stackedBar ${w}`)}),!c&&!v&&d.jsx(Ge,{animationDelay:e,x:C,children:d.jsx(Re,{barHeight:a,color:h.xAxis.labelColor,fontSize:L,label:j,labelWidth:S,y:0})})]})}function Pr(t){if(t!=null){var e;const{totalWidth:a}=nn((e=t.value)!==null&&e!==void 0?e:"",Dn,rn);return{trendIndicatorProps:t,trendIndicatorWidth:a}}return{trendIndicatorProps:void 0,trendIndicatorWidth:0}}var zr={Bar:"_Bar_h2fc5_144"};const Wr=150;function Vr({activeGroupIndex:t,animationDelay:e=0,barHeight:a,data:n,groupIndex:r,id:o,isSimple:i,labelFormatter:l,name:s,xScale:u,zeroPosition:c,containerWidth:f,areAllNegative:h}){const m=Y(),{theme:p}=G(),b=Wt(),[v,L]=g.useState(-1);return lt({type:X,onIndexChange:({detail:A})=>{(t===-1||t===r)&&L(A.index)}}),d.jsx("g",{transform:`translate(${c},${K})`,"aria-hidden":"true",children:n.map((A,x)=>{var y,M;if(n[x].data[r]==null)return;const j=e+Wr*x,{value:S}=n[x].data[r];if(S==null)return null;const E=S&&S<0,$=l(S),C=`${n[x]?n[x].name:""} ${S}`,{trendIndicatorProps:T,trendIndicatorWidth:_}=Pr((y=n[x])===null||y===void 0||(M=y.metadata)===null||M===void 0?void 0:M.trends[r]),B=zt(`${$}`,b);function k(){const N=Math.abs(u(S??0)-u(0)),P=T==null?J:J*2,H=i?B+P+_:0,D=V({amount:N,min:1});return h||E?{labelX:-(D+H),barWidth:D}:{labelX:D+J,barWidth:D}}const{labelX:I,barWidth:w}=k(),O=a*x+gt*x,{clampedSize:F}=De({barSize:w,zeroPosition:u(0),max:f,position:"horizontal"}),R=(a-on)/2;return d.jsxs(g.Fragment,{children:[d.jsx(Cn,{animationDelay:j,areAllNegative:h,color:`url(#${Ot(p,x,o)})`,height:a,index:r,isActive:v===-1||v===x,transform:E?"scaleX(-1)":"",width:w,x:0,y:O}),i&&d.jsxs(Ge,{animationDelay:j,x:I,children:[d.jsx(Re,{barHeight:a,color:m.xAxis.labelColor,fontSize:b,label:$,labelWidth:B,y:O}),T!=null&&d.jsx("g",{transform:`translate(${B+J}, ${O+R})`,children:d.jsx(an,{...T})})]}),d.jsx("rect",{className:zr.Bar,x:0,y:O-gt/2,width:F,height:a+gt,fill:"transparent",style:{transform:E?"scaleX(-1)":""},...nt({type:X,index:x}),tabIndex:-1,role:"img","aria-label":C})]},`series-${x}-${o}-${s}`)})})}function Xr({areAllNegative:t,ariaLabel:e,barHeight:a,containerWidth:n,data:r,groupHeight:o,id:i,index:l,isSimple:s,isStacked:u,name:c,stackedValues:f,xAxisOptions:h,yAxisOptions:m,xScale:p,zeroPosition:b}){const[v,L]=g.useState(-1);lt({type:xt,onIndexChange:({detail:M})=>{L(M.index)}});const A=g.useMemo(()=>r.map(({name:M})=>M??""),[r]),x=g.useMemo(()=>{const M=a+gt;return u?K+M:K+M*r.length},[a,r.length,u]),y=l*(je/r[0].data.length);return d.jsxs("g",{style:bt({activeIndex:v,index:l}),...nt({type:xt,index:l}),"data-type":Q.BarGroup,"data-index":l,"aria-hidden":"false","aria-label":e,role:"list",className:Ir.Group,children:[d.jsx("rect",{fill:"transparent",height:o,width:n,y:-(o-x)/2}),d.jsx(Hr,{areAllNegative:t,containerWidth:n,label:m.labelFormatter(c),zeroPosition:b}),u?d.jsx(Rr,{activeGroupIndex:v,animationDelay:y,ariaLabel:e,barHeight:a,dataKeys:A,groupIndex:l,id:i,name:c,stackedValues:f,xScale:p,areAllNegative:t,labelFormatter:h.labelFormatter,isSimple:s}):d.jsx(Vr,{animationDelay:y,activeGroupIndex:v,barHeight:a,data:r,groupIndex:l,id:i,isSimple:s,labelFormatter:h.labelFormatter,name:c,xScale:p,zeroPosition:b,containerWidth:n,areAllNegative:t})]})}function Yr({annotations:t,drawableWidth:e,onHeightChange:a,xScale:n}){const{characterWidths:r}=G(),o=g.useMemo(()=>t.map(s=>it(s.label,r)),[t,r]),{positions:i}=g.useMemo(()=>{let s=t.map((u,c)=>{const f=n(Number(u.startKey)),h=o[c],m=V({amount:h+Tt*2,min:h+Tt*2,max:e});let p=V({amount:f-m/2,min:ln});const b=p+m;return b>e&&(p-=b-e),{index:c,line:{x:f,y:0},row:1,width:m,x:p,y:0}});return s=s.sort((u,c)=>u.x-c.x),sn({positions:s,totalRows:1}),s.forEach(u=>{const c=u.row-1;u.y=c*jt+c*Kt}),{positions:s}},[t,o,n,e]),l=g.useMemo(()=>i.reduce((s,{y:u})=>u>s?u:s,0)+jt+Kt,[i]);return g.useEffect(()=>{a(l)},[a,l]),i}function Ur({annotationsLookupTable:t,drawableHeight:e,drawableWidth:a,onHeightChange:n,renderAnnotationContent:r,xScale:o}){const[i,l]=g.useState(-1),[s,u]=g.useState(null),c=g.useRef(0),{annotations:f}=g.useMemo(()=>({annotations:Object.keys(t).map(A=>{const x=t[A];return!cn(Number(x.startKey),o.domain())||x==null||x.axis==null||x.axis==="y"?null:x}).filter(Boolean)}),[t,o]),h=Yr({annotations:f,drawableWidth:a,onHeightChange:n,xScale:o}),m=()=>{l(-1)};function p(L){l(L)}const b=()=>{c.current=window.setTimeout(()=>{l(-1)},Me)};function v(){clearTimeout(c.current)}return be({ref:s,onBlur:m,checkFn:L=>{const A=L==null?void 0:L.parentElement;return(A==null?void 0:A.dataset.isAnnotationContent)!=="true"}}),d.jsx("g",{ref:u,tabIndex:-1,children:h.map(L=>{const{line:A,y:x,index:y}=L,M=f[y],j=M.content!=null,S=y===i&&j,E=y+1,$=`${M.startKey}`;return d.jsxs(g.Fragment,{children:[d.jsx(ye,{size:e,x:A.x,y:x+jt}),d.jsx(ve,{ariaLabel:$,index:y,label:M.label,onMouseEnter:p,onMouseLeave:b,position:L,tabIndex:E}),S&&d.jsx(Ae,{annotation:M,drawableWidth:a,index:y,onMouseEnter:v,onMouseLeave:b,parentRef:s,position:L,renderAnnotationContent:r,tabIndex:E,x:A.x,y:x+Le})]},`annotation${y}${M.startKey}`)})})}const Kr=Vt/2,Zr=5;function qr({annotations:t,dataIndexes:e,groupHeight:a,drawableWidth:n,zeroPosition:r}){const{characterWidths:o}=G(),i=g.useMemo(()=>t.map(s=>it(s.label,o)),[t,o]),{positions:l}=g.useMemo(()=>({positions:t.map((u,c)=>{const f=e[u.startKey]*a+Kr,h=i[c],m=it(`${u.startKey}`,o),p=V({amount:h+Tt*2,min:h+Tt*2,max:n}),b=V({amount:f-jt/2,min:0});return{index:c,line:{x:r+m+Zr,y:f},row:1,width:p,x:n-p,y:b}})}),[t,e,a,i,n,o,r]);return{positions:l}}function Jr({annotationsLookupTable:t,drawableWidth:e,groupHeight:a,labels:n,renderAnnotationContent:r,zeroPosition:o}){const[i,l]=g.useState(-1),[s,u]=g.useState(null),c=g.useRef(0),{annotations:f,dataIndexes:h}=g.useMemo(()=>{const A={};return{annotations:Object.keys(t).map(y=>{const M=t[y];return!n.includes(y)||M==null||M.axis==="x"?null:(A[y]=n.indexOf(y),M)}).filter(Boolean),dataIndexes:A}},[t,n]),{positions:m}=qr({annotations:f,dataIndexes:h,drawableWidth:e,groupHeight:a,zeroPosition:o}),p=()=>{l(-1)};function b(A){l(A)}const v=()=>{c.current=window.setTimeout(()=>{l(-1)},Me)};function L(){clearTimeout(c.current)}return be({ref:s,onBlur:p,checkFn:A=>{const x=A==null?void 0:A.parentElement;return(x==null?void 0:x.dataset.isAnnotationContent)!=="true"}}),d.jsx("g",{ref:u,tabIndex:-1,children:d.jsx("g",{transform:"translate(0, 0)",children:m.map(A=>{const x=A.index,y=f[x],{line:M,x:j,y:S}=A,E=y.content!=null,$=x===i&&E,C=x+1,T=`${y.startKey}`;return d.jsxs(g.Fragment,{children:[d.jsx(ye,{direction:"horizontal",hasCaret:!1,size:e-(e-j),x:M.x,y:M.y}),d.jsx(ve,{ariaLabel:T,index:x,label:y.label,onMouseEnter:b,onMouseLeave:v,position:A,tabIndex:C}),$&&d.jsx(Ae,{annotation:y,drawableWidth:e,index:x,onMouseEnter:L,onMouseLeave:v,parentRef:s,position:A,renderAnnotationContent:r,tabIndex:C,x:e-(e-j),y:S+Le})]},`annotation${x}${y.startKey}`)})})})}function Qr({annotationsLookupTable:t,data:e,legendPosition:a,renderAnnotationContent:n,renderHiddenLegendLabel:r,renderLegendContent:o,renderTooltipContent:i,seriesNameFormatter:l,showLegend:s,type:u,xAxisOptions:c,yAxisOptions:f}){const{isTouchDevice:h}=G();he({enabled:e.length>1&&!h});const m=Y(),p=g.useMemo(()=>pt("HorizontalBarChart"),[]),b=u==="stacked",[v,L]=g.useState(null),[A,x]=g.useState(Vt),[y,M]=g.useState(0),{longestSeriesCount:j,seriesColors:S,longestSeriesIndex:E}=Lr(e),{legend:$,setLegendDimensions:C,height:T,width:_}=fe({data:[{shape:"Bar",series:e}],showLegend:s,colors:S,seriesNameFormatter:l}),{allNumbers:B,longestLabel:k,areAllNegative:I}=Mr({data:e,isSimple:!1,isStacked:b,labelFormatter:c.labelFormatter}),w=g.useMemo(()=>Sr(e).map($t=>{const et=$t.map(U=>U).filter(Boolean);return et.length===0?0:I?Math.min(...et):Math.max(...et)}),[e,I]),{stackedValues:O,stackedMin:F,stackedMax:R}=$r({isStacked:b,data:e}),N=Dt.Top+y,P=T-A-N,{xScale:H,ticks:D,ticksFormatted:rt,drawableWidth:tt,chartXPosition:z}=_r({allNumbers:B,stackedMin:F,stackedMax:R,isStacked:b,maxWidth:_-k.negative-k.positive,labelFormatter:c.labelFormatter,longestLabel:k}),{barHeight:ct,chartHeight:Z,groupBarsAreaHeight:q,groupHeight:at}=Tr({chartDimensions:{width:tt,height:P},isSimple:c.hide,isStacked:b,seriesLength:j,singleBarCount:e.length,xAxisHeight:A}),At=N+Z+_e,Lt=Oe({data:e,seriesColors:S,renderTooltipContent:i,seriesNameFormatter:l}),{transitions:Ht}=Br({series:e,groupHeight:at,chartXPosition:z}),ut=k.negative+H(0),Mt=tt/D.length,W={width:_,height:T,x:z,y:0},{hasXAxisAnnotations:wt,hasYAxisAnnotations:dt}=ge(t),{unformattedLabels:ht}=me({data:e,labelFormatter:f.labelFormatter}),ft=tr(e,{xAxisLabelFormatter:c.labelFormatter,yAxisLabelFormatter:f.labelFormatter});return d.jsxs(_t.Div,{height:T,width:_,children:[d.jsxs(_t.Svg,{setRef:L,width:_,height:T,children:[c.hide===!0?null:d.jsxs("g",{transform:`translate(${z}, ${N})`,children:[d.jsx(Er,{chartHeight:Z+Te,stroke:m.grid.color,ticks:D,xScale:H}),d.jsx(kr,{allowLineWrap:c.allowLineWrap,chartX:-Mt/2,chartY:P,labels:rt,labelWidth:Mt,onHeightChange:x,ticks:D,xScale:H})]}),d.jsx(He,{direction:"horizontal",gradientUnits:b?"objectBoundingBox":"userSpaceOnUse",id:p,seriesColors:S,size:b?"100%":`${_}px`}),d.jsx("g",{transform:`translate(0, ${N})`,children:Ht((St,ot,$t,et)=>{var U;const{opacity:mt,transform:Nt}=St,Yt=(U=ot.key)!==null&&U!==void 0?U:"",Pe=ft({seriesIndex:ot.index,key:ot.key});return d.jsx(vt.g,{style:{opacity:mt,transform:Nt},children:d.jsx(Xr,{areAllNegative:I,ariaLabel:Pe,barHeight:ct,containerWidth:_,data:e,groupHeight:at,id:p,index:et,isSimple:!1,isStacked:b,name:Yt,stackedValues:O,xAxisOptions:c,xScale:H,yAxisOptions:f,zeroPosition:ut})},`group-${Yt}`)})}),wt&&d.jsx("g",{transform:`translate(${z}, 0)`,children:d.jsx(Ur,{annotationsLookupTable:t,drawableHeight:At,drawableWidth:tt,onHeightChange:M,renderAnnotationContent:n,xScale:H})}),dt&&d.jsx("g",{transform:`translate(${z}, ${N})`,children:d.jsx(Jr,{annotationsLookupTable:t,drawableWidth:tt,groupHeight:at,labels:ht,renderAnnotationContent:n,zeroPosition:ut})})]}),w.length!==0&&d.jsx(pe,{bandwidth:q,chartBounds:W,chartType:Xt.HorizontalBar,data:e,focusElementDataType:Q.BarGroup,getMarkup:Lt,margin:Dt,parentElement:v,longestSeriesIndex:E,xScale:H,type:u}),s&&d.jsx(xe,{colorVisionType:X,data:$,enableHideOverflow:!0,onDimensionChange:C,position:a,renderLegendContent:o,renderHiddenLegendLabel:r})]})}function ta({annotationsLookupTable:t={},data:e,legendPosition:a,renderAnnotationContent:n,renderHiddenLegendLabel:r,renderLegendContent:o,renderTooltipContent:i,seriesNameFormatter:l,showLegend:s,type:u="default",xAxisOptions:c,yAxisOptions:f}){return d.jsx(Qr,{annotationsLookupTable:t,data:e,renderTooltipContent:i,seriesNameFormatter:l,showLegend:s,type:u,legendPosition:a,xAxisOptions:c,yAxisOptions:f,renderAnnotationContent:n,renderLegendContent:o,renderHiddenLegendLabel:r})}function sa(t){var e,a;const{defaultTheme:n}=_n(),{annotations:r=[],data:o,state:i,errorText:l,direction:s="vertical",emptyStateText:u,id:c,isAnimated:f,tooltipOptions:h,legendPosition:m,renderLegendContent:p,showLegend:b=!0,maxSeries:v,skipLinkText:L,theme:A=n,type:x="default",xAxisOptions:y,yAxisOptions:M,onError:j,renderAnnotationContent:S,renderHiddenLegendLabel:E,renderBucketLegendLabel:$,seriesNameFormatter:C=H=>`${H}`,scrollContainer:T}={...Gn,...t},_=jn(o,ea((e=o[0])===null||e===void 0||(a=e.data[0])===null||a===void 0?void 0:a.key)),B=v?er({dataSeries:_,maxSeries:v,renderBucketLegendLabel:$}):_,k=g.useRef(pt("BarChart")),I=B.length===0,w=L==null||L.length===0||I,O=un(y),F=dn(M),R=hn(r,"startKey"),N=fn({tooltipOptions:h,theme:A,data:B}),P=s==="vertical"?d.jsx(Ar,{annotationsLookupTable:R,data:B,emptyStateText:u,legendPosition:m,renderAnnotationContent:S,renderLegendContent:p,renderTooltipContent:N,seriesNameFormatter:C,showLegend:b,type:x,xAxisOptions:O,yAxisOptions:F,renderHiddenLegendLabel:E}):d.jsx(ta,{annotationsLookupTable:R,data:B,legendPosition:m,renderHiddenLegendLabel:E,renderAnnotationContent:S,renderLegendContent:p,renderTooltipContent:N,seriesNameFormatter:C,showLegend:b,type:x,xAxisOptions:O,yAxisOptions:F});return d.jsxs(g.Fragment,{children:[w?null:d.jsx(Zt,{anchorId:k.current,children:L}),d.jsx(Tn,{id:c,isAnimated:f,data:B,onError:j,theme:A,type:Xt.Bar,scrollContainer:T,children:i!==Rn.Success?d.jsx(Bn,{state:i,errorText:l,theme:A}):P}),w?null:d.jsx(Zt.Anchor,{id:k.current})]})}function ea(t){return t==null?!1:t.toString().split(" · ").some(e=>!isNaN(Date.parse(e)))}export{sa as B};
