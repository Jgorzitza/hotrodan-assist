import{r as g,j as o}from"./index-DZoorY08.js";import{u as Ge,a as _e,b as Be,c as ze,d as Ue,e as qe,f as Ke,g as fe,h as Ze,i as Je,C as Qe,X as et,H as tt,Y as nt,j as st,k as rt,A as at,T as it,L as ot,l as lt,m as dt,n as ut,S as xe,o as ct}from"./SkipLink-CU7_6Q_C.js";import{p as ye,q as se,r as Ie,u as B,l as ht,s as mt,t as pe,v as gt,a as z,x as ft,L as xt,y as yt,j as pt,k as ae,z as Te,Y as Lt,A as At,c as St,f as vt,b as Ct,C as bt,d as _t}from"./ChartContainer-DSIix7Zm.js";import{S as It,E as Le,d as Ae,H as Tt,e as Se,f as Ht,g as He,u as Et,B as Ot,c as re,h as Ee,i as jt,j as wt,k as Pt,l as $t,I as Oe,D as Dt,C as Mt}from"./PolarisVizProvider-BMFajI3Y.js";import{l as kt,c as Rt,L as Nt}from"./LineSeries-CNDg3zjh.js";const Wt=(e,n)=>{if(e===n)return e;const t=ye(e),i=ye(n);if(!t||!i){var r,a;return(r=(a=t==null?void 0:t.toString())!==null&&a!==void 0?a:i==null?void 0:i.toString())!==null&&r!==void 0?r:""}const{r:d,g:l,b:u}=t.rgb(),{r:h,g:f,b:p}=i.rgb();return`rgb(${Math.round((d+h)/2)},${Math.round((l+f)/2)},${Math.round((u+p)/2)})`};function Ft(e){return e<=4?.25:e<=7?.1:0}function Yt(e,n){const t=Ft(e.length);return e.map((r,a)=>{var d,l,u;const h=n[a],f=se(h)?Wt(h[0].color,h[h.length-1].color):h;return{...r,areaColor:r.isComparison?void 0:Ie(f,t),color:r.isComparison?n[a]:(d=r.color)!==null&&d!==void 0?d:n[a],strokeDasharray:Vt(r),width:(l=r.styleOverride)===null||l===void 0||(u=l.line)===null||u===void 0?void 0:u.width}})}function Vt(e){var n,t;return((n=e.styleOverride)===null||n===void 0||(t=n.line)===null||t===void 0?void 0:t.strokeDasharray)!=null?e.styleOverride.line.strokeDasharray:e.isComparison?It:"none"}function Xt({data:e,hiddenIndexes:n=[],indexForLabels:t,renderTooltipContent:i,seriesNameFormatter:r}){const{theme:a}=B();return g.useCallback(d=>{if(d===-1)return null;const l=[{shape:"Line",data:[]}],u=e[t].data[d]?e[t].data[d].key:"";return e.forEach(({name:h,data:f,color:p,isComparison:L},m)=>{if(!f[d])return;const{value:s,trend:x}=f[d];l[0].data.push({key:`${r(h??"")}`,value:s,color:p,isComparison:L,isHidden:n.includes(m),trend:x})}),i({data:l,activeIndex:d,title:`${u}`,dataSeries:e,theme:a})},[e,i,a,n,t,r])}function Gt(e){if(e.length===0)return{minY:Ae,maxY:Le};let n=Number.MAX_SAFE_INTEGER,t=-Number.MAX_SAFE_INTEGER;return e.forEach(({data:i})=>{i.forEach(({value:r})=>{r!=null&&(n=Math.min(n,r),t=Math.max(t,r))})}),n===Number.MAX_SAFE_INTEGER||t===-Number.MAX_SAFE_INTEGER?{minY:Math.min(n,Ae),maxY:Math.max(t,Le)}:{minY:n,maxY:t}}function Bt(e){const n=g.useMemo(()=>e.reduce((i,r,a)=>e[i].data.length<r.data.length?a:i,0),[e]);return{longestSeriesLength:e[n]?e[n].data.length-1:0,longestSeriesIndex:n}}function zt({drawableWidth:e,longestSeriesLength:n}){return{xScale:g.useMemo(()=>ht().range([0,e]).domain([0,n]),[e,n])}}const Ut=90;function qt({data:e,drawableWidth:n,hideXAxis:t,labels:i,longestSeriesLength:r}){const a=gt(),d=g.useMemo(()=>e.reduce((x,c)=>Math.max(x,c.data.length),0),[e]),l=g.useMemo(()=>{const x=i.reduce((c,v)=>{const y=mt(v,a);return y>c?y:c},Tt)+Se;return pe({amount:x,min:0,max:Ut})},[i,a]),u=Math.floor(n/l),h=Math.ceil(i.length/u),f=Ge({dataLength:d,skipEveryNthLabel:h}),p=f.length>0?f.length:i.length,L=g.useMemo(()=>p===0||t?0:pe({amount:Math.min(n/p-Se,l),min:0,max:n}),[n,p,t,l]),m=n,{xScale:s}=zt({drawableWidth:m,longestSeriesLength:r});return{labels:i,xScale:s,xAxisDetails:{labelWidth:L,reducedLabelIndexes:f}}}var ne={VisuallyHidden:"_VisuallyHidden_at2zh_144"};const Kt=g.memo(function({data:n,formatYAxisLabel:t,xAxisLabels:i}){return o.jsxs(g.Fragment,{children:[o.jsxs("g",{role:"row",children:[o.jsx("text",{role:"rowheader"}),i.map((r,a)=>o.jsx("text",{className:ne.VisuallyHidden,role:"columnheader",children:r},`a11y-${r}-${a}`))]}),n.map(({name:r,data:a},d)=>o.jsxs("g",{role:"row",children:[o.jsx("text",{role:"rowheader",className:ne.VisuallyHidden,children:r}),a.map(({value:l,key:u},h)=>o.jsx("text",{role:"cell",className:ne.VisuallyHidden,children:l==null?"":t(l)},`cell-${r}-${l}-${u}-${h}`))]},`row-${r}-${d}`))]})});function ve(e){return e==null?0:e.getTotalLength()}function Zt(e,n){return e==null||n==null?{x:0,y:0}:e.getPointAtLength(n)}const Jt={friction:5,clamp:!0,mass:1,tension:190};function Qt({activeIndex:e,lineGenerator:n,data:t}){const{shouldAnimate:i}=B(),r=e??0,a=!i||t.length===0||e==null,d=g.useCallback(m=>{const s=document.createElementNS("http://www.w3.org/2000/svg","path");return s.setAttribute("d",n(m)||""),s},[n]),l=g.useMemo(()=>a?null:t.map(({data:m})=>{const s=d(m);return{element:s,length:ve(s)}}),[a,d,t]),u=g.useMemo(()=>a?null:t.map(({data:m})=>{const s=d(m.slice(0,r+1));return{element:s,length:ve(s)}}),[a,d,r,t]),h=g.useCallback((m,s)=>s===0?0:m/s*100,[]),f=g.useMemo(()=>a||!l||!u?null:t.map((m,s)=>{const x=l[s].length,c=u[s];return h(c.length,x)}),[a,l,u,t,h]),p=g.useCallback((m,s,x)=>{if(s==null||x==null||x===0)return{x:0,y:0};const c=m*x/100;return Zt(s,c)},[]),L=Ht(f==null?0:f.length,f==null?[]:f.map(m=>({percentage:m,config:Jt,default:{immediate:a}})));return{animatedCoordinates:a||l==null?null:L.map(({percentage:m},s)=>m.to(x=>{const c=l[s].length,v=l[s].element;return p(x,v,c)}))}}var en={Crosshair:"_Crosshair_1t1jt_1"};function tn({x:e,height:n,opacity:t=1,theme:i,id:r}){const a=z(i);return o.jsx(He.rect,{className:en.Crosshair,x:e,width:a.crossHair.width,height:n,stroke:"none",id:r,style:{opacity:t,fill:a.crossHair.color}})}var Ce={Point:"_Point_gkfp3_144",VisuallyHidden:"_VisuallyHidden_gkfp3_152"};const nn=5,be=g.memo(function({dataType:n,cx:t,cy:i,active:r,color:a,onFocus:d,index:l,ariaLabelledby:u,tabIndex:h=-1,isAnimated:f,ariaHidden:p=!1,visuallyHidden:L=!1}){const m=z(),s=()=>{if(d!=null)return d({index:l,x:typeof t=="number"?t:t.get(),y:typeof i=="number"?i:i.get()})},x=r?nn:0,{animatedRadius:c}=Et({animatedRadius:x,from:{animatedRadius:0},config:{duration:Ot},default:{immediate:!f}});return o.jsx(He.circle,{"data-type":n,"data-index":l,role:u==null?"":"image","aria-labelledby":u,tabIndex:h,cx:t,cy:i,r:f?c:x,fill:a,stroke:m.line.pointStroke,strokeWidth:2,onFocus:s,className:ft(Ce.Point,L?Ce.VisuallyHidden:null),"aria-hidden":p})});function sn({activeIndex:e,animatedCoordinates:n,data:t,getXPosition:i,gradientId:r,hiddenIndexes:a=[],longestSeriesIndex:d,tooltipId:l,xScale:u,yScale:h}){const{shouldAnimate:f,comparisonIndexes:p}=B(),[L,m]=g.useState(-1);return _e({type:re,onIndexChange:({detail:s})=>{m(s.index)}}),o.jsx(g.Fragment,{children:t.map((s,x)=>{var c,v,y,b;if((s==null||(c=s.metadata)===null||c===void 0?void 0:c.isVisuallyHidden)===!0)return null;const A=(v=(y=s.metadata)===null||y===void 0?void 0:y.relatedIndex)!==null&&v!==void 0?v:x;if(a.includes(A)||p.includes(A))return null;const{data:j,name:w,color:C}=s,P=A===d,$=`${r}-point-${A}`,I=n==null||n[A]==null?0:n[A].to(H=>H.y),T=e==null?!1:((b=j[e??-1])===null||b===void 0?void 0:b.value)!=null,k=L!==-1&&L!==A,R=!T||n==null||k,N=T&&e!=null,D=se(C)?`url(#${$})`:Ie(C);return o.jsxs(g.Fragment,{children:[se(C)?o.jsx("defs",{children:o.jsx(xt,{id:$,gradient:yt(C),gradientUnits:"userSpaceOnUse",y1:"100%",y2:"0%"})}):null,f?o.jsx(be,{color:D,cx:i({isCrosshair:!1}),cy:I,active:N,index:A,tabIndex:-1,isAnimated:f,visuallyHidden:R,ariaHidden:!0}):null,j.map(({value:H},M)=>H==null?null:o.jsx("g",{style:pt({activeIndex:L,index:A,fadedOpacity:0}),children:o.jsx(be,{dataType:Ee.Point,color:D,cx:u(M),cy:h(H),active:e===M,index:M,tabIndex:P?0:-1,ariaLabelledby:l,isAnimated:!1,ariaHidden:!1,visuallyHidden:f})},`${w}-${A}-${M}`))]},`${w}-${A}`)})})}function rn({activeIndex:e,data:n,drawableHeight:t,emptyState:i,hiddenIndexes:r=[],longestSeriesIndex:a,theme:d,tooltipId:l,xScale:u,yScale:h}){const f=z(d),{shouldAnimate:p,isPerformanceImpacted:L}=B(),m=g.useRef(ae("lineChartGradient")),s=g.useMemo(()=>{const v=kt().x((y,b)=>u==null?0:u(b)).y(({value:y})=>h(y??0));return f.line.hasSpline&&v.curve(Rt),v},[f.line.hasSpline,u,h]),{animatedCoordinates:x}=Qt({data:n,lineGenerator:s,activeIndex:e}),c=({isCrosshair:v}={isCrosshair:!1})=>{if(u==null)return 0;const y=v?f.crossHair.width/2:0;return n.some(A=>A.data.length!==1)&&x!=null&&x[a]!=null&&p?x[a].to(A=>A.x-y):u(e??0)-y};return o.jsxs(g.Fragment,{children:[i?null:o.jsx(tn,{height:t,id:`${l}-${Te}`,opacity:e==null?0:1,theme:d,x:c({isCrosshair:!0})}),L?null:o.jsx(sn,{activeIndex:i?null:e,animatedCoordinates:x,data:n,getXPosition:c,gradientId:m.current,hiddenIndexes:r,longestSeriesIndex:a,tooltipId:l,xScale:u,yScale:h})]})}function an({annotationsLookupTable:e,emptyStateText:n,data:t,legendPosition:i,renderAnnotationContent:r,renderLegendContent:a,renderTooltipContent:d,renderHiddenLegendLabel:l,seriesNameFormatter:u,showLegend:h=!0,hideLegendOverflow:f=!0,slots:p,theme:L=Pt,xAxisOptions:m,yAxisOptions:s}){var x;const c=z(L),{isPerformanceImpacted:v,containerBounds:y,isTouchDevice:b,comparisonIndexes:A,comparisonSeriesIndexes:j}=B(),[w,C]=g.useState(null),[P,$]=g.useState(-1);Be({enabled:t.length>1&&!b});const I=y.height<jt,T=m.hide||c.xAxis.hide||I,[k,R]=g.useState(T?0:wt),[N,D]=g.useState(0),{legend:H,setLegendDimensions:M,height:U,width:q}=ze({data:[{shape:"Line",series:t}],showLegend:h&&!I,seriesNameFormatter:u});_e({type:re,onIndexChange:({detail:S})=>$(S.index)});const{hiddenIndexes:Z}=Ue(),ie=qe(t),{formattedLabels:je,unformattedLabels:we}=Ke({data:[t[ie]],labelFormatter:m.labelFormatter}),J=g.useRef(ae("lineChart")),[Pe,$e]=g.useState(null),Q=t.length===0||t.every(S=>S.data.length===0),{minY:De,maxY:Me}=Gt(t),oe={formatYAxisLabel:s.labelFormatter,integersOnly:s.integersOnly,fixedWidth:s.fixedWidth,maxYOverride:s.maxYOverride,max:Me,min:De,ticksOverride:s.ticksOverride},{yAxisLabelWidth:ee}=fe({...oe,drawableHeight:U,verticalOverflow:c.grid.verticalOverflow}),{longestSeriesLength:le,longestSeriesIndex:de}=Bt(t),{drawableWidth:O,drawableHeight:W,chartXPosition:F,chartYPosition:Y,xAxisBounds:ue,yAxisBounds:ce}=Ze({annotationsHeight:N,height:U,width:q,xAxisHeight:k,yAxisWidth:ee}),{xAxisDetails:K,xScale:E,labels:he}=qt({data:t,drawableWidth:O,hideXAxis:T,labels:je,longestSeriesLength:le}),{ticks:te,yScale:V}=fe({...oe,drawableHeight:W,verticalOverflow:c.grid.verticalOverflow}),me=Y+W+At,ke=Xt({data:t,renderTooltipContent:d,indexForLabels:ie,hiddenIndexes:Z,seriesNameFormatter:u}),Re=g.useMemo(()=>t.reduce((S,_,X)=>{var G;const ge=((G=_.metadata)===null||G===void 0?void 0:G.isVisuallyHidden)===!0||A.includes(X);return{delays:[...S.delays,ge?0:S.delayIndex*100],delayIndex:ge?S.delayIndex:S.delayIndex+1}},{delays:[],delayIndex:0}).delays,[t,A]);if(E==null||O==null||ee==null)return null;function Ne(S){if(C(0),S==null)return;const _=document.getElementById(`${J.current}-${Te}`);_!=null&&_.setAttribute("x",`${E(S)-c.crossHair.width/2}`)}const We={width:q,height:U,x:F,y:Y},{hasXAxisAnnotations:Fe,hasYAxisAnnotations:Ye}=Je(e),Ve=K.labelWidth/2,Xe=t.length<=3;return o.jsxs(g.Fragment,{children:[o.jsxs(Qe.Svg,{emptyState:Q,emptyStateText:n,height:U,role:"table",setRef:$e,width:q,children:[T?null:o.jsx(et,{allowLineWrap:m.allowLineWrap,ariaHidden:!0,isLinearChart:!0,labels:he,labelWidth:K.labelWidth,onHeightChange:R,reducedLabelIndexes:K.reducedLabelIndexes,x:ue.x-Ve,xScale:E,y:ue.y}),c.grid.showHorizontalLines?o.jsx(tt,{ticks:te,transform:{x:c.grid.horizontalOverflow?0:F,y:Y},width:c.grid.horizontalOverflow?q:O}):null,o.jsx(nt,{ticks:te,width:ee+Lt,textAlign:"right",ariaHidden:!0,x:ce.x,y:ce.y}),Q?null:o.jsx(Kt,{data:t,formatYAxisLabel:s.labelFormatter,xAxisLabels:he}),o.jsxs("g",{transform:`translate(${F},${Y})`,children:[p==null||(x=p.chart)===null||x===void 0?void 0:x.call(p,{yScale:V,xScale:E,drawableWidth:O,drawableHeight:W,theme:L}),t.map((S,_)=>{var X;if(((X=S.metadata)===null||X===void 0?void 0:X.isVisuallyHidden)===!0)return null;const G=st({index:_,activeColorVisionIndex:P,comparisonSeriesIndexes:j});return o.jsx(Nt,{activeLineIndex:P,animationDelay:Re[_],data:S,hiddenIndexes:[...Z,G?_:void 0].filter(Boolean),index:_,svgDimensions:{height:W,width:O},theme:L,xScale:E,yScale:V,type:"default",shouldShowArea:Xe},`${name}-${_}`)}),o.jsx(rn,{activeIndex:w,data:t,drawableHeight:W,emptyState:Q,hiddenIndexes:Z,longestSeriesIndex:de,theme:L,tooltipId:J.current,xScale:E,yScale:V})]}),Ye&&o.jsx("g",{transform:`translate(${F},${Y})`,tabIndex:-1,children:o.jsx(rt,{annotationsLookupTable:e,drawableHeight:me,drawableWidth:O,ticks:te,yScale:V})}),Fe&&o.jsx("g",{transform:`translate(${F},0)`,tabIndex:-1,children:o.jsx(at,{annotationsLookupTable:e,axisLabelWidth:K.labelWidth,drawableHeight:me,drawableWidth:O,labels:we,labelFormatter:m.labelFormatter,onHeightChange:D,xScale:E,renderAnnotationContent:r})})]}),le!==-1&&o.jsx(it,{chartBounds:We,chartType:Oe.Line,focusElementDataType:Ee.Point,getMarkup:ke,data:t,longestSeriesIndex:de,id:J.current,margin:$t,onIndexChange:S=>{S!=null&&v?Ne(S):C(S)},parentElement:Pe,usePortal:!0,xScale:E,yScale:V}),h&&!I&&o.jsx(ot,{colorVisionType:re,data:H,onDimensionChange:M,position:i,renderLegendContent:a,renderHiddenLegendLabel:l,enableHideOverflow:f})]})}function hn(e){const{defaultTheme:n}=St(),{annotations:t=[],data:i,emptyStateText:r,errorText:a,id:d,isAnimated:l,onError:u,legendPosition:h,renderAnnotationContent:f,renderLegendContent:p,renderHiddenLegendLabel:L,seriesNameFormatter:m=H=>`${H}`,showLegend:s=!0,hideLegendOverflow:x=!0,skipLinkText:c,state:v,theme:y=n,tooltipOptions:b,xAxisOptions:A,yAxisOptions:j,scrollContainer:w}={...Dt,...e},C=vt(i,!0),P=z(y),$=Ct(C,P),I=g.useRef(ae("lineChart")),T=lt(A),k=dt(j),R=ct({tooltipOptions:b,theme:y,data:C}),N=ut(t,"startKey"),D=Yt(C,$);return o.jsxs(g.Fragment,{children:[c==null||c.length===0||C.length===0?null:o.jsx(xe,{anchorId:I.current,children:c}),o.jsx(bt,{id:d,data:C,theme:y,isAnimated:l,type:Oe.Line,onError:u,scrollContainer:w,children:v!==Mt.Success?o.jsx(_t,{state:v,errorText:a,theme:y}):o.jsx(an,{annotationsLookupTable:N,data:D,emptyStateText:r,legendPosition:h,renderAnnotationContent:f,renderLegendContent:p,renderTooltipContent:R,renderHiddenLegendLabel:L,seriesNameFormatter:m,showLegend:s,hideLegendOverflow:x,theme:y,xAxisOptions:T,yAxisOptions:k,slots:e.slots})}),c==null||c.length===0?null:o.jsx(xe.Anchor,{id:I.current})]})}export{hn as L};
