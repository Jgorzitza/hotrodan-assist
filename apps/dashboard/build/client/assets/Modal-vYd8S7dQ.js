import{r as c,R as r}from"./index-DZoorY08.js";import{M as Q,f as g,N as P,e as h,Q as H,R,V as ue,X as me,Y as fe,Z as pe,v as ge,T as Z,n as J,B as Ee,I as x,z as G,w as he,W as ve,_ as be,$ as Fe,G as Me}from"./Page-CO1VPtMw.js";import{E as ke,p as ye,o as Ce}from"./context-CVB7tZr2.js";import{F as Se}from"./context-BSKof4BJ.js";import{S as xe,F as Pe}from"./context-CdsfRJ3p.js";import{_ as Ne,a as Ie,b as we,T as $,c as De,C as Be}from"./IndexTable-nycHw1tK.js";import{a as Te}from"./Banner-DCanv2aO.js";import{I as _e}from"./InlineGrid-Bklo_vep.js";var _={Backdrop:"Polaris-Backdrop",transparent:"Polaris-Backdrop--transparent",belowNavigation:"Polaris-Backdrop--belowNavigation"};function Le(){const e=c.useContext(xe);if(!e)throw new Q("No ScrollLockManager was provided.");return e}function He(e){const t=Le();return c.useEffect(()=>(t.registerScrollLock(),()=>{t.unregisterScrollLock()}),[t]),null}function Re(e){const{onClick:t,onTouchStart:o,belowNavigation:a,transparent:n,setClosing:i}=e,s=g(_.Backdrop,a&&_.belowNavigation,n&&_.transparent),d=()=>{i&&i(!0)},l=()=>{i&&i(!1),t&&t()};return r.createElement(r.Fragment,null,r.createElement(He,null),r.createElement("div",{className:s,onClick:l,onTouchStart:o,onMouseDown:d}))}const Ae=c.memo(function({children:t,disabled:o,root:a}){return c.useEffect(()=>{if(o||!a)return;const n=Oe(a)?a.current:a;!n||n.querySelector("[autofocus]")||P(n,!1)},[o,a]),r.createElement(r.Fragment,null,t)});function Oe(e){return e.current!==void 0}function Ue(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function A(e,t){var o=function(i){return t&&c.isValidElement(i)?t(i):i},a=Object.create(null);return e&&c.Children.map(e,function(n){return n}).forEach(function(n){a[n.key]=o(n)}),a}function We(e,t){e=e||{},t=t||{};function o(f){return f in t?t[f]:e[f]}var a=Object.create(null),n=[];for(var i in e)i in t?n.length&&(a[i]=n,n=[]):n.push(i);var s,d={};for(var l in t){if(a[l])for(s=0;s<a[l].length;s++){var m=a[l][s];d[a[l][s]]=o(m)}d[l]=o(l)}for(s=0;s<n.length;s++)d[n[s]]=o(n[s]);return d}function b(e,t,o){return o[t]!=null?o[t]:e.props[t]}function ze(e,t){return A(e.children,function(o){return c.cloneElement(o,{onExited:t.bind(null,o),in:!0,appear:b(o,"appear",e),enter:b(o,"enter",e),exit:b(o,"exit",e)})})}function Ve(e,t,o){var a=A(e.children),n=We(t,a);return Object.keys(n).forEach(function(i){var s=n[i];if(c.isValidElement(s)){var d=i in t,l=i in a,m=t[i],f=c.isValidElement(m)&&!m.props.in;l&&(!d||f)?n[i]=c.cloneElement(s,{onExited:o.bind(null,s),in:!0,exit:b(s,"exit",e),enter:b(s,"enter",e)}):!l&&d&&!f?n[i]=c.cloneElement(s,{in:!1}):l&&d&&c.isValidElement(m)&&(n[i]=c.cloneElement(s,{onExited:o.bind(null,s),in:m.props.in,exit:b(s,"exit",e),enter:b(s,"enter",e)}))}}),n}var je=Object.values||function(e){return Object.keys(e).map(function(t){return e[t]})},Ge={component:"div",childFactory:function(t){return t}},O=(function(e){Ne(t,e);function t(a,n){var i;i=e.call(this,a,n)||this;var s=i.handleExited.bind(Ue(i));return i.state={contextValue:{isMounting:!0},handleExited:s,firstRender:!0},i}var o=t.prototype;return o.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},o.componentWillUnmount=function(){this.mounted=!1},t.getDerivedStateFromProps=function(n,i){var s=i.children,d=i.handleExited,l=i.firstRender;return{children:l?ze(n,d):Ve(n,s,d),firstRender:!1}},o.handleExited=function(n,i){var s=A(this.props.children);n.key in s||(n.props.onExited&&n.props.onExited(i),this.mounted&&this.setState(function(d){var l=Ie({},d.children);return delete l[n.key],{children:l}}))},o.render=function(){var n=this.props,i=n.component,s=n.childFactory,d=we(n,["component","childFactory"]),l=this.state.contextValue,m=je(this.state.children).map(s);return delete d.appear,delete d.enter,delete d.exit,i===null?r.createElement($.Provider,{value:l},m):r.createElement($.Provider,{value:l},r.createElement(i,d,m))},t})(r.Component);O.propTypes={};O.defaultProps=Ge;var L={Body:"Polaris-Modal__Body",NoScrollBody:"Polaris-Modal__NoScrollBody",IFrame:"Polaris-Modal__IFrame"},K={Section:"Polaris-Modal-Section",titleHidden:"Polaris-Modal-Section--titleHidden"};function ee({children:e,flush:t=!1,subdued:o=!1,titleHidden:a=!1}){const n=g(K.Section,a&&K.titleHidden);return r.createElement("div",{className:n},r.createElement(h,Object.assign({as:"section",padding:t?"0":"400"},a&&{paddingInlineEnd:"0"},o&&{background:"bg-surface-tertiary"}),e))}var u={Container:"Polaris-Modal-Dialog__Container",Dialog:"Polaris-Modal-Dialog",Modal:"Polaris-Modal-Dialog__Modal",limitHeight:"Polaris-Modal-Dialog--limitHeight",sizeSmall:"Polaris-Modal-Dialog--sizeSmall",sizeLarge:"Polaris-Modal-Dialog--sizeLarge",sizeFullScreen:"Polaris-Modal-Dialog--sizeFullScreen",animateFadeUp:"Polaris-Modal-Dialog--animateFadeUp",entering:"Polaris-Modal-Dialog--entering",exiting:"Polaris-Modal-Dialog--exiting",exited:"Polaris-Modal-Dialog--exited",entered:"Polaris-Modal-Dialog--entered"};function $e({trapping:e}){const t=c.useContext(Pe),o=c.useId();if(!t)throw new Q("No FocusManager was provided.");const{trapFocusList:a,add:n,remove:i}=t,s=a[0]===o,d=c.useMemo(()=>({canSafelyFocus:s}),[s]);return c.useEffect(()=>{if(e)return n(o),()=>{i(o)}},[n,o,i,e]),d}function Ke({trapping:e=!0,children:t}){const{canSafelyFocus:o}=$e({trapping:e}),a=c.useRef(null),[n,i]=c.useState(!0);c.useEffect(()=>{const l=o&&!(a.current&&a.current.contains(document.activeElement))?!e:!0;i(l)},[o,e]);const s=l=>{const m=a.current&&a.current.contains(document.activeElement);e===!1||!a.current||m||l.target instanceof Element&&l.target.matches(`${ye.selector} *`)||o&&l.target instanceof HTMLElement&&a.current!==l.target&&!a.current.contains(l.target)&&P(a.current)},d=l=>{if(e===!1||!a.current)return;const m=ue(a.current),f=me(a.current);l.target===f&&!l.shiftKey&&(l.preventDefault(),fe(a.current)),l.target===m&&l.shiftKey&&(l.preventDefault(),pe(a.current))};return r.createElement(Ae,{disabled:n,root:a.current},r.createElement("div",{ref:a},r.createElement(ke,{event:"focusin",handler:s}),r.createElement(H,{keyCode:R.Tab,keyEvent:"keydown",handler:d}),t))}function Xe({instant:e,labelledBy:t,children:o,limitHeight:a,size:n,onClose:i,onExited:s,onEntered:d,setClosing:l,hasToasts:m,...f}){const N=Ce(),E=c.useRef(null),k=c.useContext(Se);let F;k&&(F=k.toastMessages);const I=g(u.Modal,n&&u[ge("size",n)],a&&u.limitHeight),p=e?De:Ye;c.useEffect(()=>{E.current&&!E.current.contains(document.activeElement)&&P(E.current)},[]);const w=()=>{l&&l(!0)},y=()=>{l&&l(!1),i()},C=r.createElement("div",{"aria-live":"assertive"},F?F.map(M=>r.createElement(Z,{visuallyHidden:!0,as:"p",key:M.id},M.content)):null);return r.createElement(p,Object.assign({},f,{nodeRef:E,mountOnEnter:!0,unmountOnExit:!0,timeout:parseInt(N.motion["motion-duration-200"],10),onEntered:d,onExited:s}),r.createElement("div",{className:u.Container,"data-polaris-layer":!0,"data-polaris-overlay":!0,ref:E},r.createElement(Ke,null,r.createElement("div",{role:"dialog","aria-modal":!0,"aria-label":t,"aria-labelledby":t,tabIndex:-1,className:u.Dialog},r.createElement("div",{className:I},r.createElement(H,{keyCode:R.Escape,keyEvent:"keydown",handler:w}),r.createElement(H,{keyCode:R.Escape,handler:y}),o),C))))}const qe={appear:g(u.animateFadeUp,u.entering),appearActive:g(u.animateFadeUp,u.entered),enter:g(u.animateFadeUp,u.entering),enterActive:g(u.animateFadeUp,u.entered),exit:g(u.animateFadeUp,u.exiting),exitActive:g(u.animateFadeUp,u.exited)};function Ye({children:e,...t}){return r.createElement(Be,Object.assign({},t,{classNames:qe}),e)}function X({pressed:e,onClick:t}){const o=J();return r.createElement(Ee,{variant:"tertiary",pressed:e,icon:Te,onClick:t,accessibilityLabel:o.translate("Polaris.Common.close")})}function Qe({id:e,children:t,closing:o,titleHidden:a,onClose:n}){return a||!t?r.createElement(h,{position:"absolute",insetInlineEnd:"400",insetBlockStart:"400",zIndex:"1"},r.createElement(X,{onClick:n})):r.createElement(h,{paddingBlockStart:"400",paddingBlockEnd:"400",paddingInlineStart:"400",paddingInlineEnd:"400",borderBlockEndWidth:"025",borderColor:"border",background:"bg-surface-tertiary"},r.createElement(_e,{columns:{xs:"1fr auto"},gap:"400"},r.createElement(x,{gap:"400",blockAlign:"center"},r.createElement(Z,{id:e,as:"h2",variant:"headingMd",breakWord:!0},t)),r.createElement(X,{pressed:o,onClick:n})))}function Ze({primaryAction:e,secondaryActions:t,children:o}){const a=e&&G(e,{variant:"primary"})||null,n=t&&G(t)||null,i=a||n?r.createElement(x,{gap:"200"},n,a):null;return r.createElement(x,{gap:"400",blockAlign:"center"},r.createElement(h,{borderColor:"border",borderBlockStartWidth:"025",padding:"400",width:"100%"},r.createElement(x,{gap:"400",blockAlign:"center",align:"space-between"},r.createElement(h,null,o),i)))}const q=200,Je=400,et=function({children:t,title:o,titleHidden:a=!1,src:n,iFrameName:i,open:s,instant:d,sectioned:l,loading:m,size:f,limitHeight:N,footer:E,primaryAction:k,secondaryActions:F,onScrolledToBottom:I,activator:p,activatorWrapper:w="div",onClose:y,onIFrameLoad:C,onTransitionEnd:M,noScroll:te}){const[ne,D]=c.useState(q),[ae,U]=c.useState(!1),W=c.useId(),z=c.useRef(null),re=J().translate("Polaris.Modal.iFrameTitle");let V,j;const oe=c.useCallback(()=>{M&&M()},[M]),ie=c.useCallback(()=>{D(q);const v=p&&Y(p)?p&&p.current:z.current;v&&requestAnimationFrame(()=>P(v))},[p]),le=c.useCallback(v=>{const S=v.target;if(S&&S.contentWindow)try{D(S.contentWindow.document.body.scrollHeight)}catch{D(Je)}C!=null&&C(v)},[C]);if(s){const v=!E&&!k&&!F?null:r.createElement(Ze,{primaryAction:k,secondaryActions:F},E),S=l?he(t,ee,{titleHidden:a}):t,T=m?r.createElement(h,{padding:"400"},r.createElement(x,{gap:"400",align:"center",blockAlign:"center"},r.createElement(Me,null))):S,ce=te?r.createElement("div",{className:L.NoScrollBody},r.createElement(h,{width:"100%",overflowX:"hidden",overflowY:"hidden"},T)):r.createElement(Fe,{shadow:!0,className:L.Body,onScrolledToBottom:I},T),de=n?r.createElement("iframe",{name:i,title:re,src:n,className:L.IFrame,onLoad:le,style:{height:`${ne}px`}}):ce;V=r.createElement(Xe,{instant:d,labelledBy:W,onClose:y,onEntered:oe,onExited:ie,size:f,limitHeight:N,setClosing:U},r.createElement(Qe,{titleHidden:a,id:W,closing:ae,onClose:y},o),de,v),j=r.createElement(Re,{setClosing:U,onClick:y})}const B=!d,se=p&&!Y(p)?r.createElement(h,{ref:z,as:w},p):null;return r.createElement(ve.Provider,{value:!0},se,r.createElement(be,{idPrefix:"modal"},r.createElement(O,{appear:B,enter:B,exit:B},V),j))};function Y(e){return Object.prototype.hasOwnProperty.call(e,"current")}et.Section=ee;export{et as M};
