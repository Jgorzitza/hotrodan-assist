import{i as S,l as C,u as k,a as R,b as A,c as _,f as E,C as V,d as M}from"./ChartContainer-DSIix7Zm.js";import{r as x,j as m}from"./index-DZoorY08.js";import{X as b,S as X,D as H,C as O}from"./PolarisVizProvider-BMFajI3Y.js";import{L as w}from"./LineSeries-CNDg3zjh.js";function N({data:e,height:r,svgMargin:i=2}){const t=e.map(h=>h.data.length-1),c=Math.max(...t),s=Array.prototype.concat.apply([],e.map(({data:h})=>h.map(({value:f})=>f))),a=s.length?Math.min(...s):0,o=s.length?Math.max(...s):0;if(S(a)||S(o))throw new Error("Data must be finite");const u=r-i;let n=i;a===0&&o===0&&(n=u);const l=C().range([u,n]).domain([a,o]);return{minXDomain:0,maxXDomain:c,yScale:l}}function P(e){const r=x.useMemo(()=>e.length<=1?[]:e.reduce((t,c)=>{const s=c.data.map(({value:a})=>a).filter(a=>a!==null);return t.concat(...s)},[]),[e]),i=x.useMemo(()=>!r.some(t=>t!==null&&t!==0),[r]);return e.length>1&&i?e.filter(({isComparison:t})=>t!==!0):e}var F={VisuallyHidden:"_VisuallyHidden_1laex_144"};const g=2;function I({data:e,accessibilityLabel:r,offsetLeft:i=0,offsetRight:t=0}){const{theme:c,containerBounds:s}=k(),a=R(),o=P(e),u=A(o,a),{width:n,height:l}=s,{minXDomain:h,maxXDomain:f,yScale:y}=N({data:o,height:l});return m.jsxs(x.Fragment,{children:[r?m.jsx("span",{className:F.VisuallyHidden,children:r}):null,m.jsx("svg",{xmlns:b,"aria-hidden":!0,width:n,height:l,children:o.map((d,p)=>{const D=d.isComparison?0:i,L=d.isComparison?0:t,T=C().range([D+g,n-L-g]).domain([h,f]),j={color:u[p],strokeDasharray:d.isComparison?X:"none",...d};return m.jsx("g",{children:m.jsx(w,{index:p,xScale:T,yScale:y,data:j,svgDimensions:{height:l,width:n},theme:c,type:"spark"},p)},p)})})]})}function z(e){const{defaultTheme:r}=_(),{data:i,accessibilityLabel:t,id:c,isAnimated:s,offsetLeft:a=0,offsetRight:o=0,onError:u,theme:n=r,state:l,errorText:h}={...H,...e},f=E(i,!0);return m.jsx(V,{id:c,isAnimated:s,data:f,theme:n,sparkChart:!0,onError:u,skeletonType:"Spark",children:l!==O.Success?m.jsx(M,{type:"Spark",state:l,errorText:h,theme:n}):m.jsx(I,{data:f,accessibilityLabel:t,offsetLeft:a,offsetRight:o,theme:n})})}export{z as S};
