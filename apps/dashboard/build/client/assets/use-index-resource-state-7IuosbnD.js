import{r as R}from"./index-DZoorY08.js";let n;(function(e){e.All="all",e.Page="page",e.Multi="multi",e.Single="single",e.Range="range"})(n||(n={}));function C(e){if("id"in e)return e.id;throw new Error("Your resource does not directly contain an `id`. Pass a `resourceIDResolver` to `useIndexResourceState`")}function M(e,{selectedResources:p=[],allResourcesSelected:I=!1,resourceIDResolver:i=C,resourceFilter:d=void 0}={selectedResources:[],allResourcesSelected:!1,resourceIDResolver:C,resourceFilter:void 0}){const[c,u]=R.useState(p),[m,b]=R.useState(I),x=R.useCallback((k,a,t,g)=>{switch(k===n.All?b(a):m&&b(!1),k){case n.Single:u(s=>a?[...s,t]:s.filter(f=>f!==t));break;case n.All:case n.Page:if(d){const s=e.filter(d);u(a&&c.length<s.length?s.map(i):[])}else u(a?e.map(i):[]);break;case n.Multi:if(!t)break;u(s=>{const f=[],h=d?e.filter(d):e;for(let l=t[0];l<=t[1];l++)if(h.includes(e[l])){const o=i(e[l]);(a&&!s.includes(o)||!a&&s.includes(o))&&f.push(o)}return a?[...s,...f]:s.filter(l=>!f.includes(l))});break;case n.Range:if(!t)break;u(s=>{const l=(d?e.filter(d):e).map(i).slice(Number(t[0]),Number(t[1])+1),o=l.some(r=>c.includes(r));return!l.every(r=>c.includes(r))&&(a||o)?[...new Set([...s,...l]).values()]:s.filter(r=>!l.includes(r))});break}},[m,d,c,e,i]),A=R.useCallback(()=>{u([]),b(!1)},[]),S=R.useCallback(k=>{const t=[...c].filter(g=>!k.includes(g));u(t),t.length===0&&b(!1)},[c]);return{selectedResources:c,allResourcesSelected:m,handleSelectionChange:x,clearSelection:A,removeSelectedResources:S}}export{M as u};
