import{r as T,j as e}from"./index-DZoorY08.js";import{r as B,D as $,w as g,a as z,b as H}from"./date-range-CLhjUUo2.js";import{u as N,b as G,c as F,d as U,e as K}from"./components-CTA1UUXK.js";import{C as o,b as t,T as n,c as D,P as V,I as r,B as p,d as Y}from"./Page-CO1VPtMw.js";import{P as q}from"./PolarisVizProvider-BMFajI3Y.js";import{T as Q}from"./TitleBar-DFMSJ8Yc.js";import{B as J}from"./Banner-DCanv2aO.js";import{I as W}from"./InlineGrid-Bklo_vep.js";import{L as c}from"./Layout-Drv8ZkBJ.js";import{S as l,a as h,b as X}from"./SkeletonThumbnail-0ezpmZgf.js";import{S as Z}from"./SparkLineChart-CQgKgDqj.js";import"./context-CVB7tZr2.js";import"./ChartContainer-DSIix7Zm.js";import"./LineSeries-CNDg3zjh.js";const ee=H.filter(s=>s!=="14d"),se={today:"7d","7d":"7d","14d":"14d","28d":"28d","90d":"90d"};function Me(){const{data:s,useMockData:m,scenario:S,mcp:b}=N(),[f]=G(),L=F(),A=U(),E=K(),w=T.useRef(null),d=B(f.get("range"),s.range??$),y=A.location,x=A.state!=="idle"&&(y==null?void 0:y.pathname)==="/app",j={searchParams:f},v=(()=>{const a=g("/app/sales",d,j),i=new URL(a,"https://dashboard.internal");return i.searchParams.set("period",se[d]??"28d"),`${i.pathname}${i.search}${i.hash}`})(),k=()=>{!v||w.current===v||(w.current=v,E.load(v))},O=a=>{const i=new URLSearchParams(f);i.set("range",a),L(`?${i.toString()}`,{replace:!0})},_=s.sparkline.map((a,i)=>({key:i,value:a})),R=s.rangeLabel??z[d].label,I=s.metrics.length||4,C=x?Array.from({length:I},(a,i)=>e.jsx(o,{children:e.jsx(P,{})},`metric-skeleton-${i}`)):s.metrics.map(a=>e.jsx(o,{children:e.jsxs(t,{gap:"100",children:[e.jsx(n,{as:"span",variant:"bodySm",tone:"subdued",children:a.label}),e.jsx(n,{as:"p",variant:"headingLg",children:a.value}),e.jsx(D,{tone:a.delta>=0?"success":"critical",children:`${te(a.delta)} ${a.deltaPeriod}`})]})},a.id));return e.jsx(q,{children:e.jsxs(V,{children:[e.jsx(Q,{title:"Operations dashboard"}),e.jsxs(t,{gap:"500",children:[m&&e.jsx(J,{title:`Mock data scenario: ${S}`,tone:S==="warning"?"warning":"info",children:e.jsx("p",{children:"Change the `mockState` query parameter (base, empty, warning, error) to preview different UI permutations."})}),e.jsx(o,{children:e.jsxs(t,{gap:"200",children:[e.jsxs(r,{align:"space-between",blockAlign:"center",children:[e.jsx(n,{as:"h2",variant:"headingLg",children:"Sales overview"}),e.jsxs(r,{gap:"200",blockAlign:"center",children:[e.jsx(p,{variant:"plain",url:v,onMouseEnter:k,onFocus:k,onTouchStart:k,children:"View sales"}),e.jsx(Y,{children:ee.map(a=>e.jsx(p,{pressed:d===a,onClick:()=>O(a),children:a.toUpperCase()},a))}),e.jsx(n,{as:"span",tone:"subdued",variant:"bodySm",children:R})]})]}),e.jsx(W,{columns:{xs:1,sm:2,lg:4},gap:"300",children:C}),x?e.jsx(de,{}):e.jsx(le,{points:_,rangeLabel:R})]})}),e.jsxs(c,{children:[e.jsx(c.Section,{children:e.jsx(o,{title:"Orders attention",children:e.jsx(t,{gap:"300",children:x?Array.from({length:s.orders.length||3},(a,i)=>e.jsx(ne,{},`order-skeleton-${i}`)):s.orders.map(a=>e.jsxs(r,{align:"space-between",blockAlign:"center",children:[e.jsxs(t,{gap:"050",children:[e.jsx(n,{as:"p",variant:"headingMd",children:a.label}),e.jsx(n,{as:"span",variant:"bodySm",tone:"subdued",children:a.description})]}),e.jsxs(r,{gap:"200",blockAlign:"center",children:[e.jsx(n,{as:"span",variant:"headingMd",children:a.count}),e.jsx(p,{url:g(a.href,d,j),accessibilityLabel:`View ${a.label}`,children:"Open"})]})]},a.id))})})}),e.jsx(c.Section,{children:e.jsx(o,{title:"Inbox",children:x?e.jsx(ae,{}):e.jsxs(t,{gap:"200",children:[e.jsxs(r,{align:"space-between",children:[e.jsx(n,{variant:"bodyMd",as:"span",children:"Outstanding"}),e.jsx(n,{variant:"headingMd",as:"span",children:s.inbox.outstanding})]}),e.jsxs(r,{align:"space-between",children:[e.jsx(n,{variant:"bodyMd",as:"span",children:"Overdue >12h"}),e.jsx(n,{variant:"headingMd",as:"span",children:s.inbox.overdueHours})]}),e.jsxs(r,{align:"space-between",children:[e.jsx(n,{variant:"bodyMd",as:"span",children:"AI approvals pending"}),e.jsx(n,{variant:"headingMd",as:"span",children:s.inbox.approvalsPending})]}),e.jsx(p,{url:g("/app/inbox",d,j),tone:"primary",variant:"plain",children:"Go to inbox"})]})})})]}),e.jsx(c,{children:e.jsx(c.Section,{children:e.jsx(o,{title:"Inventory snapshot",children:x?e.jsxs(t,{gap:"200",children:[e.jsx(r,{gap:"400",children:Array.from({length:3},(a,i)=>e.jsx(P,{},`inventory-skeleton-${i}`))}),e.jsx(l,{size:"small"})]}):e.jsxs(e.Fragment,{children:[e.jsxs(r,{gap:"400",children:[e.jsx(M,{label:"Low stock",value:s.inventory.lowStock}),e.jsx(M,{label:"POs in flight",value:s.inventory.purchaseOrdersInFlight}),e.jsx(M,{label:"Overstock",value:s.inventory.overstock})]}),e.jsx(p,{url:g("/app/inventory",d,j),accessibilityLabel:"View inventory planner",children:"Open inventory planner"})]})})})}),e.jsxs(c,{children:[e.jsx(c.Section,{children:e.jsx(o,{title:"SEO highlights",children:x?e.jsx(ie,{}):e.jsxs(t,{gap:"200",children:[e.jsx(n,{as:"span",variant:"bodyMd",children:"Traffic Δ"}),e.jsxs(D,{tone:"success",children:["+",s.seo.trafficDelta,"%"]}),e.jsx(n,{as:"p",variant:"bodySm",children:s.seo.summary}),e.jsxs(r,{gap:"300",children:[e.jsx(n,{variant:"bodyMd",as:"span",children:"Rising queries"}),e.jsx(n,{variant:"headingMd",as:"span",children:s.seo.risingQueries})]}),e.jsxs(r,{gap:"300",children:[e.jsx(n,{variant:"bodyMd",as:"span",children:"Rising pages"}),e.jsx(n,{variant:"headingMd",as:"span",children:s.seo.risingPages})]}),e.jsxs(r,{gap:"300",children:[e.jsx(n,{variant:"bodyMd",as:"span",children:"Critical issues"}),e.jsx(n,{variant:"headingMd",tone:"critical",as:"span",children:s.seo.criticalIssues})]}),e.jsx(p,{url:g("/app/seo",d,j),variant:"plain",children:"Dive into SEO"})]})})}),e.jsx(c.Section,{children:e.jsx(o,{title:"MCP insight",children:x?e.jsx(re,{}):e.jsxs(t,{gap:"200",children:[e.jsx(n,{as:"p",variant:"bodyMd",children:s.mcpRecommendation}),!b.enabled&&e.jsx(n,{as:"p",variant:"bodySm",tone:"subdued",children:"Configure credentials and enable the MCP toggle in Settings to load live data."}),b.usingMocks&&e.jsx(n,{as:"p",variant:"bodySm",tone:"subdued",children:"Showing mock data while `USE_MOCK_DATA` is enabled."}),b.generatedAt&&e.jsxs(n,{as:"p",variant:"bodySm",tone:"subdued",children:["Last updated ",new Date(b.generatedAt).toLocaleString()," • ",b.source??"mock"]}),e.jsx(p,{url:g("/app/settings",d,j),variant:"plain",children:"Manage MCP toggles"})]})})})]})]})]})})}function M({label:s,value:m}){return e.jsxs(t,{gap:"050",children:[e.jsx(n,{as:"span",variant:"bodySm",tone:"subdued",children:s}),e.jsx(n,{as:"span",variant:"headingMd",children:m})]})}function P(){return e.jsxs(t,{gap:"050",children:[e.jsx(h,{lines:1}),e.jsx(l,{size:"small"})]})}function ne(){return e.jsxs(r,{align:"space-between",blockAlign:"center",gap:"200",children:[e.jsx("div",{style:{flex:1},children:e.jsxs(t,{gap:"050",children:[e.jsx(l,{size:"small"}),e.jsx(h,{lines:1})]})}),e.jsxs(r,{gap:"200",blockAlign:"center",children:[e.jsx(l,{size:"small"}),e.jsx(l,{size:"small"})]})]})}function u(){return e.jsxs(r,{align:"space-between",blockAlign:"center",gap:"200",children:[e.jsx("div",{style:{flex:1},children:e.jsx(h,{lines:1})}),e.jsx(l,{size:"small"})]})}function ae(){return e.jsxs(t,{gap:"200",children:[e.jsx(u,{}),e.jsx(u,{}),e.jsx(u,{}),e.jsx(l,{size:"small"})]})}function ie(){return e.jsxs(t,{gap:"200",children:[e.jsx(h,{lines:1}),e.jsx(l,{size:"small"}),e.jsx(h,{lines:2}),e.jsx(u,{}),e.jsx(u,{}),e.jsx(u,{}),e.jsx(l,{size:"small"})]})}function re(){return e.jsxs(t,{gap:"200",children:[e.jsx(h,{lines:2}),e.jsx(h,{lines:1}),e.jsx(h,{lines:1}),e.jsx(l,{size:"small"})]})}const te=s=>`${s>0?"+":""}${s.toFixed(1)}%`;function le({points:s,rangeLabel:m}){if(!s.length)return e.jsx(n,{as:"p",variant:"bodySm",tone:"subdued",children:"Sales trend data unavailable."});const S=[{name:"Sales",data:s}];return e.jsx("div",{style:{width:"100%",height:160},children:e.jsx(Z,{accessibilityLabel:`Sales trend for the selected range ${m}`,data:S,isAnimated:!1})})}function de(){return e.jsx("div",{style:{width:"100%",height:160,display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(X,{size:"extraLarge"})})}export{Me as default};
