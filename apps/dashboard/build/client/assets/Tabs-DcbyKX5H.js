import{R as e,r as n}from"./index-DZoorY08.js";import{n as X,T as Ce,y as Oe,N as G,a as we,f as S,i as ge,O as Be,A as Ve,E as Je,U as Ze,J as $e,x as Qe,I as Ye,c as et,H as tt,e as at,o as nt}from"./Page-CO1VPtMw.js";import{a as st}from"./context-CVB7tZr2.js";import{M as H}from"./Modal-vYd8S7dQ.js";import{F as Ae}from"./FormLayout-Cauguaew.js";import{S as ot}from"./Banner-DCanv2aO.js";var He=function(r){return e.createElement("svg",Object.assign({viewBox:"0 0 20 20"},r),e.createElement("path",{d:"M11.5 8.25a.75.75 0 0 1 .75.75v4.25a.75.75 0 0 1-1.5 0v-4.25a.75.75 0 0 1 .75-.75Z"}),e.createElement("path",{d:"M9.25 9a.75.75 0 0 0-1.5 0v4.25a.75.75 0 0 0 1.5 0v-4.25Z"}),e.createElement("path",{fillRule:"evenodd",d:"M7.25 5.25a2.75 2.75 0 0 1 5.5 0h3a.75.75 0 0 1 0 1.5h-.75v5.45c0 1.68 0 2.52-.327 3.162a3 3 0 0 1-1.311 1.311c-.642.327-1.482.327-3.162.327h-.4c-1.68 0-2.52 0-3.162-.327a3 3 0 0 1-1.311-1.311c-.327-.642-.327-1.482-.327-3.162v-5.45h-.75a.75.75 0 0 1 0-1.5h3Zm1.5 0a1.25 1.25 0 1 1 2.5 0h-2.5Zm-2.25 1.5h7v5.45c0 .865-.001 1.423-.036 1.848-.033.408-.09.559-.128.633a1.5 1.5 0 0 1-.655.655c-.074.038-.225.095-.633.128-.425.035-.983.036-1.848.036h-.4c-.865 0-1.423-.001-1.848-.036-.408-.033-.559-.09-.633-.128a1.5 1.5 0 0 1-.656-.655c-.037-.074-.094-.225-.127-.633-.035-.425-.036-.983-.036-1.848v-5.45Z"}))};He.displayName="DeleteIcon";var Ke=function(r){return e.createElement("svg",Object.assign({viewBox:"0 0 20 20"},r),e.createElement("path",{d:"M11.25 8.5c-.414 0-.75.336-.75.75v1.25h-1.25c-.414 0-.75.336-.75.75s.336.75.75.75h1.25v1.25c0 .414.336.75.75.75s.75-.336.75-.75v-1.25h1.25c.414 0 .75-.336.75-.75s-.336-.75-.75-.75h-1.25v-1.25c0-.414-.336-.75-.75-.75Z"}),e.createElement("path",{fillRule:"evenodd",d:"M8.75 16.5c-1.438 0-2.618-1.104-2.74-2.51-1.406-.122-2.51-1.302-2.51-2.74v-5c0-1.519 1.231-2.75 2.75-2.75h5c1.438 0 2.618 1.104 2.74 2.51 1.406.122 2.51 1.302 2.51 2.74v5c0 1.519-1.231 2.75-2.75 2.75h-5Zm0-10.5c-1.519 0-2.75 1.231-2.75 2.75v3.725c-.57-.116-1-.62-1-1.225v-5c0-.69.56-1.25 1.25-1.25h5c.605 0 1.11.43 1.225 1h-3.725Zm0 1.5c-.69 0-1.25.56-1.25 1.25v5c0 .69.56 1.25 1.25 1.25h5c.69 0 1.25-.56 1.25-1.25v-5c0-.69-.56-1.25-1.25-1.25h-5Z"}))};Ke.displayName="DuplicateIcon";var je=function(r){return e.createElement("svg",Object.assign({viewBox:"0 0 20 20"},r),e.createElement("path",{fillRule:"evenodd",d:"M15.655 4.344a2.695 2.695 0 0 0-3.81 0l-.599.599-.009-.009-1.06 1.06.008.01-5.88 5.88a2.75 2.75 0 0 0-.805 1.944v1.922a.75.75 0 0 0 .75.75h1.922a2.75 2.75 0 0 0 1.944-.806l7.54-7.539a2.695 2.695 0 0 0 0-3.81Zm-4.409 2.72-5.88 5.88a1.25 1.25 0 0 0-.366.884v1.172h1.172c.331 0 .65-.132.883-.366l5.88-5.88-1.689-1.69Zm2.75.629.599-.599a1.195 1.195 0 1 0-1.69-1.689l-.598.599 1.69 1.689Z"}))};je.displayName="EditIcon";var xe=function(r){return e.createElement("svg",Object.assign({viewBox:"0 0 20 20"},r),e.createElement("path",{fillRule:"evenodd",d:"M3 6.75c0-2.071 1.679-3.75 3.75-3.75h6.5c2.071 0 3.75 1.679 3.75 3.75v6.5c0 2.071-1.679 3.75-3.75 3.75h-6.5c-2.071 0-3.75-1.679-3.75-3.75v-6.5Zm3.75-2.25c-1.243 0-2.25 1.007-2.25 2.25v6.5c0 1.243 1.007 2.25 2.25 2.25h.5v-11h-.5Zm4.5 11h-2.5v-11h2.5v11Zm1.5 0h.5c1.243 0 2.25-1.007 2.25-2.25v-6.5c0-1.243-1.007-2.25-2.25-2.25h-.5v11Z"}))};xe.displayName="LayoutColumns3Icon";var Ue=function(r){return e.createElement("svg",Object.assign({viewBox:"0 0 20 20"},r),e.createElement("path",{d:"M10.75 5.75c0-.414-.336-.75-.75-.75s-.75.336-.75.75v3.5h-3.5c-.414 0-.75.336-.75.75s.336.75.75.75h3.5v3.5c0 .414.336.75.75.75s.75-.336.75-.75v-3.5h3.5c.414 0 .75-.336.75-.75s-.336-.75-.75-.75h-3.5v-3.5Z"}))};Ue.displayName="PlusIcon";function De({acceptCharset:t,action:r,autoComplete:o,children:T,encType:f,implicitSubmit:p=!0,method:b="post",name:a,noValidate:i,preventDefault:u=!0,target:d,onSubmit:h}){const v=X(),P=n.useCallback(c=>{u&&(c.preventDefault(),h(c))},[h,u]),E=rt(o),C=p?e.createElement(Ce,{as:"span",visuallyHidden:!0},e.createElement("button",{type:"submit","aria-hidden":"true",tabIndex:-1},v.translate("Polaris.Common.submit"))):null;return e.createElement("form",{acceptCharset:t,action:r,autoComplete:E,encType:f,method:b,name:a,noValidate:i,target:d,onSubmit:P},C,T)}function rt(t){return t==null?t:t?"on":"off"}function lt(){const[t,r]=n.useState(!1),o=n.useCallback(()=>r(!0),[]);return Oe("touchstart",o),t}function _e(t){const r=n.useRef();return n.useEffect(()=>{r.current=t},[t]),r.current}function Le(t,r,o,T,f){const p=T.reduce((u,d)=>u+d,0),b=t.map((u,d)=>d),a=[],i=[];if(f>p)a.push(...b);else{a.push(r);let u=T[r];b.forEach(d=>{if(d!==r){const h=T[d];if(u+h>=f-o){i.push(d);return}a.push(d),u+=h}})}return{visibleTabs:a,hiddenTabs:i}}var m={Outer:"Polaris-Tabs__Outer",Wrapper:"Polaris-Tabs__Wrapper",WrapperWithNewButton:"Polaris-Tabs__WrapperWithNewButton",ButtonWrapper:"Polaris-Tabs__ButtonWrapper",Tabs:"Polaris-Tabs",Tab:"Polaris-Tabs__Tab","Tab-active":"Polaris-Tabs__Tab--active","Tab-hasActions":"Polaris-Tabs__Tab--hasActions","Tab-iconOnly":"Polaris-Tabs__Tab--iconOnly",fillSpace:"Polaris-Tabs--fillSpace",TabContainer:"Polaris-Tabs__TabContainer",fitted:"Polaris-Tabs--fitted",List:"Polaris-Tabs__List",Item:"Polaris-Tabs__Item",DisclosureTab:"Polaris-Tabs__DisclosureTab","DisclosureTab-visible":"Polaris-Tabs__DisclosureTab--visible",DisclosureActivator:"Polaris-Tabs__DisclosureActivator",TabsMeasurer:"Polaris-Tabs__TabsMeasurer",NewTab:"Polaris-Tabs__NewTab",ActionListWrap:"Polaris-Tabs__ActionListWrap",Panel:"Polaris-Tabs__Panel","Panel-hidden":"Polaris-Tabs__Panel--hidden"};const Me=40;function ct({open:t,isModalLoading:r,name:o,onClose:T,onClickPrimaryAction:f,onClickSecondaryAction:p,helpText:b,viewNames:a}){const i=X(),[u,d]=n.useState(o),h=n.useRef(null),v=a==null?void 0:a.some(M=>M.trim().toLowerCase()===u.trim().toLowerCase()),P=r||v||!u||u.length>Me;n.useEffect(()=>{h.current&&t&&G(h.current)},[t]),n.useEffect(()=>{t&&d(o.slice(0,Me))},[o,t]);const E=n.useCallback(M=>{d(M)},[]);async function C(){P||(await f(u),d(""),T())}function c(){p==null||p(),d(o),T()}return e.createElement(H,{open:t,onClose:T,title:i.translate("Polaris.Tabs.DuplicateModal.title"),primaryAction:{content:i.translate("Polaris.Tabs.DuplicateModal.create"),onAction:C,disabled:P},secondaryActions:[{content:i.translate("Polaris.Tabs.DuplicateModal.cancel"),onAction:c}],instant:!0},e.createElement(H.Section,null,e.createElement(De,{onSubmit:C},e.createElement(Ae,null,e.createElement("div",{ref:h},e.createElement(we,{label:i.translate("Polaris.Tabs.DuplicateModal.label"),value:u,onChange:E,autoComplete:"off",helpText:b,maxLength:Me,showCharacterCount:!0,error:v?i.translate("Polaris.Tabs.DuplicateModal.errors.sameName",{name:u}):void 0}))))))}function it({open:t,isModalLoading:r,name:o,onClose:T,onClickPrimaryAction:f,onClickSecondaryAction:p,helpText:b,viewNames:a}){const i=X(),[u,d]=n.useState(o),h=n.useRef(null),v=a==null?void 0:a.filter(M=>M!==o).some(M=>M.trim().toLowerCase()===u.trim().toLowerCase()),P=r||v||u===o||!u;n.useEffect(()=>{h.current&&t&&G(h.current)},[t]),n.useEffect(()=>{t&&d(o)},[o,t]);const E=n.useCallback(M=>{d(M)},[]);async function C(){P||(await f(u),d(""),T())}function c(){p==null||p(),d(o),T()}return e.createElement(H,{open:t,onClose:T,title:i.translate("Polaris.Tabs.RenameModal.title"),primaryAction:{content:i.translate("Polaris.Tabs.RenameModal.create"),onAction:C,disabled:P},secondaryActions:[{content:i.translate("Polaris.Tabs.RenameModal.cancel"),onAction:c}],instant:!0},e.createElement(H.Section,null,e.createElement(De,{onSubmit:C},e.createElement(Ae,null,e.createElement("div",{ref:h},e.createElement(we,{label:i.translate("Polaris.Tabs.RenameModal.label"),value:u,onChange:E,autoComplete:"off",helpText:b,maxLength:40,showCharacterCount:!0,error:v?i.translate("Polaris.Tabs.RenameModal.errors.sameName",{name:u}):void 0}))))))}const ie=n.forwardRef(({content:t,accessibilityLabel:r,badge:o,id:T,panelID:f,url:p,onAction:b,actions:a,disabled:i,isModalLoading:u,icon:d,siblingTabHasFocus:h,measuring:v,focused:P,selected:E,onToggleModal:C,onTogglePopover:c,viewNames:M,tabIndexOverride:w,onFocus:j},K)=>{const D=X(),[x,ae]=n.useState(!1),[R,J]=n.useState(null),Q=n.useRef(E),N=n.useRef(!1),I=n.useRef(null);n.useEffect(()=>{c(x)},[x,c]),n.useEffect(()=>{C(!!R)},[R,C]),n.useEffect(()=>()=>{C(!1),c(!1)},[C,c]),n.useEffect(()=>{if(v)return;(P||document.activeElement&&document.activeElement.id===T)&&E&&f!=null&&!N.current&&(ke(f),N.current=!0),E&&!Q.current&&f!=null?ke(f):P&&I.current!=null&&R==null&&!i&&G(I.current),Q.current=E},[P,T,t,v,f,E,R,i]);let $;E&&!h&&!v||P&&!v?$=0:$=-1,w!=null&&($=w);const O=a==null?void 0:a.find(y=>y.type==="rename"),_=a==null?void 0:a.find(y=>y.type==="duplicate"),L=a==null?void 0:a.find(y=>y.type==="delete"),U=n.useCallback(()=>{a!=null&&a.length&&ae(y=>!y)},[a]),Y=n.useCallback(()=>{i||(E?U():b==null||b())},[E,b,U,i]),ue=y=>{J(y)},B=()=>{J(null)},de=n.useCallback(async y=>{var k;await((k=O==null?void 0:O.onPrimaryAction)==null?void 0:k.call(O,y)),setTimeout(()=>{I.current&&G(I.current)},250)},[O]),me=n.useCallback(async()=>{var y;await((y=L==null?void 0:L.onPrimaryAction)==null?void 0:y.call(L,t)),B()},[L,t]),fe=n.useCallback(async y=>{var k;await((k=_==null?void 0:_.onPrimaryAction)==null?void 0:k.call(_,y))},[_]),be={rename:{icon:ot,content:D.translate("Polaris.Tabs.Tab.rename")},duplicate:{icon:Ke,content:D.translate("Polaris.Tabs.Tab.duplicate")},edit:{icon:je,content:D.translate("Polaris.Tabs.Tab.edit")},"edit-columns":{icon:xe,content:D.translate("Polaris.Tabs.Tab.editColumns")},delete:{icon:He,content:D.translate("Polaris.Tabs.Tab.delete"),destructive:!0}},ne=a==null?void 0:a.map(({type:y,onAction:k,onPrimaryAction:qe,...ce})=>{const ye=!y.includes("edit");return{...be[y],...ce,onAction:()=>{k==null||k(t),U(),ye&&ue(y)}}}),se=n.useCallback(y=>{y.key===" "&&(y.preventDefault(),Y())},[Y]),Te=S(m.TabContainer,E&&m.Underline),ee=i||E?void 0:p,he=ee?Ze:$e,pe=S(m.Tab,d&&m["Tab-iconOnly"],x&&m["Tab-popoverActive"],E&&m["Tab-active"],E&&(a==null?void 0:a.length)&&m["Tab-hasActions"]),ve=o?e.createElement(et,{tone:E?void 0:"new"},o):null,oe=E&&(a!=null&&a.length)?e.createElement("div",{className:S(m.IconWrap)},e.createElement(ge,{source:Be})):null,q=e.createElement(he,{id:T,className:pe,tabIndex:$,"aria-selected":E,"aria-controls":f,"aria-label":r,role:w==null?"tab":void 0,disabled:i,url:ee,onFocus:j,onMouseUp:Qe,onClick:Y,onKeyDown:se},e.createElement(Ye,{gap:"200",align:"center",blockAlign:"center",wrap:!1},e.createElement(Ce,{as:"span",variant:"bodySm",fontWeight:"medium"},d??t),ve),oe),re=!E||!(a!=null&&a.length),z=O?e.createElement(it,{name:t,open:R==="rename",onClose:B,onClickPrimaryAction:de,isModalLoading:u,viewNames:M}):null,Ee=_?e.createElement(ct,{open:R==="duplicate",name:D.translate("Polaris.Tabs.Tab.copy",{name:t}),onClose:B,onClickPrimaryAction:fe,isModalLoading:u,viewNames:M||[]}):null,Pe=L?e.createElement(H,{open:R==="delete",onClose:B,primaryAction:{content:D.translate("Polaris.Tabs.Tab.deleteModal.delete"),onAction:me,destructive:!0,disabled:u},secondaryActions:[{content:D.translate("Polaris.Tabs.Tab.deleteModal.cancel"),onAction:B}],title:D.translate("Polaris.Tabs.Tab.deleteModal.title"),instant:!0},e.createElement(H.Section,null,D.translate("Polaris.Tabs.Tab.deleteModal.description",{viewName:t}))):null,le=re||i?q:e.createElement(e.Fragment,null,e.createElement(Ve,{active:x,activator:q,autofocusTarget:"first-node",onClose:U},e.createElement("div",{className:m.ActionListWrap},e.createElement(Je,{actionRole:"menuitem",items:ne}))),z,Ee,Pe);return d?le:e.createElement("li",{className:Te,ref:ut([I,K]),role:"presentation"},le)});ie.displayName="Tab";function ke(t){const r=document.getElementById(t);r&&r.focus({preventScroll:!0})}function ut(t){return r=>{for(const o of t)o!=null&&(o.current=r)}}const dt=n.memo(function({selected:r,tabs:o,activator:T,tabToFocus:f,siblingTabHasFocus:p,handleMeasurement:b}){const a=n.useRef(null),i=n.useRef(null),u=n.useCallback(()=>{i.current&&cancelAnimationFrame(i.current),i.current=requestAnimationFrame(()=>{if(!a.current)return;const v=a.current.offsetWidth-20-28,P=a.current.children,C=Array.from(P).map(M=>Math.ceil(M.getBoundingClientRect().width)+4),c=C.pop()||0;b({containerWidth:v,disclosureWidth:c,hiddenTabWidths:C})})},[b]);n.useEffect(()=>{u()},[u,o]),tt(()=>{});const d=o.map((v,P)=>e.createElement(ie,{measuring:!0,key:`$${v.id}Hidden`,id:`${v.id}Measurer`,siblingTabHasFocus:p,focused:P===f,selected:P===r,url:v.url,content:v.content,onTogglePopover:Fe,onToggleModal:Fe})),h=S(m.Tabs,m.TabsMeasurer);return Oe("resize",u),e.createElement("div",{className:h,ref:a},d,T)});function Fe(){}function We({hidden:t,id:r,tabID:o,children:T}){const f=S(m.Panel,t&&m["Panel-hidden"]);return e.createElement("div",{className:f,id:r,role:"tabpanel","aria-labelledby":o,tabIndex:-1},T)}const mt=n.memo(function({id:r,focused:o,children:T,url:f,accessibilityLabel:p,onClick:b=ft}){const a=n.useRef(null);n.useEffect(()=>{a.current&&a.current instanceof HTMLElement&&o&&a.current.focus()},[a,o]);const i=S(m.Item),u={id:r,ref:a,onClick:b,className:i,"aria-selected":!1,"aria-label":p},d=f?e.createElement(Ze,Object.assign({},u,{url:f}),T):e.createElement("button",Object.assign({},u,{ref:a,type:"button"}),T);return e.createElement("li",null,d)});function ft(){}function bt({focusIndex:t,disclosureTabs:r,onClick:o=Se,onKeyPress:T=Se}){const f=r.map(({id:p,content:b,...a},i)=>e.createElement(mt,Object.assign({key:p},a,{id:p,focused:i===t,onClick:o.bind(null,p)}),b));return e.createElement("ul",{className:m.List,onKeyDown:Tt,onKeyUp:T},f)}function Se(){}function Tt(t){const{key:r}=t;(r==="ArrowLeft"||r==="ArrowRight")&&(t.preventDefault(),t.stopPropagation())}const Re=40;function ht({activator:t,open:r,onClose:o,onClickPrimaryAction:T,onClickSecondaryAction:f,viewNames:p}){const b=X(),[a,i]=n.useState(""),[u,d]=n.useState(!1),h=n.useRef(null),v=lt(),P=p.some(w=>w.trim().toLowerCase()===a.trim().toLowerCase()),E=!a||P||u||a.length>Re;n.useEffect(()=>{if(!(!h.current||v)&&r){G(h.current);const w=setTimeout(()=>{h.current&&G(h.current)},50);return()=>clearTimeout(w)}},[r,v]);const C=n.useCallback(w=>{i(w)},[]);async function c(){P||E||(d(!0),await T(a),d(!1),i(""),o())}function M(){f==null||f(),i(""),o()}return e.createElement(H,{activator:t,open:r,onClose:o,title:b.translate("Polaris.Tabs.CreateViewModal.title"),primaryAction:{content:b.translate("Polaris.Tabs.CreateViewModal.create"),onAction:c,disabled:E},secondaryActions:[{content:b.translate("Polaris.Tabs.CreateViewModal.cancel"),onAction:M}]},e.createElement(H.Section,null,e.createElement(De,{onSubmit:c},e.createElement(Ae,null,e.createElement("div",{ref:h},e.createElement(we,{label:b.translate("Polaris.Tabs.CreateViewModal.label"),value:a,onChange:C,autoComplete:"off",maxLength:Re,showCharacterCount:!0,error:P?b.translate("Polaris.Tabs.CreateViewModal.errors.sameName",{name:a}):void 0}))))))}const pt="create-new-view",Ct=({tabs:t,children:r,selected:o,newViewAccessibilityLabel:T,canCreateNewView:f,disabled:p,onCreateNewView:b,onSelect:a,fitted:i,disclosureText:u})=>{const d=X(),{mdDown:h}=st(),v=n.useRef(null),P=n.useRef(null),E=n.useRef(null),[C,c]=n.useReducer((s,l)=>({...s,...l}),{disclosureWidth:0,containerWidth:1/0,tabWidths:[],visibleTabs:[],hiddenTabs:[],showDisclosure:!1,tabToFocus:-1,isNewViewModalActive:!1,modalSubmitted:!1,isTabsFocused:!1,isTabPopoverOpen:!1,isTabModalOpen:!1}),{tabToFocus:M,visibleTabs:w,hiddenTabs:j,showDisclosure:K,isNewViewModalActive:D,modalSubmitted:x,disclosureWidth:ae,tabWidths:R,containerWidth:J,isTabsFocused:Q,isTabModalOpen:N,isTabPopoverOpen:I}=C,$=_e(N),O=_e(I);n.useEffect(()=>{$&&!N?c({isTabsFocused:!0,tabToFocus:o}):O&&!I&&!N&&c({isTabsFocused:!0,tabToFocus:o})},[O,I,$,N,o,M]);const _=n.useCallback(s=>c({isTabPopoverOpen:s}),[]),L=n.useCallback(s=>c({isTabModalOpen:s}),[]),U=()=>{c({isNewViewModalActive:!1})},Y=async s=>{if(!b)return!1;const l=await(b==null?void 0:b(s));return l&&c({modalSubmitted:!0}),l},ue=()=>{c({isNewViewModalActive:!0})},B=n.useCallback(s=>{const l=t.find(A=>A.id===s);if(l==null)return null;const g=t.indexOf(l);a==null||a(g)},[t,a]),de=n.useCallback((s,l)=>{const g=()=>{var F;B(s.id),(F=s.onAction)==null||F.call(s)},A=t.map(({content:F})=>F),V=s.panelID||`${s.id}-panel`;return e.createElement(ie,Object.assign({},s,{key:`${l}-${s.id}`,id:s.id,panelID:r?V:void 0,disabled:p||s.disabled,siblingTabHasFocus:M>-1,focused:l===M,selected:l===o,onAction:g,accessibilityLabel:s.accessibilityLabel,url:s.url,content:s.content,onToggleModal:L,onTogglePopover:_,viewNames:A,ref:l===o?E:null}))},[p,B,t,r,o,M,L,_]),me=n.useCallback(s=>{const l=s.target,g=l.classList.contains(m.Item),A=l.closest("[data-tabs-focus-catchment]")||g;l.classList.contains(m.DisclosureActivator)||!A||c({isTabsFocused:!0})},[]),fe=n.useCallback(s=>{var te,Z,W;const l=s.target,g=s.relatedTarget,A=(te=g==null?void 0:g.closest)==null?void 0:te.call(g,`.${m.Tabs}`),V=(W=(Z=l==null?void 0:l.classList)==null?void 0:Z.contains)==null?void 0:W.call(Z,m.Tab),F=g==null?void 0:g.classList.contains(m.Item);if(!g&&!N&&!V&&!F){c({tabToFocus:-1});return}if(!A&&!N&&!V&&!F){c({tabToFocus:-1});return}c({isTabsFocused:!1})},[N]),be=s=>{if(I||N||D)return;const{key:l}=s;(l==="ArrowLeft"||l==="ArrowRight")&&(s.preventDefault(),s.stopPropagation())};n.useEffect(()=>{const{visibleTabs:s,hiddenTabs:l}=Le(t,o,ae,R,J);c({visibleTabs:s,hiddenTabs:l})},[J,ae,t,o,R,c]);const ne=n.useCallback(()=>{var l;const s=(l=E.current)==null?void 0:l.querySelector(`.${m["Tab-active"]}`);s&&ve(s.offsetLeft)},[]);n.useEffect(()=>{h&&ne()},[ne,o,h]),n.useEffect(()=>{Q&&!K&&c({tabToFocus:o})},[Q,o,c,K]);const se=s=>{const{showDisclosure:l,visibleTabs:g,hiddenTabs:A,tabToFocus:V,isNewViewModalActive:F}=C;if(N||I||F)return;const te=s.key,Z=l||h?g.concat(A):[...g];let W=Z.indexOf(V);te==="ArrowRight"&&(W+=1,W===Z.length&&(W=0)),te==="ArrowLeft"&&(W===-1||W===0?W=Z.length-1:W-=1);const Ie=Z[W];Ie!=null&&c({tabToFocus:Ie})},Te=()=>{c({showDisclosure:!K,tabToFocus:j[0]})},ee=()=>{c({showDisclosure:!1})},he=n.useCallback(s=>{const{hiddenTabWidths:l,containerWidth:g,disclosureWidth:A}=s,{visibleTabs:V,hiddenTabs:F}=Le(t,o,A,l,g);c({visibleTabs:V,hiddenTabs:F,disclosureWidth:A,containerWidth:g,tabWidths:l})},[t,o,c]),pe=s=>{B(s),ee(),c({isTabsFocused:!0})},ve=s=>{setTimeout(()=>{var l,g;if(v.current&&typeof v.current.scroll=="function"){const A=((l=P==null?void 0:P.current)==null?void 0:l.offsetLeft)||0;(g=v==null?void 0:v.current)==null||g.scroll({left:s-A})}},0)},oe=T||d.translate("Polaris.Tabs.newViewAccessibilityLabel"),q=h?[...w,...j]:w,re=q.sort((s,l)=>s-l).filter(s=>t[s]).map(s=>de(t[s],s)),z=w.length<t.length&&!h,Ee=S(m.Tabs,i&&m.fitted,z&&m.fillSpace),Pe=S(m.Wrapper,f&&m.WrapperWithNewButton),le=S(m.DisclosureTab,z&&m["DisclosureTab-visible"]),y=S(m.DisclosureActivator),k=e.createElement(e.Fragment,null,e.createElement(Ce,{as:"span",variant:"bodySm",fontWeight:"medium"},u??d.translate("Polaris.Tabs.toggleTabsLabel")),e.createElement("div",{className:S(m.IconWrap,z&&K&&m["IconWrap-open"])},e.createElement(ge,{source:Be,tone:"subdued"}))),ce=e.createElement($e,{type:"button",className:y,onClick:Te,"aria-label":u??d.translate("Polaris.Tabs.toggleTabsLabel"),disabled:p},k),ye=j.map(s=>t[s]),ze=t.map(({content:s})=>s),Ge=e.createElement(dt,{tabToFocus:M,activator:ce,selected:o,tabs:t,siblingTabHasFocus:M>-1,handleMeasurement:he}),Ne=e.createElement(ie,{id:pt,content:oe,actions:[],onAction:ue,onFocus:()=>{x&&c({tabToFocus:o,modalSubmitted:!1})},icon:e.createElement(ge,{source:Ue,accessibilityLabel:oe}),disabled:p,onTogglePopover:_,onToggleModal:L,tabIndexOverride:0}),Xe=r?t.map((s,l)=>o===l?e.createElement(We,{id:t[l].panelID||`${t[l].id}-panel`,tabID:t[l].id,key:t[l].id},r):e.createElement(We,{id:t[l].panelID||`${t[l].id}-panel`,tabID:t[l].id,key:t[l].id,hidden:!0})):null;return e.createElement("div",{className:m.Outer},e.createElement(at,{padding:{md:"200"}},Ge,e.createElement("div",{className:Pe,ref:v},e.createElement("div",{className:m.ButtonWrapper,ref:P},e.createElement("ul",{role:re.length>0?"tablist":void 0,className:Ee,onFocus:me,onBlur:fe,onKeyDown:be,onKeyUp:se,"data-tabs-focus-catchment":!0},re,h||q.length===0?null:e.createElement("li",{className:le,role:"presentation"},e.createElement(Ve,{preferredPosition:"below",preferredAlignment:"left",activator:ce,active:z&&K,onClose:ee,autofocusTarget:"first-node"},e.createElement(bt,{focusIndex:j.indexOf(M),disclosureTabs:ye,onClick:pe,onKeyPress:se})))),f&&q.length>0?e.createElement("div",{className:m.NewTab},e.createElement(ht,{open:D,onClose:U,onClickPrimaryAction:Y,viewNames:ze,activator:p?Ne:e.createElement("div",null,e.createElement(nt,{content:d.translate("Polaris.Tabs.newViewTooltip"),preferredPosition:"above",hoverDelay:400},Ne))})):null))),Xe)};export{Ct as T};
