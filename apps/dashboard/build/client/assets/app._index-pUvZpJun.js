import{r as T,j as e}from"./index-DZoorY08.js";import{r as B,D as $,w as g,a as z,b as H}from"./date-range-CLhjUUo2.js";import{u as N,b as G,c as F,d as U,e as K}from"./components-CTA1UUXK.js";import{C as o,b as t,T as a,c as D,P as V,I as r,B as p,d as Y}from"./Page-CO1VPtMw.js";import{P as q}from"./PolarisVizProvider-BMFajI3Y.js";import{T as Q}from"./TitleBar-DFMSJ8Yc.js";import{B as J}from"./Banner-DCanv2aO.js";import{I as W}from"./InlineGrid-Bklo_vep.js";import{L as c}from"./Layout-Drv8ZkBJ.js";import{S as l,a as h,b as X}from"./SkeletonThumbnail-0ezpmZgf.js";import"./context-CVB7tZr2.js";const Z=H.filter(s=>s!=="14d"),ee={today:"7d","7d":"7d","14d":"14d","28d":"28d","90d":"90d"};function Se(){const{data:s,useMockData:v,scenario:w,mcp:m}=N(),[S]=G(),E=F(),M=U(),L=K(),A=T.useRef(null),d=B(S.get("range"),s.range??$),f=M.location,x=M.state!=="idle"&&(f==null?void 0:f.pathname)==="/app",j={searchParams:S},b=(()=>{const n=g("/app/sales",d,j),i=new URL(n,"https://dashboard.internal");return i.searchParams.set("period",ee[d]??"28d"),`${i.pathname}${i.search}${i.hash}`})(),y=()=>{!b||A.current===b||(A.current=b,L.load(b))},O=n=>{const i=new URLSearchParams(S);i.set("range",n),E(`?${i.toString()}`,{replace:!0})},C=s.sparkline.map((n,i)=>({key:i,value:n})),R=s.rangeLabel??z[d].label,I=s.metrics.length||4,_=x?Array.from({length:I},(n,i)=>e.jsx(o,{children:e.jsx(P,{})},`metric-skeleton-${i}`)):s.metrics.map(n=>e.jsx(o,{children:e.jsxs(t,{gap:"100",children:[e.jsx(a,{as:"span",variant:"bodySm",tone:"subdued",children:n.label}),e.jsx(a,{as:"p",variant:"headingLg",children:n.value}),e.jsx(D,{tone:n.delta>=0?"success":"critical",children:`${re(n.delta)} ${n.deltaPeriod}`})]})},n.id));return e.jsx(q,{children:e.jsxs(V,{children:[e.jsx(Q,{title:"Operations dashboard"}),e.jsxs(t,{gap:"500",children:[v&&e.jsx(J,{title:`Mock data scenario: ${w}`,tone:w==="warning"?"warning":"info",children:e.jsx("p",{children:"Change the `mockState` query parameter (base, empty, warning, error) to preview different UI permutations."})}),e.jsx(o,{children:e.jsxs(t,{gap:"200",children:[e.jsxs(r,{align:"space-between",blockAlign:"center",children:[e.jsx(a,{as:"h2",variant:"headingLg",children:"Sales overview"}),e.jsxs(r,{gap:"200",blockAlign:"center",children:[e.jsx(p,{variant:"plain",url:b,onMouseEnter:y,onFocus:y,onTouchStart:y,children:"View sales"}),e.jsx(Y,{children:Z.map(n=>e.jsx(p,{pressed:d===n,onClick:()=>O(n),children:n.toUpperCase()},n))}),e.jsx(a,{as:"span",tone:"subdued",variant:"bodySm",children:R})]})]}),e.jsx(W,{columns:{xs:1,sm:2,lg:4},gap:"300",children:_}),x?e.jsx(le,{}):e.jsx(te,{points:C,rangeLabel:R})]})}),e.jsxs(c,{children:[e.jsx(c.Section,{children:e.jsx(o,{title:"Orders attention",children:e.jsx(t,{gap:"300",children:x?Array.from({length:s.orders.length||3},(n,i)=>e.jsx(se,{},`order-skeleton-${i}`)):s.orders.map(n=>e.jsxs(r,{align:"space-between",blockAlign:"center",children:[e.jsxs(t,{gap:"050",children:[e.jsx(a,{as:"p",variant:"headingMd",children:n.label}),e.jsx(a,{as:"span",variant:"bodySm",tone:"subdued",children:n.description})]}),e.jsxs(r,{gap:"200",blockAlign:"center",children:[e.jsx(a,{as:"span",variant:"headingMd",children:n.count}),e.jsx(p,{url:g(n.href,d,j),accessibilityLabel:`View ${n.label}`,children:"Open"})]})]},n.id))})})}),e.jsx(c.Section,{children:e.jsx(o,{title:"Inbox",children:x?e.jsx(ne,{}):e.jsxs(t,{gap:"200",children:[e.jsxs(r,{align:"space-between",children:[e.jsx(a,{variant:"bodyMd",as:"span",children:"Outstanding"}),e.jsx(a,{variant:"headingMd",as:"span",children:s.inbox.outstanding})]}),e.jsxs(r,{align:"space-between",children:[e.jsx(a,{variant:"bodyMd",as:"span",children:"Overdue >12h"}),e.jsx(a,{variant:"headingMd",as:"span",children:s.inbox.overdueHours})]}),e.jsxs(r,{align:"space-between",children:[e.jsx(a,{variant:"bodyMd",as:"span",children:"AI approvals pending"}),e.jsx(a,{variant:"headingMd",as:"span",children:s.inbox.approvalsPending})]}),e.jsx(p,{url:g("/app/inbox",d,j),tone:"primary",variant:"plain",children:"Go to inbox"})]})})})]}),e.jsx(c,{children:e.jsx(c.Section,{children:e.jsx(o,{title:"Inventory snapshot",children:x?e.jsxs(t,{gap:"200",children:[e.jsx(r,{gap:"400",children:Array.from({length:3},(n,i)=>e.jsx(P,{},`inventory-skeleton-${i}`))}),e.jsx(l,{size:"small"})]}):e.jsxs(e.Fragment,{children:[e.jsxs(r,{gap:"400",children:[e.jsx(k,{label:"Low stock",value:s.inventory.lowStock}),e.jsx(k,{label:"POs in flight",value:s.inventory.purchaseOrdersInFlight}),e.jsx(k,{label:"Overstock",value:s.inventory.overstock})]}),e.jsx(p,{url:g("/app/inventory",d,j),accessibilityLabel:"View inventory planner",children:"Open inventory planner"})]})})})}),e.jsxs(c,{children:[e.jsx(c.Section,{children:e.jsx(o,{title:"SEO highlights",children:x?e.jsx(ae,{}):e.jsxs(t,{gap:"200",children:[e.jsx(a,{as:"span",variant:"bodyMd",children:"Traffic Δ"}),e.jsxs(D,{tone:"success",children:["+",s.seo.trafficDelta,"%"]}),e.jsx(a,{as:"p",variant:"bodySm",children:s.seo.summary}),e.jsxs(r,{gap:"300",children:[e.jsx(a,{variant:"bodyMd",as:"span",children:"Rising queries"}),e.jsx(a,{variant:"headingMd",as:"span",children:s.seo.risingQueries})]}),e.jsxs(r,{gap:"300",children:[e.jsx(a,{variant:"bodyMd",as:"span",children:"Rising pages"}),e.jsx(a,{variant:"headingMd",as:"span",children:s.seo.risingPages})]}),e.jsxs(r,{gap:"300",children:[e.jsx(a,{variant:"bodyMd",as:"span",children:"Critical issues"}),e.jsx(a,{variant:"headingMd",tone:"critical",as:"span",children:s.seo.criticalIssues})]}),e.jsx(p,{url:g("/app/seo",d,j),variant:"plain",children:"Dive into SEO"})]})})}),e.jsx(c.Section,{children:e.jsx(o,{title:"MCP insight",children:x?e.jsx(ie,{}):e.jsxs(t,{gap:"200",children:[e.jsx(a,{as:"p",variant:"bodyMd",children:s.mcpRecommendation}),!m.enabled&&e.jsx(a,{as:"p",variant:"bodySm",tone:"subdued",children:"Configure credentials and enable the MCP toggle in Settings to load live data."}),m.usingMocks&&e.jsx(a,{as:"p",variant:"bodySm",tone:"subdued",children:"Showing mock data while `USE_MOCK_DATA` is enabled."}),m.generatedAt&&e.jsxs(a,{as:"p",variant:"bodySm",tone:"subdued",children:["Last updated ",new Date(m.generatedAt).toLocaleString()," • ",m.source??"mock"]}),e.jsx(p,{url:g("/app/settings",d,j),variant:"plain",children:"Manage MCP toggles"})]})})})]})]})]})})}function k({label:s,value:v}){return e.jsxs(t,{gap:"050",children:[e.jsx(a,{as:"span",variant:"bodySm",tone:"subdued",children:s}),e.jsx(a,{as:"span",variant:"headingMd",children:v})]})}function P(){return e.jsxs(t,{gap:"050",children:[e.jsx(h,{lines:1}),e.jsx(l,{size:"small"})]})}function se(){return e.jsxs(r,{align:"space-between",blockAlign:"center",gap:"200",children:[e.jsx("div",{style:{flex:1},children:e.jsxs(t,{gap:"050",children:[e.jsx(l,{size:"small"}),e.jsx(h,{lines:1})]})}),e.jsxs(r,{gap:"200",blockAlign:"center",children:[e.jsx(l,{size:"small"}),e.jsx(l,{size:"small"})]})]})}function u(){return e.jsxs(r,{align:"space-between",blockAlign:"center",gap:"200",children:[e.jsx("div",{style:{flex:1},children:e.jsx(h,{lines:1})}),e.jsx(l,{size:"small"})]})}function ne(){return e.jsxs(t,{gap:"200",children:[e.jsx(u,{}),e.jsx(u,{}),e.jsx(u,{}),e.jsx(l,{size:"small"})]})}function ae(){return e.jsxs(t,{gap:"200",children:[e.jsx(h,{lines:1}),e.jsx(l,{size:"small"}),e.jsx(h,{lines:2}),e.jsx(u,{}),e.jsx(u,{}),e.jsx(u,{}),e.jsx(l,{size:"small"})]})}function ie(){return e.jsxs(t,{gap:"200",children:[e.jsx(h,{lines:2}),e.jsx(h,{lines:1}),e.jsx(h,{lines:1}),e.jsx(l,{size:"small"})]})}const re=s=>`${s>0?"+":""}${s.toFixed(1)}%`;function te({points:s,rangeLabel:v}){return s.length?e.jsx("div",{style:{width:"100%",height:160},children:e.jsx("div",{style:{width:"100%",height:"100%",backgroundColor:"#f6f6f7",borderRadius:"4px",display:"flex",alignItems:"center",justifyContent:"center",color:"#6d7175"},children:"Sales trend chart (disabled for SSR compatibility)"})}):e.jsx("div",{style:{width:"100%",height:160},children:e.jsx("div",{style:{width:"100%",height:"100%",backgroundColor:"#f6f6f7",borderRadius:"4px",display:"flex",alignItems:"center",justifyContent:"center",color:"#6d7175"},children:"Sales trend data unavailable."})})}function le(){return e.jsx("div",{style:{width:"100%",height:160,display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(X,{size:"extraLarge"})})}export{Se as default};
