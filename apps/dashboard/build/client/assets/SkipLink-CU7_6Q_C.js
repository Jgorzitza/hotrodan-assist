import{r as m,j as h,b as _t,g as Ce}from"./index-DZoorY08.js";import{m as Ae,l as Se,Y as xt,K as be,N as De,O as Lt,c as je,F as It,J as Ct,X as Zt,k as Jt,Q as Ne,R as Qt,j as q,w as tt,I as F,T as Pe}from"./PolarisVizProvider-BMFajI3Y.js";import{l as At,u as k,i as jt,N as J,a as R,e as it,g as Me,S as ut,r as te,U as ee,q as yt,k as ke,V as U,L as Re,W as Oe,s as ne,v as dt,X as oe,P as $e,T as Be,_ as Fe,t as $,$ as ie,a0 as We,j as se,o as re,a1 as Ge,x as He}from"./ChartContainer-DSIix7Zm.js";function Ve(t,e){let n,o=-1,s=-1;if(e===void 0)for(const i of t)++s,i!=null&&(n<i||n===void 0&&i>=i)&&(n=i,o=s);else for(let i of t)(i=e(i,++s,t))!=null&&(n<i||n===void 0&&i>=i)&&(n=i,o=s);return o}function ae(t){return Object.entries(t).filter(([e,n])=>n!=null).reduce((e,[n,o])=>({...e,[n]:o}),{})}function Ye({yScale:t,maxTicks:e,maxValue:n}){const o=t.copy().nice(e).ticks(e),s=o[o.length-1],i=o[o.length-2],r=(s-i)/2;return n-i>r}function ze(t,e){var n;if(e instanceof At){var o;return(o=e(Number(t)))!==null&&o!==void 0?o:0}return(n=e(`${t}`))!==null&&n!==void 0?n:0}function Xe(t,e){return t>=Math.min(...e)&&t<=Math.max(...e)}const Ue=80;function Ko({drawableHeight:t,formatYAxisLabel:e,integersOnly:n=!1,max:o,min:s,shouldRoundUp:i=!0,verticalOverflow:r=!0,fixedWidth:a,maxYOverride:c,ticksOverride:u}){const{characterWidths:l}=k();if(c!=null&&c<0)throw new Error("maxYOverride must be a non-negative number.");const[d,f]=m.useMemo(()=>{const x=s===0&&o===0,y=s;let w=x?Ae:o;return c!=null&&x&&(w=c),n?[Math.floor(y),Math.ceil(w)]:[y,w]},[s,o,n,c]);if(jt(f)||jt(d))throw new Error("Data must be finite.");const{yScale:g,ticks:v,yAxisLabelWidth:p}=m.useMemo(()=>{const x=Math.max(1,Math.ceil(t/Ue)),y=At().range([t,0]).domain([Math.min(0,d),Math.max(0,f)]);if(!r||i&&Ye({yScale:y,maxValue:f,maxTicks:x}))y.nice(x);else{const _=y.copy().nice(x).ticks(x)[0];y.domain([Math.min(_,d),Math.max(0,f)])}const T=E().map(_=>({value:_,formattedValue:e(_),yOffset:y(_)})),I=Ve(T,({formattedValue:_})=>_==null?0:_.length),L=T[I]?T[I].formattedValue:"",C=J(L,l);return{yScale:y,ticks:T,yAxisLabelWidth:C};function E(){return u??(n?y.ticks(x).filter(_=>Number.isInteger(_)):y.ticks(x))}},[r,i,l,t,e,n,f,d,u]);return{yScale:g,ticks:v,yAxisLabelWidth:qe(p,a)}}function qe(t,e){return e===!1||e==null?t:e}function Zo({annotationsHeight:t,height:e,width:n,xAxisHeight:o,yAxisWidth:s}){const{grid:{horizontalMargin:i}}=R(),r=i+s+xt,a=Se.Top+t,c=o===0?be:De,u=e-a-o-c,l=n-r-i;return{chartXPosition:r,chartYPosition:a,drawableHeight:u,drawableWidth:l,xAxisBounds:{x:r,y:u+c+a},yAxisBounds:{x:i,y:a}}}function Nt(t,e){if((r=t.length)>1)for(var n=1,o,s,i=t[e[0]],r,a=i.length;n<r;++n)for(s=i,i=t[e[n]],o=0;o<a;++o)i[o][1]+=i[o][0]=isNaN(s[o][1])?s[o][0]:s[o][1]}function pt(t){for(var e=t.length,n=new Array(e);--e>=0;)n[e]=e;return n}function Ke(t,e){return t[e]}function Ze(t){const e=[];return e.key=t,e}function Je(){var t=it([]),e=pt,n=Nt,o=Ke;function s(i){var r=Array.from(t.apply(this,arguments),Ze),a,c=r.length,u=-1,l;for(const d of i)for(a=0,++u;a<c;++a)(r[a][u]=[0,+o(d,r[a].key,u,i)]).data=d;for(a=0,l=Me(e(r));a<c;++a)r[l[a]].index=a;return n(r,l),r}return s.keys=function(i){return arguments.length?(t=typeof i=="function"?i:it(Array.from(i)),s):t},s.value=function(i){return arguments.length?(o=typeof i=="function"?i:it(+i),s):o},s.order=function(i){return arguments.length?(e=i==null?pt:typeof i=="function"?i:it(Array.from(i)),s):e},s.offset=function(i){return arguments.length?(n=i??Nt,s):n},s}function Qe(t,e){if((c=t.length)>0)for(var n,o=0,s,i,r,a,c,u=t[e[0]].length;o<u;++o)for(r=a=0,n=0;n<c;++n)(i=(s=t[e[n]][o])[1]-s[0])>0?(s[0]=r,s[1]=r+=i):i<0?(s[1]=a,s[0]=a+=i):(s[0]=0,s[1]=i)}function tn({data:t,tooltipOptions:e}){const{keyFormatter:n,valueFormatter:o,titleFormatter:s}={keyFormatter:r=>`${r}`,valueFormatter:r=>`${r}`,titleFormatter:r=>`${r}`,...e};return{formattedData:t.data.map(r=>{const a=r.shape,c=r.data.filter(u=>u.value!==null);return{shape:a,data:c.map(u=>({...u,key:n(u.key),value:o(u.value)}))}}),title:t.title?s(t.title):void 0}}function en({activeColorVisionIndex:t,comparisonSeriesIndexes:e,index:n}){if(e.length===0)return!1;const o=e.find(({comparisonIndex:s})=>s===n);return o==null?!1:o.comparisonIndex===n&&t!==o.originalIndex}function nn(t=[]){const{characterWidths:e}=k(),n=[];if(t.length===0)return{keyWidth:0,valueWidth:0};t.forEach(({data:i})=>{i.length?i.forEach(({key:r,value:a})=>{const c=J(r,e),u=J(a,e);n.push({width:c+u,keyWidth:c,valueWidth:u})}):n.push({width:0,keyWidth:0,valueWidth:0})});const{keyWidth:o,valueWidth:s}=n.reduce((i,r)=>i.width<r.width?r:i,n[0]);return{keyWidth:o,valueWidth:s}}const on=48,sn=10,rn=2;function an(t){const e=t.data.some(({trend:o})=>o!=null),n=t.data.some(({color:o})=>o!=null);return rn+(n?1:0)+(e?1:0)}var ln={Container:"_Container_no9uw_1"};function cn(t){return t.charAt(0).toUpperCase()+t.slice(1)}function ft(t,e){return t[`${Lt.camelCaseName}${cn(e)}`]}function wt(t,e){return`${t}:${Lt.name}:${e}`}function le(t){const e=m.useRef(null);return e.current||(e.current=Pt.create()),Pt.update(e.current,t),e.current}const Pt={create(){const t=(...e)=>t.callback(...e);return t},update(t,e){t.callback=e}};function St({type:t,onIndexChange:e,enabled:n=!0}){const o=le(e),{id:s}=k();m.useEffect(()=>{if(!s||!n)return;const i=wt(s,t);return window.addEventListener(i,o),()=>{window.removeEventListener(i,o)}},[s,t,o,n])}function un({children:t,maxWidth:e,theme:n,color:o,ignoreColorVisionEvents:s=!1,minWidth:i}){const{isFirefox:r}=ut(),a=R(n),[c,u]=m.useState(-1),l=m.useRef(0);return St({type:je,onIndexChange:({detail:d})=>{window.clearTimeout(l.current),d.index===-1?l.current=window.setTimeout(()=>{u(-1)},100):u(d.index)},enabled:!s}),h.jsx("div",{className:ln.Container,style:{background:o||te(a.tooltip.backgroundColor,r?1:ee),maxWidth:e,minWidth:i,fontFamily:It},children:t({activeColorVisionIndex:c})})}var dn={Title:"_Title_tq23h_1"};function hn({children:t,theme:e,color:n}){const o=R(e);return h.jsx("p",{className:dn.Title,style:{color:n??o.tooltip.titleColor},children:t})}var fn={Series:"_Series_1anxb_1"},mn={AxisTitle:"_AxisTitle_ahut2_1"};function gn({children:t,theme:e}){const n=R(e);return h.jsx("p",{className:mn.AxisTitle,style:{color:n.tooltip.titleColor,fontSize:Ct},children:t})}function vn({children:t,templateColumnCount:e=2,name:n}){const{theme:o}=k();return h.jsxs(m.Fragment,{children:[n!=null&&h.jsx(gn,{theme:o,children:n}),h.jsx("div",{className:fn.Series,style:{gridTemplateColumns:`repeat(${e}, auto)`},children:t})]})}var st={Row:"_Row_1fg2f_144",Value:"_Value_1fg2f_154",Truncate:"_Truncate_1fg2f_161",Trend:"_Trend_1fg2f_167"};const xn=(t,e)=>{const n=t.map(({color:o,offset:s})=>`${o} ${s}%`);return`linear-gradient(${e}deg, ${n.join(",")})`};function yn(t,e=90){return yt(t)?xn(t,e):t}var pn={ColorPreview:"_ColorPreview_1wdtl_144"};const wn=305,Mt=8;function En({color:t}){const e=yn(t,wn);return h.jsx("span",{className:pn.ColorPreview,style:{background:e,height:Mt,width:Mt}})}const kt=1,Tn=1,_n=5;var Rt={Container:"_Container_8b5v1_1",SVG:"_SVG_8b5v1_5"};const mt=2,Ln=2;function In({color:t,lineStyle:e,width:n=Ln,strokeDasharray:o="none"}){const s=m.useRef(ke("linePreviewGradient")),i=yt(t)?`url(#${s.current})`:t;return h.jsx("span",{className:Rt.Container,style:{height:mt,width:U},children:h.jsxs("svg",{className:Rt.SVG,height:`${mt}px`,viewBox:`0 0 ${U} ${mt}`,width:`${U}px`,xmlns:Zt,children:[yt(t)?h.jsx("defs",{children:h.jsx(Re,{id:s.current,gradient:t,x1:"0%",x2:"100%",y1:"0%",y2:"0%",gradientUnits:"userSpaceOnUse"})}):null,Cn({color:i,lineStyle:e,width:n,strokeDasharray:o})]})})}function Cn({color:t,lineStyle:e,width:n,strokeDasharray:o}){switch(e){case"dotted":return h.jsx("g",{fill:t,children:[...Array(3)].map((s,i)=>h.jsx("circle",{cx:kt+i*_n,cy:kt,r:Tn},i))});case"dashed":return h.jsx("path",{d:`M1 1 H${U}`,stroke:t,strokeLinejoin:"round",strokeLinecap:"round",strokeWidth:n,strokeDasharray:Oe});default:return h.jsx("path",{d:`M1 1 H${U}`,stroke:t,strokeLinejoin:"round",strokeLinecap:"round",strokeWidth:n,strokeDasharray:o})}}function ce({color:t,lineStyle:e,shape:n="Bar"}){switch(n){case"Line":{const o=e??"solid";return h.jsx(In,{color:t,lineStyle:o})}default:return h.jsx(En,{color:t})}}const ct=11,An=2,ue=4,Et=5.5,Jo=450,rt=16,Sn=3;function bn(t,e,n){const o=t?ne(t,e,n):ct;return{totalWidth:Math.round(Et+ue+o),textWidth:o}}var Dn={SVG:"_SVG_186th_144"};function Ot({accessibilityLabel:t,children:e,height:n,width:o,tabIndex:s=0}){const i=t!=null;return h.jsxs("svg",{viewBox:`0 0 ${o} ${n}`,height:n,width:o,role:i?"img":void 0,className:Dn.SVG,tabIndex:s,children:[i&&h.jsx("title",{children:t}),e]})}function jn(){return h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"6",height:"6",fill:"none",viewBox:"0 0 6 6",children:h.jsx("path",{fill:"currentColor",fillRule:"evenodd",d:"M1 .25a.75.75 0 1 0 0 1.5h2.19L.594 4.345a.75.75 0 0 0 1.06 1.06L4.25 2.811V5a.75.75 0 0 0 1.5 0V1A.748.748 0 0 0 5 .25H1Z",clipRule:"evenodd"})})}function Nn(){return h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"6",height:"6",fill:"none",viewBox:"0 0 6 6",children:h.jsx("path",{fill:"currentColor",fillRule:"evenodd",d:"M5.75 1a.75.75 0 0 0-1.5 0v2.19L1.655.594a.75.75 0 1 0-1.06 1.06L3.189 4.25H1a.75.75 0 0 0 0 1.5h4a.748.748 0 0 0 .529-.218l.001-.002.002-.001A.748.748 0 0 0 5.75 5V1Z",clipRule:"evenodd"})})}const $t=650;function Pn({accessibilityLabel:t,direction:e="upward",tabIndex:n=-1,theme:o="Light",trend:s="neutral",value:i}){const r=R(o),a=dt(),c={accessibilityLabel:t,height:rt,tabIndex:n};if(i==null)return h.jsx(Ot,{...c,width:ct,children:h.jsx("path",{d:"M0.519531 1.79395H12.0039V0.249023H0.519531V1.79395Z",fill:r.trendIndicator.neutral,transform:`translate(${(ct-ct)/2}, ${(rt-An)/2})`})});const{textWidth:u,totalWidth:l}=bn(i,a,$t);return h.jsx(Ot,{...c,width:l,children:h.jsxs("g",{color:r.trendIndicator[s],children:[h.jsx("g",{transform:`translate(0, ${(rt-Et)/2})`,children:e==="upward"?h.jsx(jn,{}):h.jsx(Nn,{})}),h.jsx("text",{x:Et+ue,y:(rt+Sn)/2,fontSize:a,fill:"currentColor",fontWeight:$t,dominantBaseline:"middle",fontFamily:It,textRendering:"geometricPrecision",width:u,children:i})]})})}function Mn({color:t,isComparison:e=!1,label:n,renderSeriesIcon:o,shape:s,trend:i,value:r}){var a;const c=R();return h.jsxs("div",{className:st.Row,children:[t!=null&&h.jsx("div",{style:{width:U},children:(a=o==null?void 0:o())!==null&&a!==void 0?a:h.jsx(ce,{color:t,shape:s,lineStyle:e?"dotted":"solid"})}),h.jsx("span",{className:st.Truncate,style:{color:c.tooltip.textColor,marginRight:sn},children:n}),h.jsx("span",{className:st.Value,style:{color:c.tooltip.textColor},children:r}),i!=null&&h.jsx("div",{className:st.Trend,children:h.jsx(Pn,{...i})})]})}const Bt=1.061,kn=14;function Rn({data:t,theme:e=Jt,title:n,ignoreColorVisionEvents:o=!1}){var s;const{keyWidth:i,valueWidth:r}=nn(t),{comparisonSeriesIndexes:a}=k(),c=i*Bt,u=r*Bt,l=((s=t[0])===null||s===void 0?void 0:s.data.length)>2;return h.jsx(un,{maxWidth:kn+c+on+u,theme:e,ignoreColorVisionEvents:o,children:({activeColorVisionIndex:d})=>h.jsxs(m.Fragment,{children:[n!=null&&h.jsx(hn,{theme:e,children:n}),t.map((f,g)=>{const{data:v,name:p,shape:x}=f;return!(p!=null)&&v.length===0?null:h.jsx(vn,{name:p,templateColumnCount:an(f),children:v.map(({key:T,value:I,color:L,isComparison:C,isHidden:E,trend:_},A)=>!E&&l&&C!==!0&&d!==-1&&A!==d||en({index:A,activeColorVisionIndex:d,comparisonSeriesIndexes:a})?null:h.jsx(Mn,{color:L,isComparison:C,label:T,shape:x,trend:_,value:I},`row-${A}`))},g)})]})})}function Qo({tooltipOptions:t={},theme:e,data:n,ignoreColorVisionEvents:o=!1}){return function(i){if((t==null?void 0:t.renderTooltipContent)!=null){const{renderTooltipContent:c,...u}=t;return c({...i,dataSeries:n,formatters:u,theme:e})}const{title:r,formattedData:a}=tn({data:i,tooltipOptions:t});return a[0].data.length===0?null:h.jsx(Rn,{data:a,theme:e,title:r,ignoreColorVisionEvents:o})}}function de(){const[t,e]=m.useState([]);return St({type:Ne,onIndexChange:({detail:n})=>{e(n.indexes)}}),{hiddenIndexes:t}}function On(t){const{containerBounds:e}=k(),{enabled:n=!0,root:o="chart"}=t||{},{id:s}=k(),{hiddenIndexes:i}=de();m.useEffect(()=>{if(!n)return;const r=document.querySelectorAll(`#${o}_${s} [${Lt.dataAttribute}-watch="true"]`);function a(u){var l;const d=(l=u.target)===null||l===void 0?void 0:l.dataset,f=ft(d,"index"),g=ft(d,"type");if(s==null||g==null)return;const v=new CustomEvent(wt(s,g),{detail:{index:Number(f)}});window.dispatchEvent(v)}function c(u){var l;const d=(l=u.target)===null||l===void 0?void 0:l.dataset,f=ft(d,"type");if(s==null||f==null)return;const g=new CustomEvent(wt(s,f),{detail:{index:-1}});window.dispatchEvent(g)}return r.forEach(u=>{u.addEventListener("mouseenter",a),u.addEventListener("mouseleave",c),u.addEventListener("focus",a),u.addEventListener("blur",c)}),()=>{r.forEach(u=>{u.removeEventListener("mouseenter",a),u.removeEventListener("mouseleave",c),u.removeEventListener("focus",a),u.removeEventListener("blur",c)})}},[s,n,i,o,e])}function ti(t){return m.useMemo(()=>t.reduce((e,n,o,s)=>{const i=s[o-1];return i&&i.data.length<n.data.length?o:e},0),[t])}function ei({data:t,labelFormatter:e}){return m.useMemo(()=>{const n=[],o=[];return t==null||t.length===0?{formattedLabels:n,unformattedLabels:o}:(t.forEach(s=>{s==null||s.data==null||s.data.forEach(({key:i},r)=>{var a;n[r]=(a=e==null?void 0:e(`${i}`))!==null&&a!==void 0?a:`${i}`,o[r]=`${i}`})}),{formattedLabels:n,unformattedLabels:o})},[t,e])}var he={ChartContainer:"_ChartContainer_11yon_144",SVG:"_SVG_11yon_154"};function $n({children:t,height:e,width:n,style:o={}}){return h.jsx("div",{className:he.ChartContainer,style:{height:e,width:n,...o},children:t})}function Bn({width:t,setRef:e,role:n="list",height:o,emptyStateText:s,emptyState:i=!1,children:r}){return h.jsx("svg",{viewBox:`0 0 ${t} ${o}`,xmlns:Zt,width:t,height:o,className:he.SVG,role:i?"img":n,"aria-label":i?s:void 0,ref:e,children:r})}const ni={Div:$n,Svg:Bn};function Fn(t,e,n,o){const{width:s,height:i}=t,r=o==="horizontal";return{height:r?i-e-Qt:i,width:r?s:s-n}}function oi({colors:t=[],data:e,showLegend:n,direction:o="horizontal",maxWidth:s=0,seriesNameFormatter:i}){const{containerBounds:r,comparisonIndexes:a}=k(),c=n?oe:0,[u,l]=m.useState({height:c,width:s}),d=m.useMemo(()=>n===!1?[]:e.map(({series:p,shape:x})=>p.map(({name:y,color:w,isComparison:T,data:I,metadata:L},C)=>({isHidden:a.includes(C),name:i(y??""),...I&&{value:I.reduce((E,_)=>E+(_.value||0),0).toString()},...L&&{trend:L.trend},color:w,shape:x,isComparison:T}))).flat().map(({color:p,...x},y)=>({...x,color:p??t[y]})),[t,e,i,n,a]),{height:f,width:g}=m.useMemo(()=>n===!1?r:Fn(r,u.height,u.width,o),[n,r,u.height,u.width,o]);return{legend:d,height:f,width:g,setLegendDimensions:l}}function ii({dataLength:t,skipEveryNthLabel:e=-1}){return m.useMemo(()=>t===0||e===1?[]:Array(t).fill(null).map((o,s)=>s).filter((o,s)=>s%e===0),[t,e])}function si(t){const e=Object.values(t);return{hasXAxisAnnotations:e.some(({axis:n})=>n==="x"),hasYAxisAnnotations:e.some(({axis:n})=>n.includes("y"))}}function Wn(t,e){return e==null||e.length===0?!1:!e.includes(t)}function ri({allowLineWrap:t,ariaHidden:e=!1,isLinearChart:n=!1,labels:o,labelWidth:s,onHeightChange:i,reducedLabelIndexes:r,x:a,xScale:c,y:u}){const{lines:l}=$e({labels:o,onHeightChange:i,targetWidth:s,allowLineWrap:t});return h.jsx("g",{"aria-hidden":!0,children:l.map((d,f)=>{const g=n&&o.length>1&&f===o.length-1;if(Wn(f,r)||g)return null;const v=Gn(f,c);return h.jsx("g",{transform:`translate(${a+(v??0)},${u})`,"aria-hidden":e,children:h.jsx(Be,{line:d,index:f})},f)})})}function Gn(t,e){return e instanceof At?e(t):e(`${t}`)}const ai=m.memo(function({ticks:e,transform:n,width:o}){const s=R();return h.jsx(m.Fragment,{children:e.map(({yOffset:i},r)=>h.jsx("line",{x2:o,stroke:s.grid.color,transform:`translate(${n.x},${n.y+i})`},r))})}),Hn=400;function fe({ariaHidden:t=!1,color:e,dominantBaseline:n="hanging",fontSize:o,fontWeight:s=Hn,targetWidth:i,text:r,textAnchor:a="middle",y:c=0,x:u=0}){const{characterWidths:l}=k(),d=Fe({label:r,targetWidth:i,targetHeight:q,characterWidths:l}),f=d!==r;return h.jsxs(m.Fragment,{children:[h.jsx("text",{"aria-hidden":t,textAnchor:a,dominantBaseline:n,height:q,width:i,fill:e,fontSize:o,fontWeight:s,fontFamily:It,y:c,x:u,children:d}),f&&h.jsx("title",{children:r})]})}const gt=2;function li({ticks:t,width:e,textAlign:n,ariaHidden:o=!1,x:s,y:i}){const r=R(),a=dt();return h.jsx("g",{transform:`translate(${s},${i})`,"aria-hidden":"true",children:t.map(({value:c,formattedValue:u,yOffset:l})=>{const d=ne(u,a),f=$({amount:e,min:e+gt,max:d}),g=n==="right"?e-f:0;return h.jsxs("g",{transform:`translate(${g},${l})`,children:[h.jsx("rect",{height:q,width:f+gt,fill:r.chartContainer.backgroundColor,y:-q/2,x:-gt}),h.jsx(fe,{x:0,y:0,ariaHidden:o,color:r.yAxis.labelColor,fontSize:a,targetWidth:f,text:u,textAnchor:"start",dominantBaseline:"middle"})]},c)})})}function me({checkFn:t=()=>!0,onBlur:e,ref:n}){const o=le(t);m.useEffect(()=>{const s=i=>{const r=i.currentTarget;requestAnimationFrame(()=>{!r.contains(document.activeElement)&&o(document.activeElement)&&e(i)})};return n==null||n.addEventListener("focusout",s),()=>{n==null||n.removeEventListener("focusout",s)}},[o,e,n])}const V=20,et=8,nt=8,Vn=-10,ge=11.5,ve=V+nt,xe=200;function Yn({annotations:t,axis:e,drawableWidth:n,ticks:o,yScale:s}){const{characterWidths:i}=k(),r=m.useMemo(()=>t.map(c=>J(c.label,i)),[t,i]),{positions:a}=m.useMemo(()=>{let c=t.map((l,d)=>{var f;const g=(f=s(Number(l.startKey)))!==null&&f!==void 0?f:0,v=r[d],p=$({amount:v+et*2,min:v+et*2,max:n}),x=$({amount:g-V/2,min:0}),y=e==="y2"?0:n-p,w=e==="y2"?n:n-(n-y);return{index:d,line:{x:0,y:g,width:w},showYAxisLabel:!0,row:1,width:p,x:y,y:x}});c=c.sort((l,d)=>l.y-d.y),o.forEach(({yOffset:l})=>{c.forEach(d=>{const f=d.line.y-q/2,g=f+q;l>f&&l<g&&(d.showYAxisLabel=!1)})});function u(l){let d=!1;[...Array.from({length:l})].forEach((f,g)=>{const v=g+1;c.filter(({row:p})=>p===v).forEach((p,x,y)=>{const w=v+1,T=y[x+1];if(T==null)return;p.line.y+ge>T.line.y&&(T.showYAxisLabel=!1);const I=p.y,L=p.y+V;p.row===T.row&&T.y>I&&T.y<L&&(T.row=w,d=!0)})}),d&&u(l+1)}return u(1),c.forEach(l=>{const d=l.row-1;e==="y2"?l.x+=(l.width+nt)*d:l.x-=(l.width+nt)*d}),{positions:c}},[t,o,r,s,n,e]);return{positions:a}}var Tt={Group:"_Group_gd4df_144",Pill:"_Pill_gd4df_151"};function zn(t,e=Ct){var n;const{characterWidths:o,characterWidthOffsets:s}=k(),i=(n=s.fontSize[e])!==null&&n!==void 0?n:1;return J(t,o)*i}const Ft=10;function Xn({axis:t,label:e,x:n,y:o}){const s=R(),i=zn(`${e}`,Ft),r=t==="y2"?0:i;return h.jsx("text",{width:i,height:ge,y:o,dominantBaseline:"middle",fontSize:Ft,x:n-r,fill:s.annotations.axisLabelColor,children:e})}var Un={Line:"_Line_y7hzj_1"};const qn=16,Wt=-4;function Kn({direction:t,size:e,x:n,y:o}){return t==="vertical"?{x1:n,x2:n,y1:o,y2:e}:{x1:n,x2:e,y1:o,y2:o}}function ye({direction:t="vertical",hasCaret:e=!0,size:n,x:o,y:s}){const i=R(),{isFirefox:r}=ut(),a=e?s+Math.abs(Wt):s;return h.jsxs(m.Fragment,{children:[h.jsx("line",{className:Un.Line,stroke:i.annotations.lineColor,strokeWidth:"1",strokeDasharray:"3 2",...Kn({direction:t,size:n,x:o,y:a})}),e&&h.jsx("path",{d:"M9.31 7.866a2 2 0 0 1-2.62 0L1.664 3.512C.263 2.3 1.12 0 2.973 0h10.055c1.852 0 2.709 2.3 1.31 3.512L9.308 7.866Z",transform:`translate(${o-qn/2}, ${s+Wt})`,fill:i.annotations.backgroundColor,opacity:r?1:i.annotations.pillOpacity})]})}var Zn={Button:"_Button_vtbam_144"};const Gt=1,Ht=4;function pe({ariaLabel:t,index:e,label:n,position:o,onMouseEnter:s,onMouseLeave:i,tabIndex:r}){const a=R(),{isFirefox:c}=ut(),{x:u,y:l,width:d}=o,f=`${t}: ${n}`,g=d/2;function v(){s(e)}return h.jsxs("g",{transform:`translate(${u},${l})`,"aria-hidden":!0,children:[h.jsx("rect",{height:V,width:d,fill:a.annotations.backgroundColor,ry:Ht,opacity:c?1:a.annotations.pillOpacity}),h.jsx(fe,{ariaHidden:!0,color:a.annotations.textColor,fontSize:Ct,text:n,targetWidth:d-et*2+Gt,y:V-q-Gt,x:g}),h.jsx(m.Fragment,{children:h.jsx("foreignObject",{height:V,width:d,style:{overflow:"visible"},children:h.jsx("button",{"aria-describedby":`annotation-content-${e}`,"aria-label":f,className:Zn.Button,onMouseEnter:v,onFocus:v,onMouseLeave:i,onBlur:i,tabIndex:r,style:{borderRadius:Ht},children:n})})})]})}var at={Container:"_Container_1jpyr_1",Title:"_Title_1jpyr_8",Content:"_Content_1jpyr_15",Link:"_Link_1jpyr_23"};const Jn=350;function we({annotation:t,drawableWidth:e,index:n,onMouseEnter:o,onMouseLeave:s,parentRef:i,tabIndex:r,renderAnnotationContent:a,x:c,y:u}){var l;const d=R(),[f,g]=m.useState(null),[v,p]=m.useState();if(m.useLayoutEffect(()=>{p(f==null?void 0:f.getBoundingClientRect())},[f]),m.useEffect(()=>{const C=document.querySelector("[data-tooltip]");return C&&(C.style.display="none"),()=>{C&&(C.style.display="block")}},[]),t.content==null)return null;const{content:x,title:y,linkText:w="Learn more",linkUrl:T}=t.content,I=(l=v==null?void 0:v.width)!==null&&l!==void 0?l:0;let L=c-I/2;return L+I>e&&(L=e-I),_t.createPortal(h.jsx(Qn,{height:"100%",width:"100%",style:{pointerEvents:"none",overflow:"visible"},x:$({amount:L,min:0,max:e}),y:u,parentRef:i,children:h.jsxs("div",{className:at.Container,"data-block-tooltip-events":!0,onMouseEnter:o,onMouseLeave:s,ref:g,style:{width:"fit-content",maxWidth:Math.min(e,Jn),background:d.tooltip.backgroundColor,color:d.tooltip.textColor},id:`annotation-content-${n}`,role:"dialog","aria-label":t.startKey.toString(),children:[y!=null&&h.jsx("p",{className:at.Title,style:{color:d.tooltip.textColor},role:"heading","aria-level":2,children:y}),h.jsx("div",{className:at.Content,style:{color:d.tooltip.textColor},"data-is-annotation-content":!0,children:a?a({annotation:t}):h.jsxs(m.Fragment,{children:[h.jsx("p",{style:{color:d.tooltip.textColor},children:x}),T!=null&&h.jsx("a",{href:T,className:at.Link,tabIndex:r,style:{color:d.annotations.linkColor},children:w})]})})]})}),i??document.body)}function Qn({children:t,parentRef:e,...n}){const o=e?"foreignObject":"div";return h.jsx(o,{...n,children:t})}function ci({axis:t="y",annotationsLookupTable:e,drawableWidth:n,ticks:o,yScale:s}){const[i,r]=m.useState(-1),[a,c]=m.useState(null),u=m.useRef(0),{annotations:l}=m.useMemo(()=>({annotations:Object.keys(e).map(y=>{const w=e[y];return!Xe(Number(w.startKey),s.domain())||w==null||w.axis==null||w.axis!==t?null:w}).filter(Boolean)}),[e,s,t]),{positions:d}=Yn({axis:t,annotations:l,drawableWidth:n,ticks:o,yScale:s}),f=()=>{r(-1)};function g(x){r(x)}const v=()=>{u.current=window.setTimeout(()=>{r(-1)},xe)};function p(){clearTimeout(u.current)}return me({ref:a,onBlur:f,checkFn:x=>{const y=x==null?void 0:x.parentElement;return(y==null?void 0:y.dataset.isAnnotationContent)!=="true"}}),h.jsx("g",{ref:c,tabIndex:-1,className:Tt.Group,children:d.map(x=>{var y;const w=x.index,T=l[w],{line:I,x:L,y:C}=x,E=T.content!=null,_=w===i&&E,A=w+1,j=`${T.startKey}`,b=t==="y2"?n+xt:-xt;return h.jsxs(m.Fragment,{children:[x.showYAxisLabel&&h.jsx(Xn,{axis:t,y:I.y,x:b,label:T.startKey}),h.jsx(ye,{direction:"horizontal",hasCaret:!1,size:(y=I.width)!==null&&y!==void 0?y:0,x:I.x,y:I.y}),h.jsx(pe,{ariaLabel:j,index:w,label:T.label,position:x,onMouseEnter:g,onMouseLeave:v,tabIndex:A}),_&&h.jsx(we,{annotation:T,drawableWidth:n,index:w,onMouseEnter:p,onMouseLeave:f,parentRef:a,position:x,tabIndex:A,x:n-(n-L),y:C+ve})]},`annotation${w}${T.startKey}`)})})}function Ee({positions:t,totalRows:e}){let n=!1;[...Array.from({length:e})].forEach((o,s)=>{const i=s+1;t.filter(({row:r})=>r===i).forEach((r,a,c)=>{const u=i+1,l=c[a+1];if(l==null)return;const d=r.x,f=r.x+r.width;r.row===l.row&&l.x>d&&l.x<f&&(l.row=u,n=!0)})}),n&&Ee({positions:t,totalRows:e+1})}function to({annotations:t,axisLabelWidth:e,dataIndexes:n,drawableWidth:o,onHeightChange:s,xScale:i,labelFormatter:r}){const{characterWidths:a}=k(),c=m.useMemo(()=>t.map(d=>J(d.label,a)),[t,a]),{positions:u}=m.useMemo(()=>{let d=t.map((f,g)=>{const v=ze(n[r(f.startKey)],i),p=c[g],x=$({amount:p+et*2,min:p+et*2,max:o}),y=$({amount:v,min:v,max:v+e});let w=$({amount:y-x/2,min:Vn});const T=w+x;return T>o&&(w-=T-o),{index:g,line:{x:y,y:0},row:1,width:x,x:w,y:0}});return d=d.sort((f,g)=>f.x-g.x),Ee({positions:d,totalRows:1}),d.forEach(f=>{const g=f.row-1;f.y=g*V+g*nt}),{positions:d}},[t,n,c,e,i,o,r]),l=m.useMemo(()=>u.reduce((d,{y:f})=>f>d?f:d,0)+V+nt,[u]);return m.useEffect(()=>{s(l)},[s,l]),u}function ui({annotationsLookupTable:t,axisLabelWidth:e,drawableHeight:n,drawableWidth:o,labels:s,onHeightChange:i,xScale:r,labelFormatter:a,renderAnnotationContent:c}){const u=R(),[l,d]=m.useState(-1),[f,g]=m.useState(null),v=m.useRef(0),p=m.useMemo(()=>s.map(a),[s,a]),{annotations:x,dataIndexes:y}=m.useMemo(()=>{const E={};return{annotations:Object.keys(t).map(A=>{const j=t[A];if(j==null||j.axis==="y")return null;const b=a(A);return p.includes(b)?(E[b]=p.indexOf(b),j):null}).filter(Boolean),dataIndexes:E}},[t,p,a]),w=to({annotations:x,axisLabelWidth:e,dataIndexes:y,drawableWidth:o,onHeightChange:i,xScale:r,labelFormatter:a}),T=()=>{d(-1)};function I(E){d(E)}const L=()=>{v.current=window.setTimeout(()=>{d(-1)},xe)};function C(){clearTimeout(v.current)}return me({ref:f,onBlur:T,checkFn:E=>{const _=E==null?void 0:E.parentElement;return(_==null?void 0:_.dataset.isAnnotationContent)!=="true"}}),h.jsx("g",{ref:g,tabIndex:-1,className:Tt.Group,children:w.map(E=>{const{line:_,y:A,index:j}=E,b=x[j],W=b.content!=null,Y=j===l&&W,z=j+1,G=`${b.startKey}`;return h.jsxs(m.Fragment,{children:[h.jsxs("g",{className:Tt.Pill,style:{"--annotation-hover-color":u.annotations.backgroundHoverColor,"--annotation-text-hover-color":u.annotations.textHoverColor},children:[h.jsx(ye,{size:n,x:_.x,y:A+V}),h.jsx(pe,{ariaLabel:G,index:j,label:b.label,position:E,onMouseEnter:I,onMouseLeave:L,tabIndex:z})]}),Y&&h.jsx(we,{annotation:b,drawableWidth:o,index:j,onMouseEnter:C,onMouseLeave:L,parentRef:f,position:E,renderAnnotationContent:c,tabIndex:z,x:_.x,y:A+ve})]},`annotation${j}${b.startKey}`)})})}const Te=t=>{const e=m.useRef(document.getElementById(t));function n(){return e.current||(e.current=document.createElement("div"),e.current.id=t,document.body.appendChild(e.current)),e.current}return n()};function Vt(t,e){return`${e??"stack"}-${t}`}function eo({series:t,labels:e,order:n,offset:o}){const s=Je().offset(o).order(n).keys(t.map(({name:r},a)=>Vt(a,r))),i=e.map((r,a)=>t.reduce((c,{name:u,data:l},d)=>{const f=l[a],g={[Vt(d,u)]:(f==null?void 0:f.value)==null?0:f.value};return Object.assign(c,g)},{}));return s(i)}function no(t){const n=t.reduce((i,r)=>r.data.length>i.data.length?r:i,t[0]).data.map(({key:i})=>`${i}`),o=eo({series:t,labels:n,order:pt,offset:Qe}),s=n.map((i,r)=>o.map(a=>a[r]));return{stackedValues:o,formattedStackedValues:s}}let B;(function(t){t[t.Left=0]="Left",t[t.Right=1]="Right",t[t.Center=2]="Center"})(B||(B={}));let X;(function(t){t[t.Above=0]="Above",t[t.Below=1]="Below",t[t.Inline=2]="Inline",t[t.Center=3]="Center"})(X||(X={}));const bt={horizontal:B.Center,vertical:X.Above},O={x:0,y:0,position:bt,activeIndex:null},N=20,oo=20;function ht(t){const e=a(t);if(e==null)return;const n=e.getScreenCTM();if(n==null)return;const o=e.createSVGPoint(),{x:s,y:i}=Dt(t);o.x=s,o.y=i;const r=o.matrixTransform(n.inverse());return{svgX:r.x,svgY:r.y};function a(c){if(c.currentTarget==null){var u;return(u=c.target)===null||u===void 0?void 0:u.closest("svg")}return c.currentTarget}}function Dt(t){return"touches"in t?{x:t.touches[0].pageX,y:t.touches[0].pageY}:{x:t.pageX,y:t.pageY}}function io({chartBounds:t,data:e,event:n,eventType:o,index:s,longestSeriesIndex:i,type:r,xScale:a}){const c=t.height/e[i].data.length,u=r==="stacked";if(o==="mouse"&&(n instanceof MouseEvent||n instanceof TouchEvent)){const d=ht(n);if(d==null)return O;const{svgY:f}=d,g=f-0,v=Math.floor(g/c);return v<0||v>e[i].data.length-1?O:l(v)}else if(s!=null)return l(s);return O;function l(d){var f,g;if(u){const{formattedStackedValues:x}=no(e),y=x[d].reduce((w,T)=>{const[I,L]=T;return I<0?w:w+(a(L)-a(I))},a(0));return{x:t.x+y,y:t.y+c*d,activeIndex:d}}const v=(f=e[i].data[d].value)!==null&&f!==void 0?f:0,p=t.x+((g=a(v??0))!==null&&g!==void 0?g:0);return{x:v<0?-p:p,y:c*d,activeIndex:d}}}function so({containerBounds:t,chartBounds:e,data:n,event:o,eventType:s,index:i,isTouchDevice:r,longestSeriesIndex:a,scrollY:c,xScale:u}){if(s==="mouse"&&(o instanceof MouseEvent||o instanceof TouchEvent)){if(o==null)return O;const d=ht(o);if(d==null||u==null||n[a]==null)return O;const{svgX:f}=d,g=Math.round(u.invert(f-e.x)),v=$({amount:g,min:0,max:n[a].data.length-1}),{x:p,y:x}=Dt(o);return{x:r?u(v):p,y:x,activeIndex:v}}else{var l;const d=i??0;return{x:((l=u==null?void 0:u(d))!==null&&l!==void 0?l:0)+t.x,y:t.y-c,activeIndex:d}}}function ro(t){return t.length===0?[]:t[0].data.map(({key:n})=>n).map((n,o)=>t.map(s=>{var i;const r=(i=s.data[o])===null||i===void 0?void 0:i.value;return r!==null&&isNaN(Number(r))?null:r}))}function ao({chartBounds:t,containerBounds:e,data:n,event:o,eventType:s,index:i,longestSeriesIndex:r,type:a,xScale:c,yScale:u}){const l=a==="stacked";if(s==="mouse"&&(o instanceof MouseEvent||o instanceof TouchEvent)){const d=ht(o);if(d==null)return O;const{svgX:f}=d,g=f-t.x,v=Math.floor(g/c.step());return v<0||v>n[r].data.length-1?O:Yt({chartBounds:t,containerBounds:e,index:v,xScale:c,yScale:u,data:n,isStacked:l})}else if(i!=null)return Yt({chartBounds:t,containerBounds:e,index:i,xScale:c,yScale:u,data:n,isStacked:l});return O}function Yt({chartBounds:t,containerBounds:e,data:n,index:o,xScale:s,yScale:i,isStacked:r}){var a;if(o==null)return O;const c=(a=s(`${o}`))!==null&&a!==void 0?a:0,u=f(n,o),l=e.x+c,d=i(u<0?0:u)+e.y;return{x:t.x+l,y:Math.abs(d),position:{horizontal:B.Center,vertical:X.Above},activeIndex:o};function f(g,v){if(r){var p;return(p=ro(g)[v].reduce(lo,0))!==null&&p!==void 0?p:0}const x=g.map(y=>y.data[v].value).filter(Boolean);return Math.max(...x)}}function lo(t,e){return e<0?t:t+e}function co(t){return t.composedPath().some(e=>{const n=e.dataset;return n!=null&&n.blockTooltipEvents==="true"})}const H=20,_e=20;function uo(t){const{currentX:e,currentY:n,containerBounds:o,scrollContainer:s}=t;let i=e,r=n;if(t.isPerformanceImpacted||t.isTouchDevice){var a,c;r=(a=o.y-((c=s==null?void 0:s.scrollTop)!==null&&c!==void 0?c:0))!==null&&a!==void 0?a:0,t.isTouchDevice&&(r-=t.tooltipDimensions.height)}const u=mo(i,t);return i=u.value,u.wasOutsideBounds&&(i=fo(i,t).value),{x:$({amount:i,min:H,max:window.innerWidth-t.tooltipDimensions.width-H-_e}),y:$({amount:r,min:window.scrollY+H,max:window.scrollY+window.innerHeight-t.tooltipDimensions.height-H})}}function ho(t){const{current:e,alteredPosition:n}=t,o=H,s=window.innerWidth-H-_e,i=e<o,r=e+n.tooltipDimensions.width>s;return{left:i,right:r}}function fo(...t){const[e]=t;return{value:e-H,wasOutsideBounds:!1}}function mo(...t){const[e,n]=t;let o=e;n.isTouchDevice?(o+=n.chartBounds.x+n.containerBounds.x,o-=n.tooltipDimensions.width/2):o+=n.bandwidth;const s=ho({current:o,alteredPosition:n});return s.right?n.isTouchDevice?o=n.containerBounds.x+n.containerBounds.width-n.tooltipDimensions.width:o-=n.tooltipDimensions.width+n.bandwidth+H:o+=H,{value:o,wasOutsideBounds:s.right}}function go(t){return t.currentX<0?vo(t):xo(t)}function vo(t){const{bandwidth:e,currentX:n,currentY:o,tooltipDimensions:s}=t,i=n*-1,r=(e-s.height)/2,a=o-s.height;return i-s.width<0?{x:i,y:a<0?0:a}:{x:i-s.width-N,y:o+tt+r}}function xo(t){const{bandwidth:e,currentX:n,currentY:o,tooltipDimensions:s,chartBounds:i}=t,r=yo({x:n,y:o,tooltipDimensions:s,chartBounds:i});if(r.top&&r.right)return{x:i.width-s.width,y:0};if(r.top&&!r.right)return{x:n+N,y:0};if(!r.right&&!r.bottom){const a=(e-s.height)/2;return{x:n+N,y:o+tt+a}}if(r.right){const a=n-s.width,c=o-s.height+tt-N;return c<0?{x:a,y:e+tt+N}:{x:a,y:c}}return r.bottom?{x:n+N,y:i.height-s.height-tt}:{x:n,y:o}}function yo({x:t,y:e,tooltipDimensions:n,chartBounds:o}){const s=t+N+n.width,i=e+n.height;return{left:t<=0,right:s>o.width,bottom:i>o.height,top:e<=0}}function K(t){const{current:e,direction:n,alteredPosition:o}=t;if(n==="x"){const s=e<0,i=e+o.tooltipDimensions.width>window.innerWidth;return s||i}else{const s=e<window.scrollY,i=e+o.tooltipDimensions.height>window.scrollY+window.innerHeight-o.tooltipDimensions.height;return s||i}}function po(...t){const[e,n]=t;let o=e;const s=K({current:o,direction:"y",alteredPosition:n});if(s){const r=o+n.tooltipDimensions.height-n.chartBounds.height;o-=r+n.margin.Bottom}return{value:o,wasOutsideBounds:s}}function wo(...t){const[e,n]=t;let o=e-n.tooltipDimensions.height/2;const s=K({current:o,direction:"y",alteredPosition:n});return s&&(o<=0?o=0:o=window.scrollY+window.innerHeight-n.tooltipDimensions.height),{value:o,wasOutsideBounds:s}}function Eo(...t){const[e,n]=t;let o=e-n.tooltipDimensions.height-N;const s=K({current:o,direction:"y",alteredPosition:n});if(s){var i,r;o=n.currentY-((i=(r=n.scrollContainer)===null||r===void 0?void 0:r.scrollTop)!==null&&i!==void 0?i:0)}return{value:o,wasOutsideBounds:s}}function To(...t){const[e,n]=t;let o=e+N*2;const s=K({current:o,direction:"y",alteredPosition:n});return s&&(o-=n.tooltipDimensions.height+N),{value:o,wasOutsideBounds:s}}function _o(...t){const[e,n]=t;let o=e-n.tooltipDimensions.width;const s=K({current:o,direction:"x",alteredPosition:n});return s?o=n.currentX+n.margin.Left+n.bandwidth+N:o-=N,{value:o,wasOutsideBounds:s}}function Lo(...t){const[e,n]=t;let o=e+n.bandwidth;const s=K({current:o,direction:"x",alteredPosition:n});return s?o-=n.tooltipDimensions.width+n.bandwidth+N:o+=N,{value:o,wasOutsideBounds:s}}function Io(...t){const[e,n]=t,o=n.bandwidth-n.tooltipDimensions.width;let s=e+o/2;s<n.margin.Left&&(s=n.currentX+n.margin.Left);const i=K({current:s,direction:"x",alteredPosition:n});return i&&(s=window.innerWidth-n.tooltipDimensions.width-N*2),{value:s,wasOutsideBounds:i}}function Co(t){var e;const{currentX:n,currentY:o,position:s,scrollContainer:i}=t,r={...s};let a=n,c=o-((e=i==null?void 0:i.scrollTop)!==null&&e!==void 0?e:0);if(t.isPerformanceImpacted||t.isTouchDevice){var u;c=$({amount:t.containerBounds.y-t.tooltipDimensions.height-((u=i==null?void 0:i.scrollTop)!==null&&u!==void 0?u:0),min:0,max:window.scrollY+window.innerHeight-t.tooltipDimensions.height-N})}else{if(r.vertical===X.Inline&&(r.horizontal=B.Left,c=po(c,t).value),r.vertical===X.Center&&(c=wo(c,t).value),r.vertical===X.Above){const l=Eo(c,t);c=l.value,l.wasOutsideBounds&&(r.horizontal=B.Left)}if(r.vertical===X.Below){const l=To(c,t);c=l.value,l.wasOutsideBounds&&(r.horizontal=B.Left)}}if(r.horizontal===B.Left){const l=_o(a,t);l.wasOutsideBounds?r.horizontal=B.Right:a=l.value}return r.horizontal===B.Right&&(a=Lo(a,t).value),r.horizontal===B.Center&&(a=Io(a,t).value),{x:$({amount:a,min:N,max:window.innerWidth-t.tooltipDimensions.width-N-oo}),y:$({amount:c,min:window.scrollY+N,max:window.scrollY+window.innerHeight-t.tooltipDimensions.height-N})}}var Ao={Container:"_Container_1op8q_1"};function So({bandwidth:t=0,chartBounds:e,chartType:n,children:o,currentX:s,currentY:i,id:r="",margin:a,position:c=bt}){const{isPerformanceImpacted:u,scrollContainer:l,containerBounds:d,isTouchDevice:f}=k(),[g,v]=m.useState(null),p=m.useRef(!0),{setRef:x,entry:y}=ie(),w=m.useMemo(()=>{switch(n){case F.Line:case F.Donut:return uo;case F.HorizontalBar:return go;case F.Bar:default:return Co}},[n]),{x:T,y:I,opacity:L,immediate:C}=m.useMemo(()=>{if(g==null)return{x:0,y:0,opacity:0};const{x:E,y:_}=w({currentX:s,currentY:i,position:c,tooltipDimensions:g,chartBounds:e,margin:a,bandwidth:t,isPerformanceImpacted:u,isTouchDevice:f,containerBounds:d,scrollContainer:l}),A=p.current;return p.current=!1,{x:E,y:_,opacity:1,immediate:u||A}},[t,e,s,i,w,a,c,u,g,d,l,f]);return m.useEffect(()=>{y!=null&&v(E=>{const{width:_,height:A}=y.target.getBoundingClientRect();return(E==null?void 0:E.width)===_&&(E==null?void 0:E.height)===A?E:{width:_,height:A}})},[y]),h.jsx("div",{id:r,className:Ao.Container,"data-tooltip":!0,style:{top:0,left:0,opacity:L,transform:`translate3d(${Math.round(T)}px, ${Math.round(I)}px, 0px)`,transition:C?"none":"opacity 300ms ease, transform 150ms"},ref:x,"aria-hidden":"true",children:o})}function bo({containerBounds:t,event:e,eventType:n,index:o,parentElement:s}){if(o==null)return O;if(n==="mouse"&&(e instanceof MouseEvent||e instanceof TouchEvent)){if(o==null||e==null||ht(e)==null)return O;const{x:r,y:a}=Dt(e);return{x:r,y:a,activeIndex:o}}else{if((e==null?void 0:e.target)==null||s==null)return O;const i=s.clientWidth,r=e.target.getAttribute("data-start-angle"),a=e.target.getAttribute("data-end-angle"),c=t.width-i,u=Math.min(t.width-c,t.height)/2,l=t.x+c+u,d=t.y+t.height/2,f=(Number(r)+Number(a))/2,g=l+u*Math.cos(f-Math.PI/2),v=d+u*Math.sin(f-Math.PI/2);return{x:g,y:v,activeIndex:o}}}class Do extends m.Component{static getDerivedStateFromError(){return{hasError:!0}}constructor(e){super(e),this.state={hasError:!1}}render(){return this.state.hasError?null:this.props.children}}const jo=300;function No(t){const{bandwidth:e=0,chartBounds:n,chartType:o,data:s,forceActiveIndex:i,focusElementDataType:r,id:a,longestSeriesIndex:c,onIndexChange:u,parentElement:l,type:d,xScale:f,yScale:g}=t,{scrollContainer:v,isTouchDevice:p,containerBounds:x}=k(),[y,w]=m.useState({x:0,y:0,activeIndex:-1,position:bt}),T=m.useRef(null),I=m.useRef(0),L=m.useRef(!1),C=m.useMemo(()=>l==null?void 0:l.querySelectorAll(`[data-type="${r}"][aria-hidden="false"]`),[r,l]);m.useEffect(()=>{T.current=y.activeIndex},[y.activeIndex]);const E=[F.Line,F.Donut].includes(o)&&!p,_=m.useCallback(({event:S,eventType:P,index:M})=>{var D;const Z=v==null?0:v.scrollTop;switch(o){case F.Line:return so({chartBounds:n,containerBounds:x,scrollY:Z,data:s??[],event:S,eventType:P,index:M,isTouchDevice:p,longestSeriesIndex:c??0,xScale:f});case F.HorizontalBar:return io({chartBounds:n,data:s??[],event:S,eventType:P,index:M,longestSeriesIndex:c??0,type:d,xScale:f});case F.Donut:return bo({containerBounds:x,event:S,eventType:P,index:(D=M??i)!==null&&D!==void 0?D:void 0,parentElement:l});case F.Bar:default:return ao({chartBounds:n,containerBounds:x,data:s??[],event:S,eventType:P,index:M,longestSeriesIndex:c??0,type:d,xScale:f,yScale:g})}},[n,x,o,s,i,c,p,d,f,g,v,l]),A=m.useCallback(S=>{var P;const M=_({event:S,eventType:"mouse"}),D=Number((P=v==null?void 0:v.scrollTop)!==null&&P!==void 0?P:0),Z=M.y+D;E&&(M.x<n.x||Z<n.y)||!E&&T.current===M.activeIndex||co(S)||(w(M),u==null||u(M.activeIndex))},[E,n,_,u,v]),j=m.useCallback(S=>{if(window.clearTimeout(I.current),typeof TouchEvent<"u"&&S instanceof TouchEvent)if(L.current===!0)S==null||S.preventDefault();else return;A(S)},[A]),b=m.useCallback(()=>{L.current=!1,window.clearTimeout(I.current),u==null||u(null),w(S=>({...S,activeIndex:-1}))},[u]),W=m.useCallback(S=>{I.current=window.setTimeout(()=>{S.preventDefault(),L.current=!0,A(S)},jo)},[A]),Y=m.useCallback(S=>{const P=S.currentTarget;if(!P)return;const M=Number(P.dataset.index),D=_({event:S,index:M,eventType:"focus"});w(D),u==null||u(D.activeIndex)},[_,u]),z=m.useCallback(()=>{l!=null&&l.contains(document.activeElement)||b()},[l,b]),G=m.useCallback(S=>{C&&C.forEach(P=>{S?P.addEventListener("focus",Y):P.removeEventListener("focus",Y)})},[C,Y]);return m.useEffect(()=>{if(l)return l.addEventListener("mousemove",j),l.addEventListener("mouseleave",b),l.addEventListener("touchstart",W),l.addEventListener("touchmove",j),l.addEventListener("touchend",b),G(!0),()=>{l.removeEventListener("mousemove",j),l.removeEventListener("mouseleave",b),l.removeEventListener("touchstart",W),l.removeEventListener("touchmove",j),l.removeEventListener("touchend",b),G(!1)}},[l,b,W,G,j]),m.useEffect(()=>(document.addEventListener("focusin",z),()=>{document.removeEventListener("focusin",z)}),[l,z]),y.activeIndex==null||y.activeIndex<0?null:h.jsx(So,{bandwidth:e,chartBounds:n,chartType:o,currentX:y.x,currentY:y.y,id:a,margin:t.margin,position:y.position,children:t.getMarkup(y.activeIndex)})}function di({usePortal:t=!1,...e}){return t?h.jsx(Po,{...e}):h.jsx(Le,{...e})}function Le(t){return h.jsx(Do,{children:h.jsx(No,{...t})})}function Po(t){const e=Te(We);return _t.createPortal(h.jsx(Le,{...t}),e)}var vt,zt;function Mo(){return zt||(zt=1,vt=function t(e,n){if(e===n)return!0;if(e&&n&&typeof e=="object"&&typeof n=="object"){if(e.constructor!==n.constructor)return!1;var o,s,i;if(Array.isArray(e)){if(o=e.length,o!=n.length)return!1;for(s=o;s--!==0;)if(!t(e[s],n[s]))return!1;return!0}if(e.constructor===RegExp)return e.source===n.source&&e.flags===n.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===n.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===n.toString();if(i=Object.keys(e),o=i.length,o!==Object.keys(n).length)return!1;for(s=o;s--!==0;)if(!Object.prototype.hasOwnProperty.call(n,i[s]))return!1;for(s=o;s--!==0;){var r=i[s];if(!t(e[r],n[r]))return!1}return!0}return e!==e&&n!==n}),vt}var ko=Mo();const Ro=Ce(ko);var Oo={Container:"_Container_ijalm_1"},Xt={MoreText:"_MoreText_kibmg_1",Tooltip:"_Tooltip_kibmg_11"};const Ut=8,$o=16,Bo=6;var Q={Legend:"_Legend_spsas_144",TextContainer:"_TextContainer_spsas_163",Text:"_Text_spsas_163",IconContainer:"_IconContainer_spsas_180"};const lt=100;function Fo({activeIndex:t=-1,color:e,colorVisionType:n,index:o,isComparison:s,name:i,renderSeriesIcon:r,shape:a,theme:c,value:u,onDimensionChange:l,backgroundColor:d,truncate:f=!1,showLegendValues:g=!1,seriesNameFormatter:v=x=>`${x}`,lineStyle:p}){const x=R(c),y=m.useRef(null),[w,T]=m.useState(0),I=dt(),L=g&&u!=null;m.useEffect(()=>{if(l&&y.current!=null){const{width:_,height:A}=y.current.getBoundingClientRect();T(_),l(o,{width:Math.min(lt,Math.round(_)),height:A})}},[l,y,o]);const C=n==null?{}:re({type:n,index:o}),E=d??x.legend.backgroundColor;return h.jsxs("button",{...C,style:{background:E??"none",...se({activeIndex:t,index:o}),paddingLeft:E?Ut:0,paddingRight:E?$o:Ut,gap:Bo,maxWidth:f?lt:"100%",minWidth:w<lt?void 0:lt},className:Q.Legend,ref:y,title:i,children:[r==null?h.jsx("span",{style:{height:U,width:U},className:Q.IconContainer,children:h.jsx(ce,{lineStyle:s?"dotted":p,shape:a,color:s?x.seriesColors.comparison:e})}):r(),h.jsxs("span",{className:Q.TextContainer,style:{fontSize:`${I}px`},children:[h.jsx("span",{className:Q.Text,style:{color:x.legend.labelColor},children:v(i)}),L?h.jsx("span",{className:Q.Text,style:{color:x.legend.valueColor},children:u}):null]})]})}function Ie({activeIndex:t=-1,colorVisionType:e,data:n,theme:o=Jt,itemDimensions:s,indexOffset:i=0,backgroundColor:r,truncate:a=!1,showLegendValues:c=!1,seriesNameFormatter:u}){const{hiddenIndexes:l}=de(),d=m.useCallback((g,v)=>{s!=null&&s.current&&(s.current[g]=v)},[s]),f=n.map((g,v)=>l.includes(v)||g.isHidden===!0?null:h.jsx(Fo,{...g,activeIndex:t,colorVisionType:e,index:v+i,theme:o,backgroundColor:r,onDimensionChange:d,truncate:a,showLegendValues:c,seriesNameFormatter:u,lineStyle:g==null?void 0:g.lineStyle},v));return h.jsx(m.Fragment,{children:f})}const qt="legend-toolip",Wo=520;function Go({activeIndex:t,colorVisionType:e,data:n,theme:o,label:s,lastVisibleIndex:i=0,setActivatorWidth:r}){const a=R(),{isFirefox:c}=ut(),{id:u}=k(),l=`${qt}_${u}`,d=Te(l),f=m.useRef(null),g=m.useRef(null);On({enabled:!0,root:qt});const v=m.useMemo(()=>({top:0,left:0}),[]),[p,x]=m.useState(v),[y,w]=m.useState(!1);m.useEffect(()=>{if(g.current==null)return;const L=g.current.getBoundingClientRect();r==null||r(L.width)},[r]);const T=m.useCallback(()=>{if(f.current==null||g.current==null)return;w(!0);const L=g.current.getBoundingClientRect(),C=f.current.getBoundingClientRect(),E=L.x+window.scrollX,_=L.y+window.scrollY+L.height;function A(){return E+C.width+N>window.innerWidth?E-C.width+L.width:E}function j(){return _+C.height+N>=window.innerHeight+window.scrollY?_-C.height-L.height:_}x({top:j(),left:A()})},[x]),I=m.useCallback(L=>{var C;(L==null||(C=L.relatedTarget)===null||C===void 0?void 0:C.id)!==l&&(w(!1),x(v))},[w,x,v,l]);return h.jsxs(m.Fragment,{children:[h.jsx("button",{className:Xt.MoreText,ref:g,onMouseEnter:T,onMouseLeave:I,onFocus:T,onBlur:I,style:{color:a.legend.labelColor,fontSize:dt()},children:s}),_t.createPortal(h.jsx("div",{className:Xt.Tooltip,ref:f,onMouseLeave:I,onBlur:I,id:l,style:{visibility:y?"visible":"hidden",zIndex:y?Wo:-1e5,background:te(a.tooltip.backgroundColor,c?1:ee),...p},children:h.jsx(Ie,{activeIndex:t,colorVisionType:e,data:n,theme:o,indexOffset:i,backgroundColor:"transparent"})}),d)]})}const Kt=10;function Ho(t){const{direction:e,enableHideOverflow:n,legendItemDimensions:o,data:s}=t,i=m.useMemo(()=>s.filter(c=>c.isHidden!==!0),[s]),{displayedData:r,hiddenData:a}=m.useMemo(()=>{if(!n||!o.current||i.length<=1)return{displayedData:i,hiddenData:[]};if(e==="vertical"){const{height:v}=t;let p=i.length;return o.current.reduce((x,y,w)=>{if(x+y.height+w*Kt>v)p=w;else return x+y.height},p),{displayedData:i.slice(0,p||1),hiddenData:i.slice(p||1,i.length)}}const{width:c,leftMargin:u,horizontalMargin:l,activatorWidth:d}=t;let f=i.length;const g=c-u-l-d;return o.current.filter(v=>!!v).reduce((v,p,x)=>{if(v+p.width+x*Kt>g)f=x;else return v+p.width},f),{displayedData:i.slice(0,f||1),hiddenData:i.slice(f||1,i.length)}},[n,o,e,t,i]);return{displayedData:r,hiddenData:a}}function hi({colorVisionType:t,data:e,onDimensionChange:n,direction:o="horizontal",fullWidth:s=!1,position:i="bottom",maxWidth:r,renderLegendContent:a,enableHideOverflow:c=!1,renderHiddenLegendLabel:u=l=>`+${l} more`}){var l;const d=R(),{setRef:f,entry:g}=ie(),{theme:v,containerBounds:p}=k(),x=m.useRef(oe),y=m.useRef(Ge),[w,T]=m.useState(-1),I=i.includes("top"),L=i.includes("left"),{horizontalMargin:C}=d.grid,E=L?0:C,_=m.useRef([{width:0,height:0}]),[A,j]=m.useState(0),b=o==="horizontal"?{direction:"horizontal",data:e,enableHideOverflow:c,legendItemDimensions:_,width:p.width,activatorWidth:A,leftMargin:E,horizontalMargin:C}:{direction:"vertical",data:e,height:p.height,enableHideOverflow:c,legendItemDimensions:_},{displayedData:W,hiddenData:Y}=Ho(b),z=e.filter(D=>D.isHidden!==!0),G=c&&W.length<z.length,S={horizontal:{justifyContent:i==="right"?"flex-end":"flex-start",margin:I?`0 ${C}px ${Pe}px ${E}px`:`${Qt}px ${C}px 0 ${E}px`,flexDirection:"row",flexWrap:c?"nowrap":"wrap"},vertical:{alignItems:"flex-start",margin:`0 ${C}px 0 ${E}px`,flexDirection:"column",maxWidth:s?"none":r,flex:s?1:"initial"},centerTiles:{justifyContent:"center"}},P=D=>{if(D==="top"||D==="bottom"||D==="center")return{justifyContent:"center"}},M={getColorVisionStyles:D=>se({activeIndex:w,index:D}),getColorVisionEventAttrs:D=>re({type:t,index:D})};return St({type:t,onIndexChange:({detail:D})=>{T(D.index)}}),m.useEffect(()=>{const D=g==null?void 0:g.contentRect.height,Z=g==null?void 0:g.contentRect.width,ot={height:D,width:Z};g==null||D==null||Z==null||Ro({height:x.current,width:y.current},ot)||(x.current=ot.height,y.current=ot.width,n(ot))},[g,n]),h.jsx("div",{className:He(Oo.Container),ref:f,role:"list",style:{...S[o],...P(i)},children:(l=a==null?void 0:a(M,w))!==null&&l!==void 0?l:h.jsxs(m.Fragment,{children:[h.jsx(Ie,{activeIndex:w,colorVisionType:t,data:G?W:e,theme:v,itemDimensions:c?_:void 0,truncate:G}),G&&h.jsx(Go,{activeIndex:w,colorVisionType:t,data:Y,theme:v,label:u(e.length-W.length),lastVisibleIndex:e.length-Y.length,setActivatorWidth:j})]})})}function fi(t={}){const e=ae(t);return{labelFormatter:n=>`${n}`,integersOnly:!1,fixedWidth:!1,maxYOverride:null,ticksOverride:null,...e}}function mi(t={}){const e=ae(t);return{labelFormatter:n=>`${n}`,hide:!1,allowLineWrap:!0,...e}}function gi(t,e){const n={};return t.forEach(o=>{const s=o[e];n[s]=o}),n}var Vo={SkipLink:"_SkipLink_1jwcn_1"};const Yo=({children:t,anchorId:e})=>h.jsx("a",{className:Vo.SkipLink,href:`#${e}`,children:t}),zo=({id:t})=>h.jsx("a",{id:t,tabIndex:-1});Yo.Anchor=zo;export{ui as A,Vn as B,ni as C,et as D,Xe as E,Jo as F,me as G,ai as H,ye as I,pe as J,we as K,hi as L,ve as M,xe as N,V as P,Yo as S,di as T,ri as X,li as Y,St as a,On as b,oi as c,de as d,ti as e,ei as f,Ko as g,Zo as h,si as i,en as j,ci as k,mi as l,fi as m,gi as n,Qo as o,eo as p,pt as q,Qe as r,ro as s,no as t,ii as u,bn as v,Pn as w,rt as x,Ee as y,nt as z};
